import{j as e,R as g,m as u,t as j,$ as Y}from"./app-CLKafMi8.js";import{B as n}from"./button-BjJxCl2U.js";import{e as w,f as y,g as S,h as C,i as D,j as T,k as z,A as K}from"./app-layout-DVg1ib_u.js";import{S as G,a as J,b as Q,c as W,d as X}from"./select-Dh-P3SFY.js";import{c as _,A as E,u as Z,f as P,D as ee,g as se,a as le,b as re,d as ne}from"./index-DJgH2Ra1.js";import{L as te}from"./loader-circle-D3ymHeNZ.js";import{P as o}from"./index-BCvKXVy8.js";import{T as ae,a as oe,b as N,c as ie,d as ce,e as k}from"./table-BlADWfi2.js";import{D as de}from"./data-table-toolbar-B2mgQWHI.js";import{T as he,a as me,b as M,c as A}from"./tabs-CK9e9gg0.js";import"./app-logo-icon-Duf-p-hV.js";import"./index-DDbGhVyI.js";import"./createLucideIcon-BqkyE-xM.js";import"./index-CbVnBepr.js";import"./index-DOfCkWky.js";import"./index-YJI3hRqt.js";import"./wrench-BvQdNsdS.js";import"./index-d59M3VVJ.js";import"./input-BZPmkLvt.js";import"./plus-DTrtCI9I.js";function xe({title:t,message:i,onConfirm:d,onCancel:a,triggerVariant:s,trigger:l}){return e.jsxs(w,{children:[e.jsx(y,{className:`rounded bg-${s} px-3 text-white hover:bg-${s}-600`,children:l}),e.jsx(S,{children:e.jsxs(C,{children:[e.jsx(D,{children:t}),e.jsx(T,{children:i}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(z,{asChild:!0,children:e.jsx(n,{type:"button",variant:"destructive",children:"No"})}),e.jsx(n,{className:"border-2 border-green-600 bg-green-600 transition-all hover:bg-transparent hover:text-black",onClick:d,children:"Yes"})]})]})})]})}const f=_(),ge=(t,i,d,a)=>[{id:"select",enableSorting:!1,enableHiding:!1},f.accessor("personnel_name",{header:({column:s})=>e.jsxs(n,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["Personnel Name",e.jsx(E,{className:"ml-2 h-4 w-4"})]}),cell:s=>e.jsx("div",{className:"text-left",children:s.getValue()})}),f.accessor("email",{header:()=>e.jsx("div",{className:"text-left",children:"Email"}),cell:s=>e.jsx("div",{className:"text-left",children:s.getValue()})}),f.accessor("phone_number",{header:()=>e.jsx("div",{className:"text-left",children:"Phone Number"}),cell:s=>e.jsx("div",{className:"text-left",children:s.getValue()})}),f.accessor("role_id",{header:()=>e.jsx("div",{className:"text-left",children:"Role"}),cell:s=>{const l=s.row.original,[r,m]=g.useState(!1),v=h=>{m(!0),u.put(`/personnel/${l.id}/role`,{role:h},{preserveScroll:!0,onSuccess:()=>{console.log("Role updated successfully")},onError:()=>{console.error("Failed to update role")},onFinish:()=>{m(!1)}})};return e.jsxs("div",{className:"text-left",children:[r&&e.jsx(te,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsxs(G,{value:String(s.getValue()),onValueChange:v,disabled:r,children:[e.jsx(J,{className:"w-[180px]",children:e.jsx(Q,{placeholder:"Select role"})}),e.jsx(W,{children:a.map(h=>e.jsx(X,{value:String(h.role_id),children:h.name},h.role_id))})]})]})}}),{id:"actions",header:()=>e.jsx("div",{className:"text-left",children:"Actions"}),cell:({row:s})=>{const l=s.original,r=()=>{u.put(`/personnel/${l.id}/unverify`),j.success("Personnel has been unverified.")};return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{className:"bg-yellow-300 text-black hover:bg-yellow-400",onClick:()=>t(l.id),children:"View"}),e.jsx(xe,{title:"Confirmation",message:"Are you sure you want to unverify this personnel?",onConfirm:r,triggerVariant:"destructive",trigger:"Unverify"})]})}}];function R({columns:t,data:i,handleCreate:d,handleView:a,handleEdit:s,handleDelete:l,roles:r,filterColumn:m,placeholder:v,filterOptions:h,filterColumnName:F}){var V;const[H,U]=g.useState([]),[$,I]=g.useState([]),[L,B]=g.useState({}),[O,q]=g.useState({}),p=Z({data:i,columns:g.useMemo(()=>t(a,s,l,r),[a,s,l,r]),getCoreRowModel:ne(),getPaginationRowModel:re(),onSortingChange:U,getSortedRowModel:le(),onColumnFiltersChange:I,getFilteredRowModel:se(),onColumnVisibilityChange:B,onRowSelectionChange:q,state:{sorting:H,columnFilters:$,columnVisibility:L,rowSelection:O},initialState:{pagination:{pageSize:5}}});return e.jsxs("div",{children:[e.jsx(de,{table:p,handleCreate:d,filterColumn:m,placeholder:v,filterOptions:h,filterColumnName:F}),e.jsx("div",{className:"rounded-md border bg-white",children:e.jsxs(ae,{children:[e.jsx(oe,{children:p.getHeaderGroups().map(x=>e.jsx(N,{children:x.headers.map(c=>e.jsx(ie,{children:c.isPlaceholder?null:P(c.column.columnDef.header,c.getContext())},c.id))},x.id))}),e.jsx(ce,{children:(V=p.getRowModel().rows)!=null&&V.length?p.getRowModel().rows.map(x=>e.jsx(N,{"data-state":x.getIsSelected()&&"selected",children:x.getVisibleCells().map(c=>e.jsx(k,{children:P(c.column.columnDef.cell,c.getContext())},c.id))},x.id)):e.jsx(N,{children:e.jsx(k,{colSpan:t.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(ee,{table:p})]})}R.propTypes={columns:o.arrayOf(o.shape({accessorKey:o.string,header:o.oneOfType([o.string,o.func]),cell:o.func})).isRequired,data:o.arrayOf(o.object).isRequired};const b=_(),ue=(t,i,d,a)=>[{id:"select",enableSorting:!1,enableHiding:!1},b.accessor("personnel_name",{header:({column:s})=>e.jsxs(n,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["Personnel Name",e.jsx(E,{className:"ml-2 h-4 w-4"})]}),cell:s=>e.jsx("div",{className:"text-left",children:s.getValue()})}),b.accessor("email",{header:()=>e.jsx("div",{className:"text-left",children:"Email"}),cell:s=>e.jsx("div",{className:"text-left",children:s.getValue()})}),b.accessor("phone_number",{header:()=>e.jsx("div",{className:"text-left",children:"Phone Number"}),cell:s=>e.jsx("div",{className:"text-left",children:s.getValue()})}),b.accessor("created_at",{header:()=>e.jsx("div",{className:"text-left",children:"Created At"}),cell:s=>{const r=new Date(s.getValue()).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return e.jsx("div",{className:"text-left",children:r})}}),{id:"actions",header:()=>e.jsx("div",{className:"text-left",children:"Actions"}),cell:({row:s})=>{const l=s.original,r=()=>{u.put(`/personnel/${l.id}/verify`,{preserveScroll:!0,onSuccess:()=>{j.success("Personnel has been verified",{description:"The personnel has been successfully verified and can now access the system."})},onError:()=>{j("Error",{description:"Failed to verify personnel"})}})},m=()=>{u.delete(`/personnel/${l.id}`,{preserveScroll:!0,onSuccess:()=>{j.success("Delete successful",{description:"The personnel has been successfully deleted from the system."})},onError:()=>{j("Error",{description:"Failed to delete personnel"})}})};return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{className:"bg-yellow-300 text-black hover:bg-yellow-400",onClick:()=>u.get(route("personnel.show",{id:l.id})),children:"View"}),e.jsxs(w,{children:[e.jsx(y,{className:"rounded bg-green-700 px-3 text-white hover:bg-green-600",children:"Verify"}),e.jsx(S,{children:e.jsxs(C,{children:[e.jsx(D,{children:"Confirmation"}),e.jsx(T,{children:"Are you absolutely sure you want to verify this personnel?"}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(n,{className:"border-2 border-red-600 bg-red-600 transition-all hover:bg-transparent hover:text-black",children:"No"}),e.jsx(n,{className:"border-2 border-green-600 bg-green-600 transition-all hover:bg-transparent hover:text-black",onClick:r,children:"Yes"})]})]})})]}),e.jsxs(w,{children:[e.jsx(y,{className:"rounded bg-red-700 px-3 text-white hover:bg-red-800",children:"Delete"}),e.jsx(S,{children:e.jsxs(C,{children:[e.jsx(D,{children:"Delete User?"}),e.jsx(T,{children:"This action cannot be undone. Are you sure you want to delete this user?"}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(n,{className:"border-2 transition-all hover:bg-transparent hover:text-black",children:"Cancel"}),e.jsx(n,{className:"border-2 border-red-600 bg-red-600 transition-all hover:bg-transparent hover:text-black",onClick:m,children:"Delete"})]})]})})]})]})}}],pe=[{title:"Personnel",href:"/personnel"}],je={title:"Personnel Management",description:"View and manage personnel here."};function Ue({personnel:t,roles:i,unverifiedPersonnel:d}){const a=s=>{u.get(route("personnel.show",{id:s}))};return e.jsxs(K,{breadcrumbs:pe,pageDetails:je,children:[e.jsx(Y,{title:"Parts"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsxs(he,{defaultValue:"list",className:"w-full",children:[e.jsxs(me,{className:"grid w-[400px] grid-cols-2 bg-white",children:[e.jsx(M,{value:"list",children:"System Users"}),e.jsx(M,{value:"verification",children:"Pending Verification"})]}),e.jsx(A,{value:"list",children:e.jsx(R,{columns:ge,data:t,handleView:a,roles:i,filterColumn:"personnel_name",placeholder:"Search personnel"})}),e.jsx(A,{value:"verification",children:e.jsx(R,{columns:ue,data:d,handleView:a,roles:i,filterColumn:"personnel_name",placeholder:"Search personnel"})})]})})]})}export{Ue as default};
