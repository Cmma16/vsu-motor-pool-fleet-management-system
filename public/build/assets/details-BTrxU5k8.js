import{q as u,j as e,$ as j,Y as y,m as n,t as i}from"./app-dmRk_xSF.js";import{D as b}from"./display-table-ivmSM7Hu.js";import{M as _,a as N}from"./maintenance-part-column-BdMxcbrd.js";import{B as g}from"./button-DfRWLWLh.js";import{C as t,a as o,b as l,c as d,d as m}from"./card-4lmChtC_.js";import{L as r}from"./label-tcdczQa9.js";import{A as v}from"./app-layout-CvTHScm8.js";import"./index-CJBnmqfT.js";import"./index-DOZDu9o9.js";import"./createLucideIcon-C6Zxls1X.js";import"./select-DTbPtvM0.js";import"./index-Cymawgta.js";import"./index-BzxzypMb.js";import"./index-DS_s7J1F.js";import"./index-Dnf0Jnlg.js";import"./app-logo-icon-DPhwaTiD.js";import"./table-CfditYzf.js";import"./destructive-dialog-B4j_tJwZ.js";import"./input-error-BIGrXHCO.js";import"./input-uEZiaGVz.js";import"./trash-CUlCQkqn.js";import"./index-C9jObI59.js";import"./wrench-D44s-QhF.js";const C=[{title:"Repairs",href:"/repairs"},{title:"Details",href:"repairs/details"}],R={title:"Repair Details",description:"Comprehensive information about the scheduled repair, including specifications and status."};function K({repair:s,parts:c,repairParts:p}){const a=u().props.auth.user,h=()=>{n.patch(route("repairs.confirm",{maintenance_id:s.repair_id},{onSuccess:()=>{i.success("Repair confirmed successfully",{description:"The repair has been confirmed successfully"})},onError:()=>{i.error("Repair confirmation failed",{description:"The repair was not confirmed"})}}))},x=f=>{n.delete(route("maintenance-parts.destroy",{id:f}),{onSuccess:()=>{i.success("Deleted successfully",{description:"The part usage record has been deleted successfully"})},onError:()=>{i.error("Delete failed",{description:"The part usage record was not deleted"})}})};return e.jsxs(v,{breadcrumbs:C,pageDetails:R,children:[e.jsx(j,{title:"Repair Details"}),e.jsxs("div",{className:"mx-6 mb-3 space-y-6 rounded-lg",children:[e.jsxs(t,{className:"w-full",children:[e.jsxs(o,{children:[e.jsx(l,{children:"Repair Information"}),e.jsxs(d,{className:"flex justify-between",children:["General overview of the repair.",a.role.name==="Manager"&&!s.confirmed_by&&e.jsx(g,{onClick:h,children:"Confirm Record"})]})]}),e.jsx(m,{children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"vehicle_name",children:"Vehicle Name"}),e.jsx("span",{children:s.vehicle_name??"N/A"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"request_description",children:"Request Description"}),e.jsx("span",{children:s.request_description??"N/A"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"performed_by",children:"Performed By"}),e.jsx("span",{children:s.performed_by??"N/A"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"confirmed_by",children:"Confirmed By"}),e.jsx("span",{children:s.confirmed_by??"N/A"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"description",children:"Summary"}),e.jsx("span",{children:s.repair_summary})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"status",children:"Odometer Reading"}),e.jsx("span",{children:s.odometer_reading})]}),a.role.name==="Mechanic"&&!s.confirmed_by&&e.jsx(y,{href:`${s.repair_id}/edit`,className:"col-span-2 w-1/3 rounded-md bg-[#006600] px-3 py-2 text-center text-white hover:bg-[#005500]",children:"Edit"})]})})})]}),e.jsxs(t,{children:[e.jsxs(o,{children:[e.jsx(l,{children:"Parts Used"}),e.jsxs(d,{className:"flex justify-between",children:["Parts used during the repair.",a.role.name==="Mechanic"&&!s.confirmed_by&&e.jsx(_,{maintenance_id:s.repair_id,parts:c,formType:"create"})]})]}),e.jsx(m,{children:e.jsx(b,{columns:N,data:p,parts:c,handleDelete:x,showActions:!s.confirmed_by})})]})]})]})}export{K as default};
