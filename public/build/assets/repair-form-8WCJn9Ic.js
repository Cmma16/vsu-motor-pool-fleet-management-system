import{R as _,j as e}from"./app-CLKafMi8.js";import{I as n}from"./input-error-D2Kuilvy.js";import{O as f}from"./odometer-log-modal-DbiIyGvz.js";import{B as j}from"./badge-C6hRO3uT.js";import{B as I}from"./button-BjJxCl2U.js";import{I as o}from"./input-BZPmkLvt.js";import{L as c}from"./label-CEnKmdYU.js";import{S as p,a as u,b as v,c as g,d as b}from"./select-Dh-P3SFY.js";import{T as C}from"./textarea-i2pfz0MG.js";function z({formData:d,formType:y,setData:i,onSubmit:N,processing:r,errors:l,vehicles:h,users:q,serviceRequests:S,odometerLogs:x,lockInputs:t}){const s=_.useMemo(()=>{const a=Number(d.vehicle_id);return x.filter(m=>m.vehicle_id===a).sort((m,R)=>new Date(R.created_at)-new Date(m.created_at))[0]},[d.vehicle_id,x]);return _.useEffect(()=>{s?i("odometer_id",s.odometer_id):i("odometer_id","")},[s]),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"vehicle_id",children:["Vehicle ",e.jsx("span",{className:"text-red-500",children:"*"}),t&&e.jsx(j,{variant:"outline",className:"ml-2",children:"Read only"})]}),e.jsxs(p,{disabled:t,value:String(d.vehicle_id),onValueChange:a=>i("vehicle_id",Number(a)),children:[e.jsx(u,{className:"mt-2 disabled:border-gray-300 disabled:opacity-100",id:"vehicle_id",tabIndex:1,children:e.jsx(v,{placeholder:"Select vehicle"})}),e.jsx(g,{children:h.map(a=>e.jsx(b,{value:String(a.vehicle_id),children:a.vehicle_name},a.vehicle_id))})]}),e.jsx(n,{message:l.vehicle_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"request_id",children:["Request Description ",e.jsx("span",{className:"text-red-500",children:"*"}),t&&e.jsx(j,{variant:"outline",className:"ml-2",children:"Read only"})]}),e.jsxs(p,{disabled:t,value:String(d.request_id),onValueChange:a=>i("request_id",Number(a)),children:[e.jsx(u,{className:"mt-2 disabled:border-gray-300 disabled:opacity-100",id:"request_id",tabIndex:2,children:e.jsx(v,{placeholder:"Select service request"})}),e.jsx(g,{children:S.map(a=>e.jsx(b,{value:String(a.request_id),children:a.work_description},a.request_id))})]}),e.jsx(n,{message:l.request_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"date_in",children:["Date In ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"date_in",name:"date_in",className:"mt-2",type:"date",value:d.date_in,onChange:a=>i("date_in",a.target.value),disabled:r,tabIndex:3}),e.jsx(n,{message:l.date_in})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"date_completed",children:["Date Completed ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"date_completed",name:"date_completed",className:"mt-2",type:"date",value:d.date_completed,onChange:a=>i("date_completed",a.target.value),disabled:r,tabIndex:4}),e.jsx(n,{message:l.date_completed})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"maintenance_summary",children:["Summary ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(C,{id:"maintenance_summary",name:"maintenance_summary",className:"mt-2",placeholder:"Description of the maintenance conducted",value:d.maintenance_summary,onChange:a=>i("maintenance_summary",a.target.value),disabled:r,tabIndex:5}),e.jsx(n,{message:l.maintenance_summary})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Odometer Reading"}),e.jsx(o,{value:(s==null?void 0:s.reading)??"",disabled:!0,id:"odometer_id",name:"odometer_id",placeholder:"No odometer reading available",className:"mt-2 bg-gray-100 disabled:border-gray-300 disabled:opacity-100"}),d.vehicle_id&&e.jsx(f,{latestReading:(s==null?void 0:s.reading)??0,vehicles:h,formType:"add",vehicle_id:d.vehicle_id}),e.jsx(n,{message:l.odometer_id})]})]}),e.jsx(I,{disabled:r,className:"w-1/3",children:y==="edit"?"Save Changes":"Add Record"})]})}export{z as R};
