import{j as e,q as y,m as t,$ as _,Y as C}from"./app-CLKafMi8.js";import{D}from"./display-table-BRRue0uF.js";import{B as r}from"./button-BjJxCl2U.js";import{C as T}from"./crown-D2rAUfyR.js";import{c as k,A as M}from"./index-DJgH2Ra1.js";import{C as f,a as o,b as m,c as x,d as p,e as P}from"./card-DGsM5wb-.js";import{c as u}from"./createLucideIcon-BqkyE-xM.js";import{C as j}from"./calendar-C6F6gg0q.js";import{C as N}from"./clock-DvWFFJZU.js";import{S as A}from"./separator-BPS_s0RH.js";import{A as V}from"./app-layout-DVg1ib_u.js";import{A as H}from"./arrow-left-BCZ0v28w.js";import{F as h}from"./file-text-BK7zxVGb.js";import{f as d}from"./format-Dc8-h87M.js";import{p as L}from"./parse-CaABFq7T.js";import"./index-BCvKXVy8.js";import"./table-BlADWfi2.js";import"./app-logo-icon-Duf-p-hV.js";import"./select-Dh-P3SFY.js";import"./index-DDbGhVyI.js";import"./index-CbVnBepr.js";import"./index-DOfCkWky.js";import"./index-d59M3VVJ.js";import"./index-YJI3hRqt.js";import"./wrench-BvQdNsdS.js";import"./addDays-BIAKPz2e.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],b=u("Gauge",S);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]],v=u("HeartPulse",$);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],E=u("PenLine",z),n=k(),I=(s,a,c)=>[{id:"select",enableSorting:!1,enableHiding:!1},n.accessor("is_party_head",{header:()=>e.jsx("div",{className:"text-left"}),cell:l=>e.jsx("div",{className:"flex items-center justify-center text-center",children:l.getValue()?e.jsx(T,{fill:"gold",size:16,className:"text-amber-400"}):""})}),n.accessor("name",{header:()=>e.jsxs(r,{variant:"ghost",onClick:()=>column.toggleSorting(column.getIsSorted()==="asc"),children:["Name",e.jsx(M,{className:"ml-2 h-4 w-4"})]}),cell:l=>{const i=l.getValue()||"",g=30,w=i.length>g?i.slice(0,g)+"...":i;return e.jsx("div",{className:"text-left",children:w})}}),n.accessor("affiliation",{header:()=>e.jsx("div",{className:"text-left",children:"Department/Office/Center/Project"}),cell:l=>e.jsx("div",{className:"text-left",children:l.getValue()})}),n.accessor("contact_number",{header:()=>e.jsx("div",{className:"text-left",children:"Contact Number"}),cell:l=>e.jsx("div",{className:"text-left",children:l.getValue()})}),{id:"actions"}];function F({pre_trip:s,post_trip:a,trip_log_id:c,trip_status:l}){const i=y().props.auth.user;return e.jsxs(f,{className:"border border-blue-100 bg-white",children:[e.jsxs(o,{className:"flex flex-row items-center justify-between border-b border-blue-100",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Pre-Trip Inspection"}),e.jsx(x,{children:"Vehicle condition and inspection before the trip"})]}),i.role.name==="Driver"&&l==="completed"&&e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>t.get(route("trip-logs.edit",{trip_log_id:c})),className:"border-green-200 hover:bg-green-50 hover:text-green-700",children:[e.jsx(E,{className:"mr-2 h-4 w-4 text-green-600"}),"Edit"]})]}),e.jsx(p,{className:"space-y-6 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"flex flex-row gap-3 rounded-lg border border-blue-100/50 bg-blue-50/30 p-3",children:[e.jsx(j,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-700/80",children:"Date Received"}),e.jsx("p",{className:"text-lg font-semibold text-blue-900",children:s.received_at})]})]}),e.jsxs("div",{className:"flex flex-row gap-3 rounded-lg border border-purple-100/50 bg-purple-50/30 p-3",children:[e.jsx(N,{className:"h-6 w-6 text-purple-600"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-purple-700/80",children:"Departure Time"}),e.jsx("p",{className:"text-lg font-semibold text-purple-900 capitalize",children:s.departure_time})]})]}),e.jsxs("div",{className:"flex flex-row gap-3 rounded-lg border border-amber-100/50 bg-amber-50/30 p-3",children:[e.jsx(b,{className:"h-6 w-6 text-amber-600"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-amber-700/80",children:"Odometer Out"}),e.jsxs("p",{className:"text-lg font-semibold text-amber-900",children:[s.odometer_out," km"]})]})]}),e.jsxs("div",{className:"flex flex-row gap-3 rounded-lg border border-rose-100/50 bg-rose-50/30 p-3",children:[e.jsx(v,{className:"h-6 w-6 text-rose-600"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-rose-700/80",children:"Vehicle Condition (Before Trip)"}),e.jsx("p",{className:"text-lg font-semibold text-rose-900 capitalize",children:s.pre_trip_condition})]})]})]})}),a.arrival_time!==null&&e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"flex flex-row items-center justify-between border-b border-emerald-100",children:e.jsxs("div",{children:[e.jsx(m,{children:"Post-Trip Inspection"}),e.jsx(x,{children:"Vehicle condition and inspection after the trip"})]})}),e.jsx(p,{className:"space-y-6 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"flex flex-row gap-3 rounded-lg border border-emerald-100/50 bg-emerald-50/30 p-3",children:[e.jsx(j,{className:"h-6 w-6 text-emerald-600"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-emerald-700/80",children:"Date Returned"}),e.jsx("p",{className:"text-lg font-semibold text-emerald-900",children:a.date_returned})]})]}),e.jsxs("div",{className:"flex flex-row gap-3 rounded-lg border border-indigo-100/50 bg-indigo-50/30 p-3",children:[e.jsx(N,{className:"h-6 w-6 text-indigo-600"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-indigo-700/80",children:"Arrival Time"}),e.jsx("p",{className:"text-lg font-semibold text-indigo-900 capitalize",children:a.arrival_time})]})]}),e.jsxs("div",{className:"flex flex-row gap-3 rounded-lg border border-cyan-100/50 bg-cyan-50/30 p-3",children:[e.jsx(b,{className:"h-6 w-6 text-cyan-600"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-cyan-700/80",children:"Odometer In"}),e.jsxs("p",{className:"text-lg font-semibold text-cyan-900",children:[a.odometer_in," km"]})]})]}),e.jsxs("div",{className:"flex flex-row gap-3 rounded-lg border border-violet-100/50 bg-violet-50/30 p-3",children:[e.jsx(v,{className:"h-6 w-6 text-violet-600"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-violet-700/80",children:"Vehicle Condition (After Trip)"}),e.jsx("p",{className:"text-lg font-semibold text-violet-900 capitalize",children:a.post_trip_condition})]})]})]})})]})]})}const O=[{title:"Trips",href:"/vehicles/trips"},{title:"Details",href:"vehicles/trips/details"}],R={title:"Trip Details",description:"Comprehensive information about the trip."};function q(s){t.post(`/passengers/${s}/assign-party-head`,{preserveScroll:!0,onSuccess:()=>{console.log("Party head updated")}})}function ge({trip:s}){var l;const a=s.departure_time?d(L(s.departure_time,"HH:mm:ss",new Date),"h:mm a"):"",c=y().props.auth.user;return e.jsxs(V,{breadcrumbs:O,pageDetails:R,children:[e.jsx(_,{title:"Trip Details"}),e.jsxs("div",{className:"mx-6 mb-3 space-y-6 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(r,{variant:"outline",className:"bg-white",onClick:()=>t.get(route("trips.index")),children:[e.jsx(H,{})," Trip List"]}),s.status==="assigned"&&c.role.name==="Driver"&&e.jsxs(r,{variant:"default",onClick:()=>t.get(route("trip-logs.create",s.trip_id)),children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Start Trip"]}),s.status==="ongoing"&&e.jsxs(r,{className:"border-2 border-[#006600] bg-white text-black hover:bg-[#005500] hover:text-white",onClick:()=>t.get(route("trip-logs.end",s.trip_id)),children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"End Trip"]}),s.status==="completed"&&e.jsxs(r,{className:"border-2 border-[#006600] bg-white text-black hover:bg-[#005500] hover:text-white",onClick:()=>window.open(`/trips/${s.trip_id}/pdf`,"_blank"),children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Print"]})]}),console.log(s),e.jsxs(f,{className:"flex-1",children:[e.jsxs(o,{children:[e.jsx(m,{children:"Trip Information"}),e.jsx(x,{children:"General overview of the trip."})]}),e.jsx(p,{children:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Trip Number"}),e.jsx("p",{className:"text-muted-foreground",children:s.trip_number})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Date Filed"}),e.jsx("p",{className:"text-muted-foreground",children:d(new Date(s.date_filed),"MMMM d, yyyy")})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Scheduled Date"}),s.start_date!==s.end_date?e.jsx("p",{className:"text-muted-foreground",children:`${d(new Date(s.start_date),"MMMM d, yyyy")} - ${d(new Date(s.end_date),"MMMM d, yyyy")}`}):e.jsx("p",{className:"text-muted-foreground",children:d(new Date(s.start_date),"MMMM d, yyyy")})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Departure Time"}),e.jsx("p",{className:"text-muted-foreground",children:a})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Destination"}),e.jsx("p",{className:"text-muted-foreground",children:s.destination})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Requesting Party"}),e.jsx("p",{className:"text-muted-foreground",children:s.requesting_party})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Purpose"}),e.jsx("p",{className:"text-muted-foreground",children:s.purpose})]}),((l=s.vehicle)==null?void 0:l.name)&&e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Vehicle"}),e.jsx("p",{className:"text-muted-foreground",children:s.vehicle.name})]}),s.driver_name&&e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Driver"}),e.jsx("p",{className:"text-muted-foreground",children:s.driver_name})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Status"}),e.jsx("p",{className:"text-muted-foreground",children:s.status})]})]})})}),e.jsx(A,{className:"my-2"}),e.jsx(P,{className:"",children:e.jsxs("div",{className:"flex w-full flex-col justify-end gap-3 sm:flex-row",children:[s.status==="pending"&&e.jsx(C,{href:`${s.trip_id}/edit`,className:"rounded-md border-2 border-[#006600] px-6 py-1 hover:bg-gray-100",children:"Edit Trip"}),s.status==="pending"&&e.jsx(r,{className:"rounded-md bg-[#006600] px-6 py-2 text-center text-white hover:bg-[#005500]",onClick:()=>{t.get(`/trips/${s.trip_id}/assign`)},children:"Assign"})]})})]}),e.jsxs(f,{children:[e.jsxs(o,{children:[e.jsx(m,{children:"Passengers"}),e.jsx(x,{className:"flex justify-between",children:"List of passengers of the trip."})]}),e.jsx(p,{children:e.jsx(D,{columns:I,data:s.passengers,handleEdit:q,handleView:void 0,handleDelete:void 0})})]}),s.trip_log_id&&e.jsx(F,{pre_trip:s.pre_trip,post_trip:s.post_trip,trip_log_id:s.trip_log_id,trip_status:s.status})]})]})}export{ge as default};
