import{j as e,m as a,t as n,$ as m}from"./app-dmRk_xSF.js";import{D as p}from"./data-table-DX_UqsPX.js";import{C as h}from"./colorful-row-actions-D1fNNihr.js";import{B as c}from"./badge-DEZpwE8-.js";import{B as v}from"./button-DfRWLWLh.js";import{c as x,A as f}from"./index-DOZDu9o9.js";import{P as u}from"./placeholder-pattern-BH-eEy8j.js";import{A as g}from"./app-layout-CvTHScm8.js";import{W as j}from"./wrench-D44s-QhF.js";import{I as b}from"./printer-CktAk4ds.js";import"./index-CJBnmqfT.js";import"./table-CfditYzf.js";import"./app-logo-icon-DPhwaTiD.js";import"./data-table-toolbar-DAkKrzaM.js";import"./input-uEZiaGVz.js";import"./select-DTbPtvM0.js";import"./index-Cymawgta.js";import"./createLucideIcon-C6Zxls1X.js";import"./index-BzxzypMb.js";import"./index-DS_s7J1F.js";import"./index-Dnf0Jnlg.js";import"./plus-C3GojSzG.js";import"./destructive-dialog-B4j_tJwZ.js";import"./pencil-DoPNFMyU.js";import"./trash-CUlCQkqn.js";import"./index-C9jObI59.js";const s=x(),N=(i,l,o)=>[{id:"select",enableSorting:!1,enableHiding:!1},s.accessor("vehicle_name",{header:({column:r})=>e.jsxs(v,{variant:"ghost",onClick:()=>r.toggleSorting(r.getIsSorted()==="asc"),children:["Vehicle",e.jsx(f,{className:"ml-2 h-4 w-4"})]}),cell:r=>e.jsx("div",{className:"text-left",children:r.getValue()})}),s.accessor("date_in",{header:()=>e.jsx("div",{className:"text-left",children:"Date In"}),cell:r=>e.jsx("div",{className:"text-left",children:r.getValue()})}),s.accessor("date_completed",{header:()=>e.jsx("div",{className:"text-left",children:"Date Completed"}),cell:r=>e.jsx("div",{className:"text-left",children:r.getValue()})}),s.accessor("performed_by",{header:()=>e.jsx("div",{className:"text-left",children:"Performed by"}),cell:r=>e.jsx("div",{className:"text-left",children:r.getValue()})}),s.accessor("odometer_reading",{header:()=>e.jsx("div",{className:"text-left",children:"Odometer Reading"}),cell:r=>e.jsx("div",{className:"text-left",children:r.getValue()})}),s.accessor("confirmed_by",{header:()=>e.jsx("div",{className:"text-left",children:"Confirmation"}),cell:r=>e.jsx("div",{className:"text-left",children:r.getValue()?e.jsx(c,{variant:"primary",children:"Confirmed"}):e.jsx(c,{variant:"secondary",children:"Unconfirmed"})})}),{id:"actions",header:()=>e.jsx("div",{className:"text-center",children:"Actions"}),cell:({row:r})=>{const t=r.original,d=()=>{a.patch(`/preventive/${t.preventive_id}/confirm`,{},{onSuccess:()=>{n.success("Record confirmed",{description:"The preventive maintenance record has been confirmed successfully"})},onError:()=>{n.error("Confirmation failed",{description:"The preventive maintenance record was not confirmed"})}})};return e.jsx(h,{row:t,rowKey:"preventive_id",handleView:i,handleEdit:l,handleDelete:o,handleConfirm:d})}}],y=[{title:"Preventive Maintenance",href:"/preventive"}],w={title:"Preventive Maintenance Records",description:"Manage your records efficiently here."};function Q({preventive:i}){const l=t=>{a.delete(route("preventive.destroy",{id:t}),{preserveScroll:!0,onSuccess:()=>{n.success("Record deleted successfully")},onError:()=>{n.error("Failed to delete record")}})},o=t=>{a.get(route("preventive.show",{id:t}))},r=t=>{a.get(route("preventive.edit",{id:t}))};return e.jsxs(g,{breadcrumbs:y,pageDetails:w,children:[e.jsx(m,{title:"Prevenitive Maintenance"}),console.log(i),e.jsxs("div",{className:"mx-4",children:[e.jsx("h2",{className:"mb-2 text-lg font-semibold",children:"Important Information"}),e.jsxs("div",{className:"mb-2 flex items-start gap-2 rounded-md bg-blue-50 p-4 text-blue-800",children:[e.jsx(j,{className:"mt-0.5 h-5 w-5 text-blue-400"}),e.jsx("span",{children:"Mechanics can only edit repair records they created themselves. Confirmed repair records can no longer be edited or deleted."})]}),e.jsxs("div",{className:"flex items-start gap-2 rounded-md bg-green-50 p-4 text-green-800",children:[e.jsx(b,{className:"mt-0.5 h-5 w-5 text-green-400"}),e.jsx("span",{children:"Only the Managers and Admin can confirm/verify repair records."})]})]}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx(p,{columns:N,data:i,handleView:o,handleEdit:r,handleDelete:l,filterColumn:"vehicle_name",placeholder:"Search vehicle name"}),e.jsx("div",{className:"border-sidebar-border/70 dark:border-sidebar-border relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border md:min-h-min",children:e.jsx(u,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})})]})]})}export{Q as default};
