import{R as i,v as f,j as e}from"./app-CLKafMi8.js";import{O as D}from"./odometer-log-form-DlFxGX-s.js";import{B as l}from"./button-BjJxCl2U.js";import{e as O,f as R,g as S,h as w,i as C,j as b,w as N}from"./app-layout-DVg1ib_u.js";function B({vehicle_id:s=null,vehicles:d,formType:g,latestReading:c}){const[m,o]=i.useState(!1),{data:a,setData:r,post:p,processing:t,errors:x,reset:j}=f({vehicle_id:s??"",reading:"",logged_at:""}),u=s!==null;i.useEffect(()=>{s&&r("vehicle_id",s)},[s]);const n=()=>{p(route("odometer.store"),{data:a,onSuccess:()=>{j(),o(!1)},onError:h=>console.log(h)})};return e.jsxs(O,{open:m,onOpenChange:o,children:[e.jsx(R,{asChild:!0,children:e.jsx(l,{variant:"outline",size:"sm",children:"New Reading"})}),e.jsxs(S,{className:"sm:max-w-[425px]",children:[e.jsxs(w,{children:[e.jsx(C,{children:"New reading"}),e.jsx(b,{children:"Log a new odometer reading."})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsx(D,{formData:a,setData:r,onSubmit:n,processing:t,errors:x,vehicles:d,disableVehicleSelect:u,latestReading:c})}),e.jsx(N,{children:e.jsx(l,{type:"button",onClick:n,disabled:t,children:g==="edit"?"Save Changes":"Add Reading"})})]})]})}export{B as O};
