import{q as j,j as e,$ as u,Y as y,m as c,t as i}from"./app-CLKafMi8.js";import{D as N}from"./display-table-BRRue0uF.js";import{M as _,a as b}from"./maintenance-part-column-BtZSXYgL.js";import{B as v}from"./button-BjJxCl2U.js";import{C as l,a as t,b as d,c as o,d as m}from"./card-DGsM5wb-.js";import{L as r}from"./label-CEnKmdYU.js";import{A as M}from"./app-layout-DVg1ib_u.js";import"./index-BCvKXVy8.js";import"./index-DJgH2Ra1.js";import"./createLucideIcon-BqkyE-xM.js";import"./select-Dh-P3SFY.js";import"./index-DDbGhVyI.js";import"./index-CbVnBepr.js";import"./index-DOfCkWky.js";import"./index-d59M3VVJ.js";import"./app-logo-icon-Duf-p-hV.js";import"./table-BlADWfi2.js";import"./destructive-dialog-xP37ESc7.js";import"./input-error-D2Kuilvy.js";import"./input-BZPmkLvt.js";import"./trash-CJg2OzLV.js";import"./index-YJI3hRqt.js";import"./wrench-BvQdNsdS.js";const g=[{title:"Maintenance",href:"/maintenance"},{title:"Details",href:"maintenance/details"}],C={title:"Maintenance Details",description:"Comprehensive information about the conducted maintenance."};function K({maintenance:s,maintenanceParts:h,parts:a}){const n=j().props.auth.user,p=()=>{c.patch(route("maintenance.confirm",{maintenance_id:s.maintenance_id},{onSuccess:()=>{i.success("Maintenance confirmed successfully",{description:"The maintenance has been confirmed successfully"})},onError:()=>{i.error("Maintenance confirmation failed",{description:"The maintenance was not confirmed"})}}))},x=f=>{c.delete(route("maintenance-parts.destroy",{id:f}),{onSuccess:()=>{i.success("Deleted successfully",{description:"The part usage record has been deleted successfully"})},onError:()=>{i.error("Failed to delete",{description:"An error occurred while deleting the part usage record"})}})};return e.jsxs(M,{breadcrumbs:g,pageDetails:C,children:[e.jsx(u,{title:"Maintenance Details"}),e.jsxs("div",{className:"mx-6 mb-3 space-y-6 rounded-lg",children:[e.jsxs(l,{className:"w-full",children:[e.jsxs(t,{children:[e.jsx(d,{children:"Maintenance Information"}),e.jsxs(o,{className:"flex justify-between",children:["General overview of the maintenance.",n.role.name==="Manager"&&!s.confirmed_by&&e.jsx(v,{onClick:p,children:"Confirm Record"})]})]}),e.jsx(m,{children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"vehicle_name",children:"Vehicle Name"}),e.jsx("span",{children:s.vehicle_name??"N/A"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"request_description",children:"Request Description"}),e.jsx("span",{children:s.request_description??"N/A"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"maintenance_plan",children:"Maintenance Plan"}),e.jsx("span",{children:s.maintenance_plan??"N/A"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"date_in",children:"Date In"}),e.jsx("span",{children:s.date_in??"N/A"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"date_completed",children:"Date Completed"}),e.jsx("span",{children:s.date_completed??"N/A"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"performed_by",children:"Performed By"}),e.jsx("span",{children:s.performed_by??"N/A"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"confirmed_by",children:"Confirmed By"}),e.jsx("span",{children:s.confirmed_by??"Not yet confirmed"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"description",children:"Summary"}),e.jsx("span",{children:s.maintenance_summary})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"status",children:"Odometer Reading"}),e.jsx("span",{children:s.odometer_reading})]}),!s.confirmed_by&&n.role.name==="Mechanic"&&e.jsx(y,{href:`${s.maintenance_id}/edit`,className:"col-span-2 w-1/3 rounded-md bg-[#006600] px-3 py-2 text-center text-white hover:bg-[#005500]",children:"Edit"})]})})})]}),e.jsxs(l,{children:[e.jsxs(t,{children:[e.jsx(d,{children:"Parts Used"}),e.jsxs(o,{className:"flex justify-between",children:["Parts used during the maintenance.",n.role.name==="Mechanic"&&!s.confirmed_by&&e.jsx(_,{maintenance_id:s.maintenance_id,parts:a,formType:"create"})]})]}),e.jsx(m,{children:e.jsx(N,{columns:b,data:h,parts:a,handleEdit:void 0,handleView:void 0,handleDelete:x})})]})]})]})}export{K as default};
