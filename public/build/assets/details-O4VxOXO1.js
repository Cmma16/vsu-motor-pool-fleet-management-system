import{q as u,j as e,$ as j,Y as v,m as a,t as i}from"./app-CLKafMi8.js";import{D as y}from"./display-table-BRRue0uF.js";import{M as b,a as _}from"./maintenance-part-column-BtZSXYgL.js";import{B as N}from"./button-BjJxCl2U.js";import{C as c,a as o,b as l,c as d,d as m}from"./card-DGsM5wb-.js";import{L as r}from"./label-CEnKmdYU.js";import{A as g}from"./app-layout-DVg1ib_u.js";import"./index-BCvKXVy8.js";import"./index-DJgH2Ra1.js";import"./createLucideIcon-BqkyE-xM.js";import"./select-Dh-P3SFY.js";import"./index-DDbGhVyI.js";import"./index-CbVnBepr.js";import"./index-DOfCkWky.js";import"./index-d59M3VVJ.js";import"./app-logo-icon-Duf-p-hV.js";import"./table-BlADWfi2.js";import"./destructive-dialog-xP37ESc7.js";import"./input-error-D2Kuilvy.js";import"./input-BZPmkLvt.js";import"./trash-CJg2OzLV.js";import"./index-YJI3hRqt.js";import"./wrench-BvQdNsdS.js";const P=[{title:"Preventive Maintenance",href:"/preventive"},{title:"Details",href:"preventive/details"}],C={title:"Preventive Maintenance Details",description:"Comprehensive information about the conducted preventive maintenance including the parts used."};function K({preventive:s,parts:t,preventiveParts:p}){const n=u().props.auth.user,h=()=>{a.patch(route("preventive.confirm",{maintenance_id:s.preventive_id},{onSuccess:()=>{i.success("Preventive maintenance confirmed successfully",{description:"The preventive maintenance has been confirmed successfully"})},onError:()=>{i.error("Preventive maintenance confirmation failed",{description:"The preventive was not confirmed"})},onFinish:()=>{a.reload()}}))},x=f=>{a.delete(route("maintenance-parts.destroy",{id:f}),{onSuccess:()=>{i.success("Deleted successfully",{description:"The part usage record has been deleted successfully"})},onError:()=>{i.error("Delete failed",{description:"The part usage record was not deleted"})}})};return e.jsxs(g,{breadcrumbs:P,pageDetails:C,children:[e.jsx(j,{title:"Preventive Maintenance Details"}),e.jsxs("div",{className:"mx-6 mb-3 space-y-6 rounded-lg",children:[e.jsxs(c,{className:"w-full",children:[e.jsxs(o,{children:[e.jsx(l,{children:"Preventive Maintenance Information"}),e.jsxs(d,{className:"flex justify-between",children:["General overview of the preventive maintenance.",n.role.name==="Manager"&&!s.confirmed_by&&e.jsx(N,{onClick:h,children:"Confirm Record"})]})]}),e.jsx(m,{children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"vehicle_name",children:"Vehicle Name"}),e.jsx("span",{children:s.vehicle_name??"N/A"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"request_description",children:"Request Description"}),e.jsx("span",{children:s.request_description??"N/A"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"performed_by",children:"Performed By"}),e.jsx("span",{children:s.performed_by??"N/A"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"confirmed_by",children:"Confirmed By"}),e.jsx("span",{children:s.confirmed_by??"N/A"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"description",children:"Summary"}),e.jsx("span",{children:s.preventive_summary})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(r,{htmlFor:"status",children:"Odometer Reading"}),e.jsx("span",{children:s.odometer_reading})]}),n.role.name==="Mechanic"&&!s.confirmed_by&&e.jsx(v,{href:`${s.preventive_id}/edit`,className:"col-span-2 w-1/3 rounded-md bg-[#006600] px-3 py-2 text-center text-white hover:bg-[#005500]",children:"Edit"})]})})})]}),e.jsxs(c,{children:[e.jsxs(o,{children:[e.jsx(l,{children:"Parts Used"}),e.jsxs(d,{className:"flex justify-between",children:["Parts used during the preventive maintenance.",n.role.name==="Mechanic"&&!s.confirmed_by&&e.jsx(b,{maintenance_id:s.preventive_id,parts:t,formType:"create"})]})]}),e.jsx(m,{children:e.jsx(y,{columns:_,data:p,parts:t,handleDelete:x,showActions:!s.confirmed_by})})]})]})]})}export{K as default};
