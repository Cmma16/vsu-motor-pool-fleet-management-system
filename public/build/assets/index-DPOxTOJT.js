import{q as g,v as f,j as e,$ as y,t as _}from"./app-CLKafMi8.js";import{M as i,T as N,a as C}from"./trip-chart-BvVh1VUu.js";import{B as S}from"./button-BjJxCl2U.js";import{C as F,a as T,b as A,d as M}from"./card-DGsM5wb-.js";import{I as n}from"./input-BZPmkLvt.js";import{L as o}from"./label-CEnKmdYU.js";import{S as d,a as p,b as m,c as u,d as h}from"./select-Dh-P3SFY.js";import{A as D,M as w}from"./app-layout-DVg1ib_u.js";import{C as R}from"./car-Dw-8_TpW.js";import{W as V}from"./wrench-BvQdNsdS.js";import{F as q}from"./filter-BBwnkkOO.js";import{C as v}from"./calendar-C6F6gg0q.js";import"./createLucideIcon-BqkyE-xM.js";import"./generateCategoricalChart-D2sX8lJh.js";import"./app-logo-icon-Duf-p-hV.js";import"./index-BCvKXVy8.js";import"./BarChart-CeJCA5A7.js";import"./index-DOfCkWky.js";import"./index-DDbGhVyI.js";import"./index-CbVnBepr.js";import"./index-d59M3VVJ.js";import"./index-YJI3hRqt.js";const I=[{title:"Reports",href:"/reports"}],J={title:"Fleet Analytics",description:"Comprehensive analytics and insights about your fleet operations."},L=[{value:"0",label:"All month"},{value:"1",label:"January"},{value:"2",label:"February"},{value:"3",label:"March"},{value:"4",label:"April"},{value:"5",label:"May"},{value:"6",label:"June"},{value:"7",label:"July"},{value:"8",label:"August"},{value:"9",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],x=new Date().getFullYear(),Y=Array.from({length:6},(c,t)=>({value:(x-t).toString(),label:(x-t).toString()}));function ce({tripData:c,metrics:t}){const{vehicles:$,filters:l}=g().props,{data:s,setData:r,get:j}=f({start_date:(l==null?void 0:l.start_date)||"",end_date:(l==null?void 0:l.end_date)||"",month:(l==null?void 0:l.month)||"",year:(l==null?void 0:l.year)||"",vehicle_ids:(l==null?void 0:l.vehicle_ids)||[]}),b=a=>{a.preventDefault(),j(route("reports.index"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{_.success("Filter successfully applied")}})};return e.jsxs(D,{breadcrumbs:I,pageDetails:J,children:[e.jsx(y,{title:"Reports"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[console.log(c,t),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(i,{title:"Total Trips",value:t.total_trips,description:"Total number of trips completed",icon:w}),e.jsx(i,{title:"Total Vehicles",value:t.total_vehicles,description:"Total number of vehicles in fleet",icon:R}),e.jsx(i,{title:"Service Requests",value:t.total_requests,description:"Total number of service requests",icon:V}),e.jsx(i,{title:"Most Active Vehicle",value:t.most_active_vehicle.name,description:`${t.most_active_vehicle.trips} trips completed`,icon:N})]}),e.jsxs(F,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),e.jsx(A,{children:"Filter Reports"})]})}),e.jsx(M,{children:e.jsxs("form",{onSubmit:b,className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"start_date",children:"Start Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"text-muted-foreground absolute top-2.5 left-3 h-4 w-4"}),e.jsx(n,{id:"start_date",type:"date",value:s.start_date,onChange:a=>r("start_date",a.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"end_date",children:"End Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"text-muted-foreground absolute top-2.5 left-3 h-4 w-4"}),e.jsx(n,{id:"end_date",type:"date",value:s.end_date,onChange:a=>r("end_date",a.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"month",children:"Month"}),e.jsxs(d,{value:s.month,onValueChange:a=>r("month",a),children:[e.jsx(p,{children:e.jsx(m,{placeholder:"Select month"})}),e.jsx(u,{children:L.map(a=>e.jsx(h,{value:a.value,children:a.label},a.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"year",children:"Year"}),e.jsxs(d,{value:s.year,onValueChange:a=>r("year",a),children:[e.jsx(p,{children:e.jsx(m,{placeholder:"Select year"})}),e.jsx(u,{children:Y.map(a=>e.jsx(h,{value:a.value,children:a.label},a.value))})]})]}),e.jsx("div",{className:"col-span-full flex justify-end",children:e.jsx(S,{type:"submit",className:"w-full md:w-auto",children:"Apply Filters"})})]})})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-7",children:e.jsx("div",{className:"col-span-full",children:e.jsx(C,{tripData:c,barKey:"total_trips",xKey:"vehicle_name",chartTitle:"Trips by Vehicle",chartDescription:"Number of completed trips per vehicle"})})})]})]})}export{ce as default};
