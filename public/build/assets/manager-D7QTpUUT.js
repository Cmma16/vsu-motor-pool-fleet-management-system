import{j as e,m as d,$ as R}from"./app-dmRk_xSF.js";import{G as $}from"./general-dashboard-Bo6TRnK6.js";import{B as t}from"./badge-DEZpwE8-.js";import{B as o}from"./button-DfRWLWLh.js";import{C as h,a as f,b as g,c as p,d as j,e as v}from"./card-4lmChtC_.js";import{f as l}from"./format-B8Iw8-x-.js";import{C as A}from"./clock-C8EyNwMW.js";import{C as V}from"./calendar-D08P4PnK.js";import{p as x}from"./parseISO-CE7X0zOl.js";import{M as N,A as k}from"./app-layout-CvTHScm8.js";import{F as P}from"./file-text-BPyCVVLD.js";import{C as y}from"./car-DrIISSj-.js";import{i as B,a as F}from"./isTomorrow-D9BWzwNA.js";import{P as S,T as G}from"./dashboard-chart-card-D9yKJcyP.js";import"./app-logo-icon-DPhwaTiD.js";import"./createLucideIcon-C6Zxls1X.js";import"./index-Cymawgta.js";import"./index-BzxzypMb.js";import"./index-DS_s7J1F.js";import"./index-C9jObI59.js";import"./wrench-D44s-QhF.js";import"./addDays-BVyrWydn.js";import"./index-CJBnmqfT.js";import"./chart-cy_Gs8DH.js";import"./generateCategoricalChart-4O1V2zK5.js";function I(a){switch(a){case"pending":return e.jsx(t,{variant:"outline",className:"bg-gray-100",children:"Pending"});case"assigned":return e.jsx(t,{variant:"default",className:"bg-green-500",children:"Assigned"});case"received":return e.jsx(t,{variant:"default",className:"bg-blue-500",children:"Received"});case"ongoing":return e.jsx(t,{variant:"default",className:"bg-yellow-500",children:"Ongoing"});case"completed":return e.jsx(t,{variant:"secondary",className:"bg-gray-500",children:"Completed"});case"cancelled":return e.jsx(t,{variant:"destructive",className:"bg-red-500",children:"Cancelled"});default:return e.jsx(t,{variant:"outline",className:"bg-gray-200",children:a})}}function O({requests:a,sectionTitle:n,sectionDescription:i,handleViewDetails:c}){const s=r=>l(new Date(r),"MMMM dd, yyyy");return e.jsxs(h,{className:"flex-1",children:[e.jsxs(f,{className:"pb-2",children:[e.jsx(g,{children:n}),e.jsx(p,{children:i})]}),e.jsx(j,{className:"max-h-96 overflow-y-auto",children:e.jsx("div",{className:"grid gap-4",children:a.length===0?e.jsxs("div",{className:"text-muted-foreground flex flex-col items-center justify-center py-8",children:[e.jsx("span",{className:"mb-2 text-3xl",children:"ðŸ˜¢"}),e.jsxs("span",{className:"text-lg font-medium",children:["No ",n," found"]})]}):a.map(r=>e.jsxs("div",{className:"rounded-lg border p-3",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-1 sm:flex-row sm:items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:r.work_description}),I(r.status)]}),e.jsx("div",{className:"text-muted-foreground text-sm",children:r.vehicle_name})]}),e.jsxs("div",{className:"mt-1 text-sm sm:mt-0 sm:text-right",children:[e.jsx("div",{children:s(r.date_filed)}),e.jsx("div",{className:"text-muted-foreground",children:`${r.status} at ${s(r.updated_at)}`})]})]}),e.jsx("div",{className:"mt-2 flex gap-2",children:e.jsx(o,{variant:"outline",size:"sm",onClick:()=>c(r.request_id),children:"View Details"})})]},`request-${r.request_id}`))})}),e.jsx(v,{className:"flex items-center justify-center",children:a.length>4&&e.jsx(o,{variant:"ghost",className:"w-full cursor-pointer hover:bg-gray-200",onClick:()=>d.get("/services/requests"),children:"View All"})})]})}function U(a){switch(a){case"pending":return e.jsx(t,{variant:"outline",className:"bg-gray-100",children:"Pending"});case"assigned":return e.jsx(t,{variant:"default",className:"bg-green-500",children:"Assigned"});case"rejected":return e.jsx(t,{variant:"default",className:"bg-red-500",children:"Rejected"});case"received":return e.jsx(t,{variant:"secondary",className:"bg-gray-500",children:"Received"});case"dispatched":return e.jsx(t,{variant:"default",className:"bg-blue-500",children:"Dispatched"});default:return e.jsx(t,{variant:"outline",className:"bg-gray-200",children:a})}}function z(a,n){const i=x(`${a}T${n}`);return B(i)?`Today at ${l(i,"h:mm a")}`:F(i)?`Tomorrow at ${l(i,"h:mm a")}`:l(i,"MMM d, yyyy h:mm a")}function E({trips:a,sectionTitle:n,sectionDescription:i,handleViewDetails:c}){return e.jsxs(h,{className:"flex-1",children:[e.jsxs(f,{children:[e.jsx(g,{children:n}),e.jsx(p,{children:i})]}),e.jsx(j,{className:"max-h-96 overflow-y-auto",children:a.length>0?e.jsx("div",{className:"grid gap-4",children:a.map(s=>e.jsxs("div",{className:"flex flex-col justify-between rounded-lg border p-4 md:flex-row",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-2 md:mb-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:s.purpose}),U(s.status)]}),e.jsxs("div",{className:"text-muted-foreground flex items-center text-sm",children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),z(s.start_date,s.departure_time)]}),e.jsxs("div",{className:"text-muted-foreground flex items-center text-sm",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),l(x(s.start_date),"MMM d"),s.start_date!==s.end_date&&` - ${l(x(s.end_date),"MMM d")}`]}),e.jsxs("div",{className:"text-muted-foreground flex items-center text-sm",children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),s.destination]}),e.jsxs("div",{className:"text-muted-foreground flex items-center text-sm",children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Trip #",s.trip_number," â€¢ ",s.requesting_party]})]}),e.jsxs("div",{className:"flex flex-row items-start gap-4 md:flex-col",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium",children:s.driver_name}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:[s.vehicle_name," (vehicle type here)"]})]})}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),s.plate_number]}),e.jsx("div",{children:e.jsx(o,{variant:"outline",onClick:()=>c(s.trip_id),children:"View Details"})})]})]},s.trip_number))}):e.jsx("div",{className:"text-muted-foreground py-6 text-center",children:"No upcoming trips data found"})}),e.jsx(v,{className:"flex items-center justify-center",children:a.length>4&&e.jsx(o,{variant:"ghost",className:"w-full cursor-pointer hover:bg-gray-200",onClick:()=>d.get("/vehicles/trips"),children:"View All"})})]})}const H=[{title:"Dashboard",href:"/dashboard"}],L={title:"Dashboard",description:"Fleet performance, tracking, and operational insights at a glance"};function je({vehicleStats:a,maintenanceStats:n,tripStats:i,serviceStats:c,personnelStats:s,pendingRequests:r,pendingTrips:u}){const b={title:"Total Vehicles",value:a.total,description:"as of this month",icon:y},w={title:"Today's Trips",value:i.today,description:"trips in progress",icon:N},D={title:"Maintenance Due",value:n.dueToday+n.dueSoon,description:"upcoming maintenance",icon:G},T={title:"Pending Service Requests",value:c.pending,description:"requests pending approval",icon:S},C=[{label:"Available",quantity:a.available||0,fill:"green"},{label:"In Use",quantity:a.inUse||0,fill:"yellow"},{label:"Maintenance or Repair",quantity:a.underMaintenance||0,fill:"blue"},{label:"Retired",quantity:a.retired||0,fill:"red"}],M=[{label:"Drivers",quantity:s.driver||0,fill:"green"},{label:"Mechanics",quantity:s.mechanic||0,fill:"yellow"},{label:"Manager",quantity:s.manager||0,fill:"orange"}],_=m=>{d.get(route("requests.show",m))},q=m=>{d.get(route("trips.show",m))};return e.jsxs(k,{breadcrumbs:H,pageDetails:L,children:[e.jsx(R,{title:"Dashboard"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl px-6",children:[e.jsx("div",{className:"flex items-center justify-between space-y-2",children:e.jsx("h2",{className:"text-2xl",children:"About Fleet"})}),e.jsxs("div",{className:"flex flex-col gap-4 py-4 md:gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[e.jsx(O,{requests:r,sectionTitle:" Service Requests",sectionDescription:"Service requests that needs your attention",handleViewDetails:_}),e.jsx(E,{trips:u,sectionTitle:"Pending Trip Requests",sectionDescription:"Trips that are pending and have not been assigned.",handleViewDetails:q})]}),e.jsx($,{totalVehicles:b,todayTrips:w,maintenanceDue:D,pendingRequests:T,vehicleSummary:C,personnelSummary:M})]})]})]})}export{je as default};
