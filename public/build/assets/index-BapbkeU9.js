import{j as e,m as a,t as i,$ as m}from"./app-CLKafMi8.js";import{D as p}from"./data-table-C7dLI7r4.js";import{C as h}from"./colorful-row-actions-kXkMNw6s.js";import{B as d}from"./badge-C6hRO3uT.js";import{B as x}from"./button-BjJxCl2U.js";import{c as f,A as u}from"./index-DJgH2Ra1.js";import{P as g}from"./placeholder-pattern-B2KenmxV.js";import{A as j}from"./app-layout-DVg1ib_u.js";import{W as v}from"./wrench-BvQdNsdS.js";import{I as b}from"./printer-BelALEIQ.js";import"./index-BCvKXVy8.js";import"./table-BlADWfi2.js";import"./app-logo-icon-Duf-p-hV.js";import"./data-table-toolbar-B2mgQWHI.js";import"./input-BZPmkLvt.js";import"./select-Dh-P3SFY.js";import"./index-DDbGhVyI.js";import"./createLucideIcon-BqkyE-xM.js";import"./index-CbVnBepr.js";import"./index-DOfCkWky.js";import"./index-d59M3VVJ.js";import"./plus-DTrtCI9I.js";import"./destructive-dialog-xP37ESc7.js";import"./pencil-DTvOLnSC.js";import"./trash-CJg2OzLV.js";import"./index-YJI3hRqt.js";const t=f(),N=(l,o,c)=>[{id:"select",enableSorting:!1,enableHiding:!1},t.accessor("vehicle_name",{header:({column:r})=>e.jsxs(x,{variant:"ghost",onClick:()=>r.toggleSorting(r.getIsSorted()==="asc"),children:["Vehicle",e.jsx(u,{className:"ml-2 h-4 w-4"})]}),cell:r=>e.jsx("div",{className:"text-left",children:r.getValue()})}),t.accessor("date_in",{header:()=>e.jsx("div",{className:"text-left",children:"Date In"}),cell:r=>e.jsx("div",{className:"text-left",children:r.getValue()})}),t.accessor("date_completed",{header:()=>e.jsx("div",{className:"text-left",children:"Date Completed"}),cell:r=>e.jsx("div",{className:"text-left",children:r.getValue()})}),t.accessor("performed_by",{header:()=>e.jsx("div",{className:"text-left",children:"Performed by"}),cell:r=>e.jsx("div",{className:"text-left",children:r.getValue()})}),t.accessor("odometer_reading",{header:()=>e.jsx("div",{className:"text-left",children:"Odometer Reading"}),cell:r=>e.jsx("div",{className:"text-left",children:r.getValue()})}),t.accessor("confirmed_by",{header:()=>e.jsx("div",{className:"text-left",children:"Confirmation"}),cell:r=>e.jsx("div",{className:"text-left",children:r.getValue()?e.jsx(d,{variant:"primary",children:"Confirmed"}):e.jsx(d,{variant:"secondary",children:"Unconfirmed"})})}),{id:"actions",header:()=>e.jsx("div",{className:"text-center",children:"Actions"}),cell:({row:r})=>{console.log(r.original);const s=r.original,n=()=>{a.patch(`/repairs/${s.repair_id}/confirm`,{},{onSuccess:()=>{i.success("Record confirmed",{description:"The repair record has been confirmed successfully"})},onError:()=>{i.error("Confirmation failed",{description:"The repair record was not confirmed"})}})};return e.jsx(h,{row:s,rowKey:"repair_id",handleView:l,handleEdit:o,handleDelete:c,handleConfirm:n})}}],y=[{title:"Repairs",href:"/repairs"}],R={title:"Repairs Records",description:"Manage your repairs efficiently here."};function Q({repairs:l}){const o=s=>{a.delete(route("repairs.destroy",{id:s}),{preserveScroll:!0,onSuccess:()=>{i.success("Repair deleted successfully")},onError:()=>{i.error("Failed to delete repair")}})},c=s=>{a.get(route("repairs.show",{id:s}))},r=s=>{a.get(route("repairs.edit",{id:s}))};return e.jsxs(j,{breadcrumbs:y,pageDetails:R,children:[e.jsx(m,{title:"Repairs"}),e.jsxs("div",{className:"mx-4",children:[e.jsx("h2",{className:"mb-2 text-lg font-semibold",children:"Important Information"}),e.jsxs("div",{className:"mb-2 flex items-start gap-2 rounded-md bg-blue-50 p-4 text-blue-800",children:[e.jsx(v,{className:"mt-0.5 h-5 w-5 text-blue-400"}),e.jsx("span",{children:"Mechanics can only edit repair records they created themselves. Confirmed repair records can no longer be edited or deleted."})]}),e.jsxs("div",{className:"flex items-start gap-2 rounded-md bg-green-50 p-4 text-green-800",children:[e.jsx(b,{className:"mt-0.5 h-5 w-5 text-green-400"}),e.jsx("span",{children:"Only the Managers and Admin can confirm/verify repair records."})]})]}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx(p,{columns:N,data:l,handleView:c,handleEdit:r,handleDelete:o,filterColumn:"vehicle_name",placeholder:"Search vehicle name"}),e.jsx("div",{className:"border-sidebar-border/70 dark:border-sidebar-border relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border md:min-h-min",children:e.jsx(g,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})})]})]})}export{Q as default};
