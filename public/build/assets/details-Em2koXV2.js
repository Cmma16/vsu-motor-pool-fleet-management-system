import{R as g,j as e,v as S,t as V,q as L,$ as q,m as j}from"./app-CLKafMi8.js";import{P as I}from"./placeholder-pattern-B2KenmxV.js";import{B as n}from"./button-BjJxCl2U.js";import{e as N,f as v,U as b,g as y,h as C,i as w,j as _,w as P,V as p,A as T,Y as U}from"./app-layout-DVg1ib_u.js";import{C as m,a as h,b as u,d as o}from"./card-DGsM5wb-.js";import{B as c}from"./badge-C6hRO3uT.js";import{I as z}from"./input-BZPmkLvt.js";import{L as M}from"./label-CEnKmdYU.js";import{L as D}from"./loader-circle-D3ymHeNZ.js";import{C as Q}from"./car-Dw-8_TpW.js";import{c as k}from"./createLucideIcon-BqkyE-xM.js";import{C as f}from"./calendar-C6F6gg0q.js";import{C as $}from"./clock-DvWFFJZU.js";import"./app-logo-icon-Duf-p-hV.js";import"./index-DDbGhVyI.js";import"./index-CbVnBepr.js";import"./index-DOfCkWky.js";import"./index-YJI3hRqt.js";import"./wrench-BvQdNsdS.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],B=k("Image",A);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],E=k("PenTool",O);function F({vehicle_name:s,qr_code_path:t,asset_tag:r}){const[i,l]=g.useState(!1);return e.jsxs(N,{open:i,onOpenChange:l,children:[e.jsx(v,{asChild:!0,children:e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),"View QR Code"]})}),e.jsxs(y,{className:"sm:max-w-[425px]",children:[e.jsxs(C,{children:[e.jsx(w,{children:s}),e.jsx(_,{children:"Viewing the QR Code for the vehicle."})]}),e.jsx("div",{className:"flex justify-center gap-4 py-4",children:e.jsx("img",{src:`/${t}`,alt:"QR Code"})}),e.jsx(P,{className:"flex justify-center",children:e.jsx("a",{href:`/storage/qr-codes/${r}.png`,download:`${r}_qr.png`,className:"rounded bg-blue-600 px-4 py-2 text-white",children:"Download QR Code"})})]})]})}function H({vehicle:s}){return e.jsx("div",{className:"space-y-6 md:col-span-1",children:e.jsxs(m,{children:[e.jsx(h,{className:"pb-3",children:e.jsx(u,{className:"text-base",children:"Basic Information"})}),e.jsx(o,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Asset Tag"}),e.jsx("p",{className:"font-medium",children:s.asset_tag})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Plate Number"}),e.jsx("p",{className:"font-medium",children:s.plate_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Brand"}),e.jsx("p",{className:"font-medium",children:s.brand})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Model"}),e.jsx("p",{className:"font-medium",children:s.model})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Location"}),e.jsx("p",{className:"font-medium",children:s.location})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Capacity"}),e.jsx("p",{className:"font-medium",children:s.capacity})]})]})})]})})}function Y({vehicle:s,odometer_reading:t}){const r=i=>{switch(i){case"available":return e.jsx(c,{className:"bg-green-500 text-sm",children:"Available"});case"in use":return e.jsx(c,{className:"bg-blue-500",children:"In Use"});case"under maintenance":return e.jsx(c,{className:"bg-yellow-500 text-black",children:"Under Maintenance"});case"retired":return e.jsx(c,{className:"bg-gray-500",children:"Retired"});default:return e.jsx(c,{children:"Unknown"})}};return e.jsx("div",{className:"space-y-6 md:col-span-1",children:e.jsxs(m,{className:"h-full",children:[console.log(s,t),e.jsx(h,{className:"pb-3",children:e.jsx(u,{className:"text-base",children:"Operational Details"})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:t?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-muted-foreground mb-1 text-sm",children:"Current Reading"}),e.jsxs("p",{className:"mb-2 text-lg font-medium",children:[t.reading," km"]})]}):e.jsx("div",{className:"text-muted-foreground my-4.5",children:"No odometer log available for this vehicle yet."})}),e.jsx("div",{className:"space-y-1",children:t?e.jsxs("p",{className:"text-muted-foreground text-xs",children:["Updated ",p(new Date(t.updated_at),{addSuffix:!0})]}):""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-2 text-sm",children:"Current Status"}),e.jsx("p",{className:"font-medium",children:r(s.status)})]}),e.jsx("div",{className:"space-y-1",children:e.jsxs("p",{className:"text-muted-foreground text-xs",children:["Updated ",p(new Date(s.updated_at),{addSuffix:!0})]})})]})]})})]})})}function G({vehicle:s}){return e.jsx("div",{className:"space-y-6 md:col-span-1",children:e.jsxs(m,{children:[e.jsx(h,{className:"pb-3",children:e.jsx(u,{className:"text-base",children:"Technical Details"})}),e.jsx(o,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Engine Number"}),e.jsx("p",{className:"font-medium",children:s.engine_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Chassis Number"}),e.jsx("p",{className:"font-medium",children:s.chassis_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Category"}),e.jsx("p",{className:"font-medium",children:s.category})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Year Acquired"}),e.jsx("p",{className:"font-medium",children:s.year_acquired})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Fuel Type"}),e.jsx("p",{className:"font-medium",children:s.fuel_type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Vehicle Type"}),e.jsx("p",{className:"font-medium",children:s.vehicle_type})]})]})})]})})}function J({vehicleId:s,currentPhoto:t}){const{setData:r,post:i,processing:l,errors:a}=S({image:null}),x=d=>{d.preventDefault(),i(`/vehicles/${s}/update-photo`,{preserveScroll:!0,onSuccess:()=>{V.success("Vehicle photo updated successfully!")}})};return e.jsxs(N,{children:[e.jsx(v,{asChild:!0,children:e.jsx(n,{size:"sm",children:"Update Vehicle Photo"})}),e.jsxs(y,{className:"sm:max-w-[425px]",children:[e.jsxs(C,{children:[e.jsx(w,{children:"Update Vehicle Photo"}),e.jsx(_,{children:"This will replace the current vehicle photo. Click save when you're done."})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{children:[e.jsx(M,{children:"Current Photo"}),e.jsx("img",{src:`/storage/${t}`,alt:"Vehicle",className:"mb-2 object-cover"})]}),e.jsxs("div",{children:[e.jsx(z,{type:"file",onChange:d=>r("image",d.target.files[0])}),a.photo&&e.jsx("div",{className:"text-sm text-red-500",children:a.photo})]}),e.jsx("div",{className:"py-2",children:e.jsxs(n,{type:"submit",disabled:l,children:[l&&e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),l?"Uploading...":"Update Photo"]})})]})})]})]})}const K=[{title:"Vehicles",href:"/vehicles"},{title:"Details",href:"vehicles/details"}],W={title:"Vehicle Details",description:"Comprehensive information about the vehicle, including specifications and status."};function fe({vehicle:s,odometer_reading:t,nextMaintenance:r,latestMaintenance:i,latestRepair:l}){const a=L().props.auth.user,[x,d]=g.useState(!1),R=()=>{d(!0),j.get(route("vehicles.generate",s.vehicle_id),{onSuccess:()=>{console.log("QR Code generated successfully"),d(!1)},onError:()=>{console.log("Failed to generate QR Code"),d(!1)}})};return e.jsxs(T,{breadcrumbs:K,pageDetails:W,children:[e.jsx(q,{title:"Vehicle Details"}),e.jsxs("div",{className:"container mx-auto px-4 py-6 md:px-6",children:[e.jsxs("div",{className:"mb-6 flex flex-col items-start justify-between md:flex-row md:items-center",children:[e.jsx("div",{children:e.jsxs("h1",{className:"mt-2 flex items-center gap-2 text-2xl font-bold md:text-3xl",children:[e.jsx(Q,{className:"h-6 w-6"}),s.vehicle_name,s.qr_code_path&&(a.role.name==="Admin"||a.role.name==="Manager")&&e.jsx(F,{vehicle_name:s.vehicle_name,qr_code_path:s.qr_code_path,asset_tag:s.asset_tag})]})}),e.jsxs("div",{className:"mt-4 flex gap-2 md:mt-0",children:[!s.qr_code_path&&(a.role.name==="Admin"||a.role.name==="Manager")&&e.jsxs(n,{disabled:x,variant:"outline",size:"sm",onClick:R,children:[x&&e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx(b,{className:"mr-2 h-4 w-4"}),"Generate QR Code"]}),a.role.name==="Driver"&&e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>j.get(route("service-requests.create")),children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Request Service"]}),(a.role.name==="Admin"||a.role.name==="Manager")&&e.jsxs(n,{onClick:()=>j.get(`${s.vehicle_id}/edit`),size:"sm",children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Edit vehicle"]}),(a.role.name==="Admin"||a.role.name==="Manager")&&e.jsx(J,{vehicleId:s.vehicle_id,currentPhoto:s.image_path})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[e.jsx(m,{children:e.jsx(o,{className:"h-full",children:e.jsx("div",{className:"bg-muted relative aspect-video h-full w-full overflow-hidden rounded-lg",children:e.jsx("div",{className:"flex h-full items-center justify-center",children:s.image_path?e.jsx("img",{src:`/storage/${s.image_path}`,alt:"Vehicle Image",className:"h-full w-full object-cover"}):e.jsxs("div",{className:"text-muted-foreground flex flex-col items-center gap-2",children:[e.jsx(B,{className:"h-12 w-12"}),e.jsx("p",{className:"text-sm",children:"Vehicle Image"})]})})})})}),e.jsx(H,{vehicle:s}),e.jsx(G,{vehicle:s}),e.jsx(Y,{vehicle:s,odometer_reading:t}),e.jsx("div",{className:"space-y-6 md:col-span-2",children:e.jsxs(m,{children:[e.jsx(h,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(u,{children:"Maintenance Status"})})}),e.jsxs(o,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-start gap-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Next Scheduled Maintenance"}),r?e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx(f,{className:"text-muted-foreground h-4 w-4"}),e.jsxs("p",{className:"text-sm",children:[r.scheduled_date," (Due Soon)"]})]}):e.jsx("p",{className:"text-muted-foreground text-sm",children:"No upcoming maintenance"})]})}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx($,{className:"text-muted-foreground mt-0.5 h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Recent Maintenance"}),i?e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx(f,{className:"text-muted-foreground h-4 w-4"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:i.date_received})]}):e.jsx("p",{className:"text-muted-foreground text-sm",children:"No maintenance records found"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"mb-3 font-medium",children:"Recent Repairs"}),e.jsx("div",{className:"space-y-4",children:l?e.jsxs("div",{className:"flex justify-between border-b pb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Maintenance"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"2024-12-28"}),e.jsx("p",{className:"mt-1 text-sm",children:"Oil change, filter replacement, brake inspection"})]}),e.jsx("div",{className:"text-right",children:e.jsx(n,{variant:"ghost",size:"sm",className:"mt-1 h-7",children:"Details"})})]},1):e.jsx("p",{className:"text-muted-foreground text-sm",children:"No repair records found"})})]})]})]})})]})]}),e.jsx("div",{className:"border-sidebar-border/70 dark:border-sidebar-border relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border md:min-h-min",children:e.jsx(I,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})})]})}export{fe as default};
