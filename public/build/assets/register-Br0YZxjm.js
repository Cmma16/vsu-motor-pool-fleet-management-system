import{a as B,R as u,j as e,v as T,$ as M,t as V}from"./app-dmRk_xSF.js";import{I as o}from"./input-error-BIGrXHCO.js";import{B as v}from"./button-DfRWLWLh.js";import{I as g}from"./input-uEZiaGVz.js";import{L as m}from"./label-tcdczQa9.js";import{S as C,a as w,b as S,c as I,d as F}from"./select-DTbPtvM0.js";import{T as E}from"./text-link-CmzBtF6f.js";import{A as $}from"./auth-layout-C3TFpwFN.js";import{L as O}from"./loader-circle-4vJEE_8H.js";import"./app-logo-icon-DPhwaTiD.js";import"./index-DS_s7J1F.js";import"./index-Cymawgta.js";import"./createLucideIcon-C6Zxls1X.js";import"./index-BzxzypMb.js";import"./index-Dnf0Jnlg.js";const Y=()=>B.get("https://psgc.gitlab.io/api/provinces/"),z=n=>B.get(`https://psgc.gitlab.io/api/provinces/${n}/cities-municipalities/`),G=n=>B.get(`https://psgc.gitlab.io/api/cities-municipalities/${n}/barangays/`);function H({data:n,setData:d,errors:i,nextStage:x,previousStage:N,processing:t}){var P;const[l,_]=u.useState([]),[h,y]=u.useState([]),[s,p]=u.useState([]),[j,L]=u.useState(""),[f,q]=u.useState("");u.useEffect(()=>{Y().then(a=>{_(a.data);const c=a.data.find(r=>r.name===n.province);c&&L(c.code)})},[]),u.useEffect(()=>{j?z(j).then(a=>{y(a.data);const c=a.data.find(r=>r.name===n.city);c&&q(c.code)}):y([])},[j]),u.useEffect(()=>{f?G(f).then(a=>{p(a.data)}):p([])},[f]);const R=a=>{var r;L(a);const c=((r=l.find(b=>b.code===a))==null?void 0:r.name)||"";d("province",c),d("city",""),d("barangay","")},k=a=>{var r;q(a);const c=((r=h.find(b=>b.code===a))==null?void 0:r.name)||"";d("city",c),d("barangay","")},A=a=>{var r;const c=((r=s.find(b=>b.code===a))==null?void 0:r.name)||"";d("barangay",c)};return e.jsxs("form",{className:"flex flex-col gap-6",onSubmit:x,children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"province",children:"Province"}),e.jsxs(C,{value:j,required:!0,onValueChange:R,disabled:t,children:[e.jsx(w,{id:"province",tabIndex:6,children:e.jsx(S,{placeholder:"Select Province"})}),e.jsx(I,{children:l.map(a=>e.jsx(F,{value:a.code,children:a.name},a.code))})]}),e.jsx(o,{message:i.province})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"city",children:"City/Municipality/Town"}),e.jsxs(C,{value:f,required:!0,onValueChange:k,disabled:!j||t,children:[e.jsx(w,{id:"city",tabIndex:7,children:e.jsx(S,{placeholder:"Select City/Municipality/Town"})}),e.jsx(I,{children:h.map(a=>e.jsx(F,{value:a.code,children:a.name},a.code))})]}),e.jsx(o,{message:i.city})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"barangay",children:"Barangay"}),e.jsxs(C,{value:((P=s.find(a=>a.name===n.barangay))==null?void 0:P.code)||"",required:!0,onValueChange:A,disabled:!f||t,children:[e.jsx(w,{id:"barangay",tabIndex:8,children:e.jsx(S,{placeholder:"Select Barangay"})}),e.jsx(I,{children:s.map(a=>e.jsx(F,{value:a.code,children:a.name},a.code))})]}),e.jsx(o,{message:i.barangay})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"address_details",children:"Other Details (Optional)"}),e.jsx(g,{id:"address_details",type:"text",tabIndex:9,value:n.address_details,onChange:a=>d("address_details",a.target.value),disabled:t,placeholder:"Building, Street, etc."}),e.jsx(o,{message:i.address_details})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(v,{type:"button",onClick:N,className:"mt-2",tabIndex:10,disabled:t,children:"Back"}),e.jsx(v,{type:"submit",className:"mt-2",tabIndex:11,disabled:t,children:"Next"})]})]})}function de(){const[n,d]=u.useState(1),{data:i,setData:x,post:N,processing:t,errors:l,reset:_}=T({first_name:"",middle_name:"",last_name:"",contact_number:"",province:"",city:"",barangay:"",address_details:"",email:"",password:"",password_confirmation:""}),h=s=>{s.preventDefault(),d(p=>p+1)},y=s=>{s.preventDefault(),N(route("register"),{onSuccess:()=>{console.log("Registration successful"),V.success("Registration Successful",{description:"You can only log in once you verify your email and the admin verifies your registration."})},onError:p=>{console.error("Registration failed:",p)},onFinish:()=>_("password","password_confirmation")})};return e.jsxs($,{title:"Create an account",description:"Enter your details below to create your account",children:[e.jsx(M,{title:"Register"}),n===1?e.jsxs("form",{className:"flex flex-col gap-6",onSubmit:h,children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"first_name",children:"First Name"}),e.jsx(g,{id:"first_name",type:"text",required:!0,autoFocus:!0,tabIndex:1,value:i.first_name,onChange:s=>x("first_name",s.target.value),disabled:t,placeholder:"First Name"}),e.jsx(o,{message:l.first_name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"middle_name",children:"Middle Name"}),e.jsx(g,{id:"middle_name",type:"text",tabIndex:2,value:i.middle_name,onChange:s=>x("middle_name",s.target.value),disabled:t,placeholder:"Middle Name (Optional)"}),e.jsx(o,{message:l.middle_name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"last_name",children:"Last Name"}),e.jsx(g,{id:"last_name",type:"text",required:!0,tabIndex:3,value:i.last_name,onChange:s=>x("last_name",s.target.value),disabled:t,placeholder:"Last Name"}),e.jsx(o,{message:l.last_name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"contact_number",children:"Contact Number"}),e.jsx(g,{id:"contact_number",type:"text",required:!0,tabIndex:4,value:i.contact_number,onChange:s=>x("contact_number",s.target.value),disabled:t,placeholder:"Contact Number"}),e.jsx(o,{message:l.contact_number})]})]}),e.jsx(v,{type:"submit",className:"mt-2 w-full",tabIndex:5,disabled:t,children:"Next"}),e.jsxs("div",{className:"text-muted-foreground text-center text-sm",children:["Already have an account?"," ",e.jsx(E,{href:route("login"),tabIndex:6,children:"Log in"})]})]}):n===2?e.jsx(H,{data:i,setData:x,errors:l,nextStage:h,previousStage:()=>d(1),processing:t}):e.jsxs("form",{className:"flex flex-col gap-6",onSubmit:y,children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"email",children:"Email address"}),e.jsx(g,{id:"email",type:"email",required:!0,tabIndex:12,value:i.email,onChange:s=>x("email",s.target.value),disabled:t,placeholder:"email@example.com"}),e.jsx(o,{message:l.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsx(g,{id:"password",type:"password",required:!0,tabIndex:13,value:i.password,onChange:s=>x("password",s.target.value),disabled:t,placeholder:"Password"}),e.jsx(o,{message:l.password})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"password_confirmation",children:"Confirm password"}),e.jsx(g,{id:"password_confirmation",type:"password",required:!0,tabIndex:14,value:i.password_confirmation,onChange:s=>x("password_confirmation",s.target.value),disabled:t,placeholder:"Confirm password"}),e.jsx(o,{message:l.password_confirmation})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(v,{type:"button",onClick:()=>d(2),className:"mt-2",tabIndex:15,disabled:t,children:"Back"}),e.jsxs(v,{type:"submit",className:"mt-2",tabIndex:16,disabled:t,children:[t&&e.jsx(O,{className:"h-4 w-4 animate-spin"})," Create account"]})]}),e.jsxs("div",{className:"text-muted-foreground text-center text-sm",children:["Already have an account?"," ",e.jsx(E,{href:route("login"),tabIndex:17,children:"Log in"})]})]})]})}export{de as default};
