import{r as v,j as C,b as qc,c as Jc,q as Si,Y as sr,d as $c,v as el,R as Nr,a as ys,e as Ir,g as tl,m as er}from"./app-dmRk_xSF.js";import{c as io,u as et,S as Or,a as nl,B as Pn,b as so}from"./button-DfRWLWLh.js";import{c as ue,A as rl}from"./app-logo-icon-DPhwaTiD.js";import{c as oe,u as tr,a as Fn,b as fn,d as il,C as sl}from"./index-Cymawgta.js";import{u as ol,a as ln,b as Qt,h as Ti,R as Ni,c as vi,d as jn,e as Mi,A as Lr,P as _i,f as Di,D as Ri,C as Oi,g as al,i as oo,j as ao,F as co}from"./index-BzxzypMb.js";import{P as Rt}from"./index-C9jObI59.js";import{c as Ke}from"./createLucideIcon-C6Zxls1X.js";import{P as ct,d as cl}from"./index-DS_s7J1F.js";import{W as ll}from"./wrench-D44s-QhF.js";function ul(o,l){for(var a=0;a<l.length;a++){const d=l[a];if(typeof d!="string"&&!Array.isArray(d)){for(const h in d)if(h!=="default"&&!(h in o)){const g=Object.getOwnPropertyDescriptor(d,h);g&&Object.defineProperty(o,h,g.get?g:{enumerable:!0,get:()=>d[h]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Is=Ke("Bell",dl);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["rect",{x:"15",y:"5",width:"4",height:"12",rx:"1",key:"q8uenq"}],["rect",{x:"7",y:"8",width:"4",height:"9",rx:"1",key:"sr5ea"}]],hl=Ke("ChartColumnBig",fl);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],lo=Ke("ChevronRight",gl);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],pl=Ke("ChevronsUpDown",xl);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],wl=Ke("CircleCheckBig",ml);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Al=Ke("Eye",Cl);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=[["path",{d:"M11 12h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 14",key:"1j4xps"}],["path",{d:"m7 18 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"uospg8"}],["path",{d:"m2 13 6 6",key:"16e5sb"}]],Ss=Ke("HandHelping",El);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],yl=Ke("LayoutGrid",bl);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Sl=Ke("LogOut",Il);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Nl=Ke("MapPin",Tl);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],Ml=Ke("NotebookPen",vl);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],Dl=Ke("PanelLeft",_l);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],Ol=Ke("Puzzle",Rl);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Pl=Ke("QrCode",Ll);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],kl=Ke("RefreshCw",Bl);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jl=Ke("Settings",Fl);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],Hl=Ke("Stethoscope",Ul);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Vl=Ke("Truck",zl);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Wl=Ke("Users",Gl);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],uo=Ke("X",Yl),fi=768;function fo(){const[o,l]=v.useState(void 0);return v.useEffect(()=>{const a=window.matchMedia(`(max-width: ${fi-1}px)`),d=()=>{l(window.innerWidth<fi)};return a.addEventListener("change",d),l(window.innerWidth<fi),()=>a.removeEventListener("change",d)},[]),!!o}var Xl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qt=Xl.reduce((o,l)=>{const a=io(`Primitive.${l}`),d=v.forwardRef((h,g)=>{const{asChild:A,...b}=h,T=A?a:l;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),C.jsx(T,{...b,ref:g})});return d.displayName=`Primitive.${l}`,{...o,[l]:d}},{});function Zl(o,l){o&&qc.flushSync(()=>o.dispatchEvent(l))}var Kl="DismissableLayer",Ci="dismissableLayer.update",Ql="dismissableLayer.pointerDownOutside",ql="dismissableLayer.focusOutside",Ts,ho=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),go=v.forwardRef((o,l)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:g,onInteractOutside:A,onDismiss:b,...T}=o,p=v.useContext(ho),[S,N]=v.useState(null),O=(S==null?void 0:S.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,k]=v.useState({}),Y=et(l,j=>N(j)),F=Array.from(p.layers),[X]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),Q=F.indexOf(X),Z=S?F.indexOf(S):-1,W=p.layersWithOutsidePointerEventsDisabled.size>0,$=Z>=Q,Oe=e1(j=>{const ae=j.target,z=[...p.branches].some(tt=>tt.contains(ae));!$||z||(h==null||h(j),A==null||A(j),j.defaultPrevented||b==null||b())},O),ge=t1(j=>{const ae=j.target;[...p.branches].some(tt=>tt.contains(ae))||(g==null||g(j),A==null||A(j),j.defaultPrevented||b==null||b())},O);return ol(j=>{Z===p.layers.size-1&&(d==null||d(j),!j.defaultPrevented&&b&&(j.preventDefault(),b()))},O),v.useEffect(()=>{if(S)return a&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(Ts=O.body.style.pointerEvents,O.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(S)),p.layers.add(S),Ns(),()=>{a&&p.layersWithOutsidePointerEventsDisabled.size===1&&(O.body.style.pointerEvents=Ts)}},[S,O,a,p]),v.useEffect(()=>()=>{S&&(p.layers.delete(S),p.layersWithOutsidePointerEventsDisabled.delete(S),Ns())},[S,p]),v.useEffect(()=>{const j=()=>k({});return document.addEventListener(Ci,j),()=>document.removeEventListener(Ci,j)},[]),C.jsx(qt.div,{...T,ref:Y,style:{pointerEvents:W?$?"auto":"none":void 0,...o.style},onFocusCapture:oe(o.onFocusCapture,ge.onFocusCapture),onBlurCapture:oe(o.onBlurCapture,ge.onBlurCapture),onPointerDownCapture:oe(o.onPointerDownCapture,Oe.onPointerDownCapture)})});go.displayName=Kl;var Jl="DismissableLayerBranch",$l=v.forwardRef((o,l)=>{const a=v.useContext(ho),d=v.useRef(null),h=et(l,d);return v.useEffect(()=>{const g=d.current;if(g)return a.branches.add(g),()=>{a.branches.delete(g)}},[a.branches]),C.jsx(qt.div,{...o,ref:h})});$l.displayName=Jl;function e1(o,l=globalThis==null?void 0:globalThis.document){const a=ln(o),d=v.useRef(!1),h=v.useRef(()=>{});return v.useEffect(()=>{const g=b=>{if(b.target&&!d.current){let T=function(){xo(Ql,a,p,{discrete:!0})};const p={originalEvent:b};b.pointerType==="touch"?(l.removeEventListener("click",h.current),h.current=T,l.addEventListener("click",h.current,{once:!0})):T()}else l.removeEventListener("click",h.current);d.current=!1},A=window.setTimeout(()=>{l.addEventListener("pointerdown",g)},0);return()=>{window.clearTimeout(A),l.removeEventListener("pointerdown",g),l.removeEventListener("click",h.current)}},[l,a]),{onPointerDownCapture:()=>d.current=!0}}function t1(o,l=globalThis==null?void 0:globalThis.document){const a=ln(o),d=v.useRef(!1);return v.useEffect(()=>{const h=g=>{g.target&&!d.current&&xo(ql,a,{originalEvent:g},{discrete:!1})};return l.addEventListener("focusin",h),()=>l.removeEventListener("focusin",h)},[l,a]),{onFocusCapture:()=>d.current=!0,onBlurCapture:()=>d.current=!1}}function Ns(){const o=new CustomEvent(Ci);document.dispatchEvent(o)}function xo(o,l,a,{discrete:d}){const h=a.originalEvent.target,g=new CustomEvent(o,{bubbles:!1,cancelable:!0,detail:a});l&&h.addEventListener(o,l,{once:!0}),d?Zl(h,g):h.dispatchEvent(g)}var hi="focusScope.autoFocusOnMount",gi="focusScope.autoFocusOnUnmount",vs={bubbles:!1,cancelable:!0},n1="FocusScope",po=v.forwardRef((o,l)=>{const{loop:a=!1,trapped:d=!1,onMountAutoFocus:h,onUnmountAutoFocus:g,...A}=o,[b,T]=v.useState(null),p=ln(h),S=ln(g),N=v.useRef(null),O=et(l,F=>T(F)),k=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(d){let F=function(W){if(k.paused||!b)return;const $=W.target;b.contains($)?N.current=$:cn(N.current,{select:!0})},X=function(W){if(k.paused||!b)return;const $=W.relatedTarget;$!==null&&(b.contains($)||cn(N.current,{select:!0}))},Q=function(W){if(document.activeElement===document.body)for(const Oe of W)Oe.removedNodes.length>0&&cn(b)};document.addEventListener("focusin",F),document.addEventListener("focusout",X);const Z=new MutationObserver(Q);return b&&Z.observe(b,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",F),document.removeEventListener("focusout",X),Z.disconnect()}}},[d,b,k.paused]),v.useEffect(()=>{if(b){_s.add(k);const F=document.activeElement;if(!b.contains(F)){const Q=new CustomEvent(hi,vs);b.addEventListener(hi,p),b.dispatchEvent(Q),Q.defaultPrevented||(r1(c1(mo(b)),{select:!0}),document.activeElement===F&&cn(b))}return()=>{b.removeEventListener(hi,p),setTimeout(()=>{const Q=new CustomEvent(gi,vs);b.addEventListener(gi,S),b.dispatchEvent(Q),Q.defaultPrevented||cn(F??document.body,{select:!0}),b.removeEventListener(gi,S),_s.remove(k)},0)}}},[b,p,S,k]);const Y=v.useCallback(F=>{if(!a&&!d||k.paused)return;const X=F.key==="Tab"&&!F.altKey&&!F.ctrlKey&&!F.metaKey,Q=document.activeElement;if(X&&Q){const Z=F.currentTarget,[W,$]=i1(Z);W&&$?!F.shiftKey&&Q===$?(F.preventDefault(),a&&cn(W,{select:!0})):F.shiftKey&&Q===W&&(F.preventDefault(),a&&cn($,{select:!0})):Q===Z&&F.preventDefault()}},[a,d,k.paused]);return C.jsx(qt.div,{tabIndex:-1,...A,ref:O,onKeyDown:Y})});po.displayName=n1;function r1(o,{select:l=!1}={}){const a=document.activeElement;for(const d of o)if(cn(d,{select:l}),document.activeElement!==a)return}function i1(o){const l=mo(o),a=Ms(l,o),d=Ms(l.reverse(),o);return[a,d]}function mo(o){const l=[],a=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode:d=>{const h=d.tagName==="INPUT"&&d.type==="hidden";return d.disabled||d.hidden||h?NodeFilter.FILTER_SKIP:d.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)l.push(a.currentNode);return l}function Ms(o,l){for(const a of o)if(!s1(a,{upTo:l}))return a}function s1(o,{upTo:l}){if(getComputedStyle(o).visibility==="hidden")return!0;for(;o;){if(l!==void 0&&o===l)return!1;if(getComputedStyle(o).display==="none")return!0;o=o.parentElement}return!1}function o1(o){return o instanceof HTMLInputElement&&"select"in o}function cn(o,{select:l=!1}={}){if(o&&o.focus){const a=document.activeElement;o.focus({preventScroll:!0}),o!==a&&o1(o)&&l&&o.select()}}var _s=a1();function a1(){let o=[];return{add(l){const a=o[0];l!==a&&(a==null||a.pause()),o=Ds(o,l),o.unshift(l)},remove(l){var a;o=Ds(o,l),(a=o[0])==null||a.resume()}}}function Ds(o,l){const a=[...o],d=a.indexOf(l);return d!==-1&&a.splice(d,1),a}function c1(o){return o.filter(l=>l.tagName!=="A")}var l1="Portal",wo=v.forwardRef((o,l)=>{var b;const{container:a,...d}=o,[h,g]=v.useState(!1);tr(()=>g(!0),[]);const A=a||h&&((b=globalThis==null?void 0:globalThis.document)==null?void 0:b.body);return A?Jc.createPortal(C.jsx(qt.div,{...d,ref:l}),A):null});wo.displayName=l1;var Pr="Dialog",[Co,gg]=fn(Pr),[u1,Ft]=Co(Pr),Ao=o=>{const{__scopeDialog:l,children:a,open:d,defaultOpen:h,onOpenChange:g,modal:A=!0}=o,b=v.useRef(null),T=v.useRef(null),[p,S]=Fn({prop:d,defaultProp:h??!1,onChange:g,caller:Pr});return C.jsx(u1,{scope:l,triggerRef:b,contentRef:T,contentId:Qt(),titleId:Qt(),descriptionId:Qt(),open:p,onOpenChange:S,onOpenToggle:v.useCallback(()=>S(N=>!N),[S]),modal:A,children:a})};Ao.displayName=Pr;var Eo="DialogTrigger",bo=v.forwardRef((o,l)=>{const{__scopeDialog:a,...d}=o,h=Ft(Eo,a),g=et(l,h.triggerRef);return C.jsx(qt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":h.open,"aria-controls":h.contentId,"data-state":Bi(h.open),...d,ref:g,onClick:oe(o.onClick,h.onOpenToggle)})});bo.displayName=Eo;var Li="DialogPortal",[d1,yo]=Co(Li,{forceMount:void 0}),Io=o=>{const{__scopeDialog:l,forceMount:a,children:d,container:h}=o,g=Ft(Li,l);return C.jsx(d1,{scope:l,forceMount:a,children:v.Children.map(d,A=>C.jsx(Rt,{present:a||g.open,children:C.jsx(wo,{asChild:!0,container:h,children:A})}))})};Io.displayName=Li;var vr="DialogOverlay",So=v.forwardRef((o,l)=>{const a=yo(vr,o.__scopeDialog),{forceMount:d=a.forceMount,...h}=o,g=Ft(vr,o.__scopeDialog);return g.modal?C.jsx(Rt,{present:d||g.open,children:C.jsx(h1,{...h,ref:l})}):null});So.displayName=vr;var f1=io("DialogOverlay.RemoveScroll"),h1=v.forwardRef((o,l)=>{const{__scopeDialog:a,...d}=o,h=Ft(vr,a);return C.jsx(Ni,{as:f1,allowPinchZoom:!0,shards:[h.contentRef],children:C.jsx(qt.div,{"data-state":Bi(h.open),...d,ref:l,style:{pointerEvents:"auto",...d.style}})})}),An="DialogContent",To=v.forwardRef((o,l)=>{const a=yo(An,o.__scopeDialog),{forceMount:d=a.forceMount,...h}=o,g=Ft(An,o.__scopeDialog);return C.jsx(Rt,{present:d||g.open,children:g.modal?C.jsx(g1,{...h,ref:l}):C.jsx(x1,{...h,ref:l})})});To.displayName=An;var g1=v.forwardRef((o,l)=>{const a=Ft(An,o.__scopeDialog),d=v.useRef(null),h=et(l,a.contentRef,d);return v.useEffect(()=>{const g=d.current;if(g)return Ti(g)},[]),C.jsx(No,{...o,ref:h,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:oe(o.onCloseAutoFocus,g=>{var A;g.preventDefault(),(A=a.triggerRef.current)==null||A.focus()}),onPointerDownOutside:oe(o.onPointerDownOutside,g=>{const A=g.detail.originalEvent,b=A.button===0&&A.ctrlKey===!0;(A.button===2||b)&&g.preventDefault()}),onFocusOutside:oe(o.onFocusOutside,g=>g.preventDefault())})}),x1=v.forwardRef((o,l)=>{const a=Ft(An,o.__scopeDialog),d=v.useRef(!1),h=v.useRef(!1);return C.jsx(No,{...o,ref:l,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:g=>{var A,b;(A=o.onCloseAutoFocus)==null||A.call(o,g),g.defaultPrevented||(d.current||(b=a.triggerRef.current)==null||b.focus(),g.preventDefault()),d.current=!1,h.current=!1},onInteractOutside:g=>{var T,p;(T=o.onInteractOutside)==null||T.call(o,g),g.defaultPrevented||(d.current=!0,g.detail.originalEvent.type==="pointerdown"&&(h.current=!0));const A=g.target;((p=a.triggerRef.current)==null?void 0:p.contains(A))&&g.preventDefault(),g.detail.originalEvent.type==="focusin"&&h.current&&g.preventDefault()}})}),No=v.forwardRef((o,l)=>{const{__scopeDialog:a,trapFocus:d,onOpenAutoFocus:h,onCloseAutoFocus:g,...A}=o,b=Ft(An,a),T=v.useRef(null),p=et(l,T);return vi(),C.jsxs(C.Fragment,{children:[C.jsx(po,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:h,onUnmountAutoFocus:g,children:C.jsx(go,{role:"dialog",id:b.contentId,"aria-describedby":b.descriptionId,"aria-labelledby":b.titleId,"data-state":Bi(b.open),...A,ref:p,onDismiss:()=>b.onOpenChange(!1)})}),C.jsxs(C.Fragment,{children:[C.jsx(p1,{titleId:b.titleId}),C.jsx(w1,{contentRef:T,descriptionId:b.descriptionId})]})]})}),Pi="DialogTitle",vo=v.forwardRef((o,l)=>{const{__scopeDialog:a,...d}=o,h=Ft(Pi,a);return C.jsx(qt.h2,{id:h.titleId,...d,ref:l})});vo.displayName=Pi;var Mo="DialogDescription",_o=v.forwardRef((o,l)=>{const{__scopeDialog:a,...d}=o,h=Ft(Mo,a);return C.jsx(qt.p,{id:h.descriptionId,...d,ref:l})});_o.displayName=Mo;var Do="DialogClose",Ro=v.forwardRef((o,l)=>{const{__scopeDialog:a,...d}=o,h=Ft(Do,a);return C.jsx(qt.button,{type:"button",...d,ref:l,onClick:oe(o.onClick,()=>h.onOpenChange(!1))})});Ro.displayName=Do;function Bi(o){return o?"open":"closed"}var Oo="DialogTitleWarning",[xg,Lo]=il(Oo,{contentName:An,titleName:Pi,docsSlug:"dialog"}),p1=({titleId:o})=>{const l=Lo(Oo),a=`\`${l.contentName}\` requires a \`${l.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${l.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${l.docsSlug}`;return v.useEffect(()=>{o&&(document.getElementById(o)||console.error(a))},[a,o]),null},m1="DialogDescriptionWarning",w1=({contentRef:o,descriptionId:l})=>{const d=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Lo(m1).contentName}}.`;return v.useEffect(()=>{var g;const h=(g=o.current)==null?void 0:g.getAttribute("aria-describedby");l&&h&&(document.getElementById(l)||console.warn(d))},[d,o,l]),null},Po=Ao,C1=bo,Bo=Io,ko=So,Fo=To,jo=vo,Uo=_o,ki=Ro;function A1({...o}){return C.jsx(Po,{"data-slot":"sheet",...o})}function E1({...o}){return C.jsx(Bo,{"data-slot":"sheet-portal",...o})}function b1({className:o,...l}){return C.jsx(ko,{"data-slot":"sheet-overlay",className:ue("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",o),...l})}function y1({className:o,children:l,side:a="right",...d}){return C.jsxs(E1,{children:[C.jsx(b1,{}),C.jsxs(Fo,{"data-slot":"sheet-content",className:ue("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",a==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",a==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",a==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",a==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",o),...d,children:[l,C.jsxs(ki,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[C.jsx(uo,{className:"size-4"}),C.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function I1({className:o,...l}){return C.jsx("div",{"data-slot":"sheet-header",className:ue("flex flex-col gap-1.5 p-4",o),...l})}function S1({className:o,...l}){return C.jsx(jo,{"data-slot":"sheet-title",className:ue("text-foreground font-semibold",o),...l})}function T1({className:o,...l}){return C.jsx(Uo,{"data-slot":"sheet-description",className:ue("text-muted-foreground text-sm",o),...l})}var N1=Symbol("radix.slottable");function v1(o){const l=({children:a})=>C.jsx(C.Fragment,{children:a});return l.displayName=`${o}.Slottable`,l.__radixId=N1,l}var[Br,pg]=fn("Tooltip",[jn]),kr=jn(),Ho="TooltipProvider",M1=700,Ai="tooltip.open",[_1,Fi]=Br(Ho),zo=o=>{const{__scopeTooltip:l,delayDuration:a=M1,skipDelayDuration:d=300,disableHoverableContent:h=!1,children:g}=o,A=v.useRef(!0),b=v.useRef(!1),T=v.useRef(0);return v.useEffect(()=>{const p=T.current;return()=>window.clearTimeout(p)},[]),C.jsx(_1,{scope:l,isOpenDelayedRef:A,delayDuration:a,onOpen:v.useCallback(()=>{window.clearTimeout(T.current),A.current=!1},[]),onClose:v.useCallback(()=>{window.clearTimeout(T.current),T.current=window.setTimeout(()=>A.current=!0,d)},[d]),isPointerInTransitRef:b,onPointerInTransitChange:v.useCallback(p=>{b.current=p},[]),disableHoverableContent:h,children:g})};zo.displayName=Ho;var nr="Tooltip",[D1,or]=Br(nr),Vo=o=>{const{__scopeTooltip:l,children:a,open:d,defaultOpen:h,onOpenChange:g,disableHoverableContent:A,delayDuration:b}=o,T=Fi(nr,o.__scopeTooltip),p=kr(l),[S,N]=v.useState(null),O=Qt(),k=v.useRef(0),Y=A??T.disableHoverableContent,F=b??T.delayDuration,X=v.useRef(!1),[Q,Z]=Fn({prop:d,defaultProp:h??!1,onChange:j=>{j?(T.onOpen(),document.dispatchEvent(new CustomEvent(Ai))):T.onClose(),g==null||g(j)},caller:nr}),W=v.useMemo(()=>Q?X.current?"delayed-open":"instant-open":"closed",[Q]),$=v.useCallback(()=>{window.clearTimeout(k.current),k.current=0,X.current=!1,Z(!0)},[Z]),Oe=v.useCallback(()=>{window.clearTimeout(k.current),k.current=0,Z(!1)},[Z]),ge=v.useCallback(()=>{window.clearTimeout(k.current),k.current=window.setTimeout(()=>{X.current=!0,Z(!0),k.current=0},F)},[F,Z]);return v.useEffect(()=>()=>{k.current&&(window.clearTimeout(k.current),k.current=0)},[]),C.jsx(Mi,{...p,children:C.jsx(D1,{scope:l,contentId:O,open:Q,stateAttribute:W,trigger:S,onTriggerChange:N,onTriggerEnter:v.useCallback(()=>{T.isOpenDelayedRef.current?ge():$()},[T.isOpenDelayedRef,ge,$]),onTriggerLeave:v.useCallback(()=>{Y?Oe():(window.clearTimeout(k.current),k.current=0)},[Oe,Y]),onOpen:$,onClose:Oe,disableHoverableContent:Y,children:a})})};Vo.displayName=nr;var Ei="TooltipTrigger",Go=v.forwardRef((o,l)=>{const{__scopeTooltip:a,...d}=o,h=or(Ei,a),g=Fi(Ei,a),A=kr(a),b=v.useRef(null),T=et(l,b,h.onTriggerChange),p=v.useRef(!1),S=v.useRef(!1),N=v.useCallback(()=>p.current=!1,[]);return v.useEffect(()=>()=>document.removeEventListener("pointerup",N),[N]),C.jsx(Lr,{asChild:!0,...A,children:C.jsx(ct.button,{"aria-describedby":h.open?h.contentId:void 0,"data-state":h.stateAttribute,...d,ref:T,onPointerMove:oe(o.onPointerMove,O=>{O.pointerType!=="touch"&&!S.current&&!g.isPointerInTransitRef.current&&(h.onTriggerEnter(),S.current=!0)}),onPointerLeave:oe(o.onPointerLeave,()=>{h.onTriggerLeave(),S.current=!1}),onPointerDown:oe(o.onPointerDown,()=>{h.open&&h.onClose(),p.current=!0,document.addEventListener("pointerup",N,{once:!0})}),onFocus:oe(o.onFocus,()=>{p.current||h.onOpen()}),onBlur:oe(o.onBlur,h.onClose),onClick:oe(o.onClick,h.onClose)})})});Go.displayName=Ei;var ji="TooltipPortal",[R1,O1]=Br(ji,{forceMount:void 0}),Wo=o=>{const{__scopeTooltip:l,forceMount:a,children:d,container:h}=o,g=or(ji,l);return C.jsx(R1,{scope:l,forceMount:a,children:C.jsx(Rt,{present:a||g.open,children:C.jsx(_i,{asChild:!0,container:h,children:d})})})};Wo.displayName=ji;var Bn="TooltipContent",Yo=v.forwardRef((o,l)=>{const a=O1(Bn,o.__scopeTooltip),{forceMount:d=a.forceMount,side:h="top",...g}=o,A=or(Bn,o.__scopeTooltip);return C.jsx(Rt,{present:d||A.open,children:A.disableHoverableContent?C.jsx(Xo,{side:h,...g,ref:l}):C.jsx(L1,{side:h,...g,ref:l})})}),L1=v.forwardRef((o,l)=>{const a=or(Bn,o.__scopeTooltip),d=Fi(Bn,o.__scopeTooltip),h=v.useRef(null),g=et(l,h),[A,b]=v.useState(null),{trigger:T,onClose:p}=a,S=h.current,{onPointerInTransitChange:N}=d,O=v.useCallback(()=>{b(null),N(!1)},[N]),k=v.useCallback((Y,F)=>{const X=Y.currentTarget,Q={x:Y.clientX,y:Y.clientY},Z=F1(Q,X.getBoundingClientRect()),W=j1(Q,Z),$=U1(F.getBoundingClientRect()),Oe=z1([...W,...$]);b(Oe),N(!0)},[N]);return v.useEffect(()=>()=>O(),[O]),v.useEffect(()=>{if(T&&S){const Y=X=>k(X,S),F=X=>k(X,T);return T.addEventListener("pointerleave",Y),S.addEventListener("pointerleave",F),()=>{T.removeEventListener("pointerleave",Y),S.removeEventListener("pointerleave",F)}}},[T,S,k,O]),v.useEffect(()=>{if(A){const Y=F=>{const X=F.target,Q={x:F.clientX,y:F.clientY},Z=(T==null?void 0:T.contains(X))||(S==null?void 0:S.contains(X)),W=!H1(Q,A);Z?O():W&&(O(),p())};return document.addEventListener("pointermove",Y),()=>document.removeEventListener("pointermove",Y)}},[T,S,A,p,O]),C.jsx(Xo,{...o,ref:g})}),[P1,B1]=Br(nr,{isInside:!1}),k1=v1("TooltipContent"),Xo=v.forwardRef((o,l)=>{const{__scopeTooltip:a,children:d,"aria-label":h,onEscapeKeyDown:g,onPointerDownOutside:A,...b}=o,T=or(Bn,a),p=kr(a),{onClose:S}=T;return v.useEffect(()=>(document.addEventListener(Ai,S),()=>document.removeEventListener(Ai,S)),[S]),v.useEffect(()=>{if(T.trigger){const N=O=>{const k=O.target;k!=null&&k.contains(T.trigger)&&S()};return window.addEventListener("scroll",N,{capture:!0}),()=>window.removeEventListener("scroll",N,{capture:!0})}},[T.trigger,S]),C.jsx(Ri,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:g,onPointerDownOutside:A,onFocusOutside:N=>N.preventDefault(),onDismiss:S,children:C.jsxs(Oi,{"data-state":T.stateAttribute,...p,...b,ref:l,style:{...b.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[C.jsx(k1,{children:d}),C.jsx(P1,{scope:a,isInside:!0,children:C.jsx(al,{id:T.contentId,role:"tooltip",children:h||d})})]})})});Yo.displayName=Bn;var Zo="TooltipArrow",Ko=v.forwardRef((o,l)=>{const{__scopeTooltip:a,...d}=o,h=kr(a);return B1(Zo,a).isInside?null:C.jsx(Di,{...h,...d,ref:l})});Ko.displayName=Zo;function F1(o,l){const a=Math.abs(l.top-o.y),d=Math.abs(l.bottom-o.y),h=Math.abs(l.right-o.x),g=Math.abs(l.left-o.x);switch(Math.min(a,d,h,g)){case g:return"left";case h:return"right";case a:return"top";case d:return"bottom";default:throw new Error("unreachable")}}function j1(o,l,a=5){const d=[];switch(l){case"top":d.push({x:o.x-a,y:o.y+a},{x:o.x+a,y:o.y+a});break;case"bottom":d.push({x:o.x-a,y:o.y-a},{x:o.x+a,y:o.y-a});break;case"left":d.push({x:o.x+a,y:o.y-a},{x:o.x+a,y:o.y+a});break;case"right":d.push({x:o.x-a,y:o.y-a},{x:o.x-a,y:o.y+a});break}return d}function U1(o){const{top:l,right:a,bottom:d,left:h}=o;return[{x:h,y:l},{x:a,y:l},{x:a,y:d},{x:h,y:d}]}function H1(o,l){const{x:a,y:d}=o;let h=!1;for(let g=0,A=l.length-1;g<l.length;A=g++){const b=l[g],T=l[A],p=b.x,S=b.y,N=T.x,O=T.y;S>d!=O>d&&a<(N-p)*(d-S)/(O-S)+p&&(h=!h)}return h}function z1(o){const l=o.slice();return l.sort((a,d)=>a.x<d.x?-1:a.x>d.x?1:a.y<d.y?-1:a.y>d.y?1:0),V1(l)}function V1(o){if(o.length<=1)return o.slice();const l=[];for(let d=0;d<o.length;d++){const h=o[d];for(;l.length>=2;){const g=l[l.length-1],A=l[l.length-2];if((g.x-A.x)*(h.y-A.y)>=(g.y-A.y)*(h.x-A.x))l.pop();else break}l.push(h)}l.pop();const a=[];for(let d=o.length-1;d>=0;d--){const h=o[d];for(;a.length>=2;){const g=a[a.length-1],A=a[a.length-2];if((g.x-A.x)*(h.y-A.y)>=(g.y-A.y)*(h.x-A.x))a.pop();else break}a.push(h)}return a.pop(),l.length===1&&a.length===1&&l[0].x===a[0].x&&l[0].y===a[0].y?l:l.concat(a)}var G1=zo,W1=Vo,Y1=Go,X1=Wo,Z1=Yo,K1=Ko;function Qo({delayDuration:o=0,...l}){return C.jsx(G1,{"data-slot":"tooltip-provider",delayDuration:o,...l})}function Q1({...o}){return C.jsx(Qo,{children:C.jsx(W1,{"data-slot":"tooltip",...o})})}function q1({...o}){return C.jsx(Y1,{"data-slot":"tooltip-trigger",...o})}function J1({className:o,sideOffset:l=4,children:a,...d}){return C.jsx(X1,{children:C.jsxs(Z1,{"data-slot":"tooltip-content",sideOffset:l,className:ue("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-w-sm rounded-md px-3 py-1.5 text-xs",o),...d,children:[a,C.jsx(K1,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const $1="sidebar_state",eu=60*60*24*7,tu="16rem",nu="18rem",ru="3rem",iu="b",qo=v.createContext(null);function Fr(){const o=v.useContext(qo);if(!o)throw new Error("useSidebar must be used within a SidebarProvider.");return o}function su({defaultOpen:o=!0,open:l,onOpenChange:a,className:d,style:h,children:g,...A}){const b=fo(),[T,p]=v.useState(!1),[S,N]=v.useState(o),O=l??S,k=v.useCallback(Q=>{const Z=typeof Q=="function"?Q(O):Q;a?a(Z):N(Z),document.cookie=`${$1}=${Z}; path=/; max-age=${eu}`},[a,O]),Y=v.useCallback(()=>b?p(Q=>!Q):k(Q=>!Q),[b,k,p]);v.useEffect(()=>{const Q=Z=>{Z.key===iu&&(Z.metaKey||Z.ctrlKey)&&(Z.preventDefault(),Y())};return window.addEventListener("keydown",Q),()=>window.removeEventListener("keydown",Q)},[Y]);const F=O?"expanded":"collapsed",X=v.useMemo(()=>({state:F,open:O,setOpen:k,isMobile:b,openMobile:T,setOpenMobile:p,toggleSidebar:Y}),[F,O,k,b,T,p,Y]);return C.jsx(qo.Provider,{value:X,children:C.jsx(Qo,{delayDuration:0,children:C.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":tu,"--sidebar-width-icon":ru,...h},className:ue("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",d),...A,children:g})})})}function ou({side:o="left",variant:l="sidebar",collapsible:a="offcanvas",className:d,children:h,...g}){const{isMobile:A,state:b,openMobile:T,setOpenMobile:p}=Fr();return a==="none"?C.jsx("div",{"data-slot":"sidebar",className:ue("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",d),...g,children:h}):A?C.jsx(A1,{open:T,onOpenChange:p,...g,children:C.jsxs(y1,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":nu},side:o,children:[C.jsxs(I1,{className:"sr-only",children:[C.jsx(S1,{children:"Sidebar"}),C.jsx(T1,{children:"Displays the mobile sidebar."})]}),C.jsx("div",{className:"flex h-full w-full flex-col",children:h})]})}):C.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":b,"data-collapsible":b==="collapsed"?a:"","data-variant":l,"data-side":o,"data-slot":"sidebar",children:[C.jsx("div",{"data-slot":"sidebar-gap",className:ue("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",l==="floating"||l==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),C.jsx("div",{"data-slot":"sidebar-container",className:ue("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",o==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",l==="floating"||l==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",d),...g,children:C.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:h})})]})}function au({className:o,onClick:l,...a}){const{toggleSidebar:d}=Fr();return C.jsxs(Pn,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:ue("size-7",o),onClick:h=>{l==null||l(h),d()},...a,children:[C.jsx(Dl,{}),C.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function cu({className:o,...l}){return C.jsx("main",{"data-slot":"sidebar-inset",className:ue("bg-background relative flex w-full flex-1 flex-col","md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",o),...l})}function lu({className:o,...l}){return C.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:ue("flex flex-col gap-2 p-2",o),...l})}function uu({className:o,...l}){return C.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:ue("flex flex-col gap-2 p-2",o),...l})}function du({className:o,...l}){return C.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:ue("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",o),...l})}function fu({className:o,...l}){return C.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:ue("relative flex w-full min-w-0 flex-col p-2",o),...l})}function hu({className:o,asChild:l=!1,...a}){const d=l?Or:"div";return C.jsx(d,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:ue("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",o),...a})}function Ui({className:o,...l}){return C.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:ue("flex w-full min-w-0 flex-col gap-1",o),...l})}function jr({className:o,...l}){return C.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:ue("group/menu-item relative",o),...l})}const gu=nl("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function Ur({asChild:o=!1,isActive:l=!1,variant:a="default",size:d="default",tooltip:h,className:g,...A}){const b=o?Or:"button",{isMobile:T,state:p}=Fr(),S=C.jsx(b,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":d,"data-active":l,className:ue(gu({variant:a,size:d}),g),...A});return h?(typeof h=="string"&&(h={children:h}),C.jsxs(Q1,{children:[C.jsx(q1,{asChild:!0,children:S}),C.jsx(J1,{side:"right",align:"center",hidden:p!=="collapsed"||T,...h})]})):S}function xu({className:o,...l}){return C.jsx("ul",{"data-slot":"sidebar-menu-sub","data-sidebar":"menu-sub",className:ue("border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",o),...l})}function pu({className:o,...l}){return C.jsx("li",{"data-slot":"sidebar-menu-sub-item","data-sidebar":"menu-sub-item",className:ue("group/menu-sub-item relative",o),...l})}function mu({asChild:o=!1,size:l="md",isActive:a=!1,className:d,...h}){const g=o?Or:"a";return C.jsx(g,{"data-slot":"sidebar-menu-sub-button","data-sidebar":"menu-sub-button","data-size":l,"data-active":a,className:ue("text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",l==="sm"&&"text-xs",l==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",d),...h})}function wu({variant:o="header",children:l,...a}){return o==="sidebar"?C.jsx(cu,{...a,children:l}):C.jsx("main",{className:"mx-auto flex h-full w-full max-w-7xl flex-1 flex-col gap-4 rounded-xl",...a,children:l})}function Cu({children:o,variant:l="header"}){const[a,d]=v.useState(()=>typeof window<"u"?localStorage.getItem("sidebar")!=="false":!0),h=g=>{d(g),typeof window<"u"&&localStorage.setItem("sidebar",String(g))};return l==="header"?C.jsx("div",{className:"flex min-h-screen w-full flex-col",children:o}):C.jsx(su,{defaultOpen:a,open:a,onOpenChange:h,children:o})}var Hr="Collapsible",[Au,mg]=fn(Hr),[Eu,Hi]=Au(Hr),Jo=v.forwardRef((o,l)=>{const{__scopeCollapsible:a,open:d,defaultOpen:h,disabled:g,onOpenChange:A,...b}=o,[T,p]=Fn({prop:d,defaultProp:h??!1,onChange:A,caller:Hr});return C.jsx(Eu,{scope:a,disabled:g,contentId:Qt(),open:T,onOpenToggle:v.useCallback(()=>p(S=>!S),[p]),children:C.jsx(ct.div,{"data-state":Vi(T),"data-disabled":g?"":void 0,...b,ref:l})})});Jo.displayName=Hr;var $o="CollapsibleTrigger",ea=v.forwardRef((o,l)=>{const{__scopeCollapsible:a,...d}=o,h=Hi($o,a);return C.jsx(ct.button,{type:"button","aria-controls":h.contentId,"aria-expanded":h.open||!1,"data-state":Vi(h.open),"data-disabled":h.disabled?"":void 0,disabled:h.disabled,...d,ref:l,onClick:oe(o.onClick,h.onOpenToggle)})});ea.displayName=$o;var zi="CollapsibleContent",ta=v.forwardRef((o,l)=>{const{forceMount:a,...d}=o,h=Hi(zi,o.__scopeCollapsible);return C.jsx(Rt,{present:a||h.open,children:({present:g})=>C.jsx(bu,{...d,ref:l,present:g})})});ta.displayName=zi;var bu=v.forwardRef((o,l)=>{const{__scopeCollapsible:a,present:d,children:h,...g}=o,A=Hi(zi,a),[b,T]=v.useState(d),p=v.useRef(null),S=et(l,p),N=v.useRef(0),O=N.current,k=v.useRef(0),Y=k.current,F=A.open||b,X=v.useRef(F),Q=v.useRef(void 0);return v.useEffect(()=>{const Z=requestAnimationFrame(()=>X.current=!1);return()=>cancelAnimationFrame(Z)},[]),tr(()=>{const Z=p.current;if(Z){Q.current=Q.current||{transitionDuration:Z.style.transitionDuration,animationName:Z.style.animationName},Z.style.transitionDuration="0s",Z.style.animationName="none";const W=Z.getBoundingClientRect();N.current=W.height,k.current=W.width,X.current||(Z.style.transitionDuration=Q.current.transitionDuration,Z.style.animationName=Q.current.animationName),T(d)}},[A.open,d]),C.jsx(ct.div,{"data-state":Vi(A.open),"data-disabled":A.disabled?"":void 0,id:A.contentId,hidden:!F,...g,ref:S,style:{"--radix-collapsible-content-height":O?`${O}px`:void 0,"--radix-collapsible-content-width":Y?`${Y}px`:void 0,...o.style},children:F&&h})});function Vi(o){return o?"open":"closed"}var yu=Jo;function Iu({...o}){return C.jsx(yu,{"data-slot":"collapsible",...o})}function Su({...o}){return C.jsx(ea,{"data-slot":"collapsible-trigger",...o})}function Tu({...o}){return C.jsx(ta,{"data-slot":"collapsible-content",...o})}function Nu({item:o}){var h,g;const{url:l}=Si(),a=A=>A.replace(/\/+$/,""),d=(h=o.children)==null?void 0:h.some(A=>a(l)===a(A.href)||A.href!=="/"&&a(l).startsWith(a(A.href)+"/"));return C.jsx(Iu,{asChild:!0,defaultOpen:d,className:"group/collapsible",children:C.jsxs(jr,{children:[C.jsx(Su,{asChild:!0,children:C.jsxs(Ur,{tooltip:o.title,isActive:d,children:[o.icon&&C.jsx(o.icon,{}),C.jsx("span",{children:o.title}),C.jsx(lo,{className:"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),C.jsx(Tu,{children:C.jsx(xu,{children:(g=o.children)==null?void 0:g.map(A=>{const b=a(l)===a(A.href);return C.jsx(pu,{children:C.jsx(mu,{asChild:!0,isActive:b,children:C.jsx(sr,{href:A.href,prefetch:!0,children:C.jsx("span",{children:A.title})})})},A.title)})})})]})},o.title)}function vu({items:o=[]}){const l=Si(),a=l.props.auth.user.role.name,d=o.filter(h=>h.allowedRoles?h.allowedRoles.includes(a):!0);return C.jsxs(fu,{className:"px-2 py-0",children:[C.jsx(hu,{children:"Fleet Management"}),C.jsx(Ui,{children:d.map(h=>h.children?C.jsx(Nu,{item:{...h,children:h.children.filter(g=>!g.allowedRoles||g.allowedRoles.includes(a))}},h.title):C.jsx(jr,{children:C.jsx(Ur,{asChild:!0,isActive:h.href===l.url,tooltip:{children:h.title},children:C.jsxs(sr,{href:h.href,prefetch:!0,children:[h.icon&&C.jsx(h.icon,{}),C.jsx("span",{children:h.title})]})})},h.title))})]})}var xi="rovingFocusGroup.onEntryFocus",Mu={bubbles:!1,cancelable:!0},ar="RovingFocusGroup",[bi,na,_u]=oo(ar),[Du,ra]=fn(ar,[_u]),[Ru,Ou]=Du(ar),ia=v.forwardRef((o,l)=>C.jsx(bi.Provider,{scope:o.__scopeRovingFocusGroup,children:C.jsx(bi.Slot,{scope:o.__scopeRovingFocusGroup,children:C.jsx(Lu,{...o,ref:l})})}));ia.displayName=ar;var Lu=v.forwardRef((o,l)=>{const{__scopeRovingFocusGroup:a,orientation:d,loop:h=!1,dir:g,currentTabStopId:A,defaultCurrentTabStopId:b,onCurrentTabStopIdChange:T,onEntryFocus:p,preventScrollOnEntryFocus:S=!1,...N}=o,O=v.useRef(null),k=et(l,O),Y=ao(g),[F,X]=Fn({prop:A,defaultProp:b??null,onChange:T,caller:ar}),[Q,Z]=v.useState(!1),W=ln(p),$=na(a),Oe=v.useRef(!1),[ge,j]=v.useState(0);return v.useEffect(()=>{const ae=O.current;if(ae)return ae.addEventListener(xi,W),()=>ae.removeEventListener(xi,W)},[W]),C.jsx(Ru,{scope:a,orientation:d,dir:Y,loop:h,currentTabStopId:F,onItemFocus:v.useCallback(ae=>X(ae),[X]),onItemShiftTab:v.useCallback(()=>Z(!0),[]),onFocusableItemAdd:v.useCallback(()=>j(ae=>ae+1),[]),onFocusableItemRemove:v.useCallback(()=>j(ae=>ae-1),[]),children:C.jsx(ct.div,{tabIndex:Q||ge===0?-1:0,"data-orientation":d,...N,ref:k,style:{outline:"none",...o.style},onMouseDown:oe(o.onMouseDown,()=>{Oe.current=!0}),onFocus:oe(o.onFocus,ae=>{const z=!Oe.current;if(ae.target===ae.currentTarget&&z&&!Q){const tt=new CustomEvent(xi,Mu);if(ae.currentTarget.dispatchEvent(tt),!tt.defaultPrevented){const Xe=$().filter(Te=>Te.focusable),ie=Xe.find(Te=>Te.active),we=Xe.find(Te=>Te.id===F),B=[ie,we,...Xe].filter(Boolean).map(Te=>Te.ref.current);aa(B,S)}}Oe.current=!1}),onBlur:oe(o.onBlur,()=>Z(!1))})})}),sa="RovingFocusGroupItem",oa=v.forwardRef((o,l)=>{const{__scopeRovingFocusGroup:a,focusable:d=!0,active:h=!1,tabStopId:g,children:A,...b}=o,T=Qt(),p=g||T,S=Ou(sa,a),N=S.currentTabStopId===p,O=na(a),{onFocusableItemAdd:k,onFocusableItemRemove:Y,currentTabStopId:F}=S;return v.useEffect(()=>{if(d)return k(),()=>Y()},[d,k,Y]),C.jsx(bi.ItemSlot,{scope:a,id:p,focusable:d,active:h,children:C.jsx(ct.span,{tabIndex:N?0:-1,"data-orientation":S.orientation,...b,ref:l,onMouseDown:oe(o.onMouseDown,X=>{d?S.onItemFocus(p):X.preventDefault()}),onFocus:oe(o.onFocus,()=>S.onItemFocus(p)),onKeyDown:oe(o.onKeyDown,X=>{if(X.key==="Tab"&&X.shiftKey){S.onItemShiftTab();return}if(X.target!==X.currentTarget)return;const Q=ku(X,S.orientation,S.dir);if(Q!==void 0){if(X.metaKey||X.ctrlKey||X.altKey||X.shiftKey)return;X.preventDefault();let W=O().filter($=>$.focusable).map($=>$.ref.current);if(Q==="last")W.reverse();else if(Q==="prev"||Q==="next"){Q==="prev"&&W.reverse();const $=W.indexOf(X.currentTarget);W=S.loop?Fu(W,$+1):W.slice($+1)}setTimeout(()=>aa(W))}}),children:typeof A=="function"?A({isCurrentTabStop:N,hasTabStop:F!=null}):A})})});oa.displayName=sa;var Pu={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Bu(o,l){return l!=="rtl"?o:o==="ArrowLeft"?"ArrowRight":o==="ArrowRight"?"ArrowLeft":o}function ku(o,l,a){const d=Bu(o.key,a);if(!(l==="vertical"&&["ArrowLeft","ArrowRight"].includes(d))&&!(l==="horizontal"&&["ArrowUp","ArrowDown"].includes(d)))return Pu[d]}function aa(o,l=!1){const a=document.activeElement;for(const d of o)if(d===a||(d.focus({preventScroll:l}),document.activeElement!==a))return}function Fu(o,l){return o.map((a,d)=>o[(l+d)%o.length])}var ju=ia,Uu=oa;function Hu(o){const l=zu(o),a=v.forwardRef((d,h)=>{const{children:g,...A}=d,b=v.Children.toArray(g),T=b.find(Gu);if(T){const p=T.props.children,S=b.map(N=>N===T?v.Children.count(p)>1?v.Children.only(null):v.isValidElement(p)?p.props.children:null:N);return C.jsx(l,{...A,ref:h,children:v.isValidElement(p)?v.cloneElement(p,void 0,S):null})}return C.jsx(l,{...A,ref:h,children:g})});return a.displayName=`${o}.Slot`,a}function zu(o){const l=v.forwardRef((a,d)=>{const{children:h,...g}=a,A=v.isValidElement(h)?Yu(h):void 0,b=et(A,d);if(v.isValidElement(h)){const T=Wu(g,h.props);return h.type!==v.Fragment&&(T.ref=b),v.cloneElement(h,T)}return v.Children.count(h)>1?v.Children.only(null):null});return l.displayName=`${o}.SlotClone`,l}var Vu=Symbol("radix.slottable");function Gu(o){return v.isValidElement(o)&&typeof o.type=="function"&&"__radixId"in o.type&&o.type.__radixId===Vu}function Wu(o,l){const a={...l};for(const d in l){const h=o[d],g=l[d];/^on[A-Z]/.test(d)?h&&g?a[d]=(...b)=>{const T=g(...b);return h(...b),T}:h&&(a[d]=h):d==="style"?a[d]={...h,...g}:d==="className"&&(a[d]=[h,g].filter(Boolean).join(" "))}return{...o,...a}}function Yu(o){var d,h;let l=(d=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:d.get,a=l&&"isReactWarning"in l&&l.isReactWarning;return a?o.ref:(l=(h=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:h.get,a=l&&"isReactWarning"in l&&l.isReactWarning,a?o.props.ref:o.props.ref||o.ref)}var yi=["Enter"," "],Xu=["ArrowDown","PageUp","Home"],ca=["ArrowUp","PageDown","End"],Zu=[...Xu,...ca],Ku={ltr:[...yi,"ArrowRight"],rtl:[...yi,"ArrowLeft"]},Qu={ltr:["ArrowLeft"],rtl:["ArrowRight"]},cr="Menu",[rr,qu,Ju]=oo(cr),[En,la]=fn(cr,[Ju,jn,ra]),zr=jn(),ua=ra(),[$u,bn]=En(cr),[e0,lr]=En(cr),da=o=>{const{__scopeMenu:l,open:a=!1,children:d,dir:h,onOpenChange:g,modal:A=!0}=o,b=zr(l),[T,p]=v.useState(null),S=v.useRef(!1),N=ln(g),O=ao(h);return v.useEffect(()=>{const k=()=>{S.current=!0,document.addEventListener("pointerdown",Y,{capture:!0,once:!0}),document.addEventListener("pointermove",Y,{capture:!0,once:!0})},Y=()=>S.current=!1;return document.addEventListener("keydown",k,{capture:!0}),()=>{document.removeEventListener("keydown",k,{capture:!0}),document.removeEventListener("pointerdown",Y,{capture:!0}),document.removeEventListener("pointermove",Y,{capture:!0})}},[]),C.jsx(Mi,{...b,children:C.jsx($u,{scope:l,open:a,onOpenChange:N,content:T,onContentChange:p,children:C.jsx(e0,{scope:l,onClose:v.useCallback(()=>N(!1),[N]),isUsingKeyboardRef:S,dir:O,modal:A,children:d})})})};da.displayName=cr;var t0="MenuAnchor",Gi=v.forwardRef((o,l)=>{const{__scopeMenu:a,...d}=o,h=zr(a);return C.jsx(Lr,{...h,...d,ref:l})});Gi.displayName=t0;var Wi="MenuPortal",[n0,fa]=En(Wi,{forceMount:void 0}),ha=o=>{const{__scopeMenu:l,forceMount:a,children:d,container:h}=o,g=bn(Wi,l);return C.jsx(n0,{scope:l,forceMount:a,children:C.jsx(Rt,{present:a||g.open,children:C.jsx(_i,{asChild:!0,container:h,children:d})})})};ha.displayName=Wi;var Dt="MenuContent",[r0,Yi]=En(Dt),ga=v.forwardRef((o,l)=>{const a=fa(Dt,o.__scopeMenu),{forceMount:d=a.forceMount,...h}=o,g=bn(Dt,o.__scopeMenu),A=lr(Dt,o.__scopeMenu);return C.jsx(rr.Provider,{scope:o.__scopeMenu,children:C.jsx(Rt,{present:d||g.open,children:C.jsx(rr.Slot,{scope:o.__scopeMenu,children:A.modal?C.jsx(i0,{...h,ref:l}):C.jsx(s0,{...h,ref:l})})})})}),i0=v.forwardRef((o,l)=>{const a=bn(Dt,o.__scopeMenu),d=v.useRef(null),h=et(l,d);return v.useEffect(()=>{const g=d.current;if(g)return Ti(g)},[]),C.jsx(Xi,{...o,ref:h,trapFocus:a.open,disableOutsidePointerEvents:a.open,disableOutsideScroll:!0,onFocusOutside:oe(o.onFocusOutside,g=>g.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>a.onOpenChange(!1)})}),s0=v.forwardRef((o,l)=>{const a=bn(Dt,o.__scopeMenu);return C.jsx(Xi,{...o,ref:l,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>a.onOpenChange(!1)})}),o0=Hu("MenuContent.ScrollLock"),Xi=v.forwardRef((o,l)=>{const{__scopeMenu:a,loop:d=!1,trapFocus:h,onOpenAutoFocus:g,onCloseAutoFocus:A,disableOutsidePointerEvents:b,onEntryFocus:T,onEscapeKeyDown:p,onPointerDownOutside:S,onFocusOutside:N,onInteractOutside:O,onDismiss:k,disableOutsideScroll:Y,...F}=o,X=bn(Dt,a),Q=lr(Dt,a),Z=zr(a),W=ua(a),$=qu(a),[Oe,ge]=v.useState(null),j=v.useRef(null),ae=et(l,j,X.onContentChange),z=v.useRef(0),tt=v.useRef(""),Xe=v.useRef(0),ie=v.useRef(null),we=v.useRef("right"),Fe=v.useRef(0),B=Y?Ni:v.Fragment,Te=Y?{as:o0,allowPinchZoom:!0}:void 0,de=ce=>{var jt,We;const Ge=tt.current+ce,Et=$().filter(dt=>!dt.disabled),Be=document.activeElement,Ot=(jt=Et.find(dt=>dt.ref.current===Be))==null?void 0:jt.textValue,Qe=Et.map(dt=>dt.textValue),yn=w0(Qe,Ge,Ot),te=(We=Et.find(dt=>dt.textValue===yn))==null?void 0:We.ref.current;(function dt(Jt){tt.current=Jt,window.clearTimeout(z.current),Jt!==""&&(z.current=window.setTimeout(()=>dt(""),1e3))})(Ge),te&&setTimeout(()=>te.focus())};v.useEffect(()=>()=>window.clearTimeout(z.current),[]),vi();const Tt=v.useCallback(ce=>{var Et,Be;return we.current===((Et=ie.current)==null?void 0:Et.side)&&A0(ce,(Be=ie.current)==null?void 0:Be.area)},[]);return C.jsx(r0,{scope:a,searchRef:tt,onItemEnter:v.useCallback(ce=>{Tt(ce)&&ce.preventDefault()},[Tt]),onItemLeave:v.useCallback(ce=>{var Ge;Tt(ce)||((Ge=j.current)==null||Ge.focus(),ge(null))},[Tt]),onTriggerLeave:v.useCallback(ce=>{Tt(ce)&&ce.preventDefault()},[Tt]),pointerGraceTimerRef:Xe,onPointerGraceIntentChange:v.useCallback(ce=>{ie.current=ce},[]),children:C.jsx(B,{...Te,children:C.jsx(co,{asChild:!0,trapped:h,onMountAutoFocus:oe(g,ce=>{var Ge;ce.preventDefault(),(Ge=j.current)==null||Ge.focus({preventScroll:!0})}),onUnmountAutoFocus:A,children:C.jsx(Ri,{asChild:!0,disableOutsidePointerEvents:b,onEscapeKeyDown:p,onPointerDownOutside:S,onFocusOutside:N,onInteractOutside:O,onDismiss:k,children:C.jsx(ju,{asChild:!0,...W,dir:Q.dir,orientation:"vertical",loop:d,currentTabStopId:Oe,onCurrentTabStopIdChange:ge,onEntryFocus:oe(T,ce=>{Q.isUsingKeyboardRef.current||ce.preventDefault()}),preventScrollOnEntryFocus:!0,children:C.jsx(Oi,{role:"menu","aria-orientation":"vertical","data-state":_a(X.open),"data-radix-menu-content":"",dir:Q.dir,...Z,...F,ref:ae,style:{outline:"none",...F.style},onKeyDown:oe(F.onKeyDown,ce=>{const Et=ce.target.closest("[data-radix-menu-content]")===ce.currentTarget,Be=ce.ctrlKey||ce.altKey||ce.metaKey,Ot=ce.key.length===1;Et&&(ce.key==="Tab"&&ce.preventDefault(),!Be&&Ot&&de(ce.key));const Qe=j.current;if(ce.target!==Qe||!Zu.includes(ce.key))return;ce.preventDefault();const te=$().filter(jt=>!jt.disabled).map(jt=>jt.ref.current);ca.includes(ce.key)&&te.reverse(),p0(te)}),onBlur:oe(o.onBlur,ce=>{ce.currentTarget.contains(ce.target)||(window.clearTimeout(z.current),tt.current="")}),onPointerMove:oe(o.onPointerMove,ir(ce=>{const Ge=ce.target,Et=Fe.current!==ce.clientX;if(ce.currentTarget.contains(Ge)&&Et){const Be=ce.clientX>Fe.current?"right":"left";we.current=Be,Fe.current=ce.clientX}}))})})})})})})});ga.displayName=Dt;var a0="MenuGroup",Zi=v.forwardRef((o,l)=>{const{__scopeMenu:a,...d}=o;return C.jsx(ct.div,{role:"group",...d,ref:l})});Zi.displayName=a0;var c0="MenuLabel",xa=v.forwardRef((o,l)=>{const{__scopeMenu:a,...d}=o;return C.jsx(ct.div,{...d,ref:l})});xa.displayName=c0;var Mr="MenuItem",Rs="menu.itemSelect",Vr=v.forwardRef((o,l)=>{const{disabled:a=!1,onSelect:d,...h}=o,g=v.useRef(null),A=lr(Mr,o.__scopeMenu),b=Yi(Mr,o.__scopeMenu),T=et(l,g),p=v.useRef(!1),S=()=>{const N=g.current;if(!a&&N){const O=new CustomEvent(Rs,{bubbles:!0,cancelable:!0});N.addEventListener(Rs,k=>d==null?void 0:d(k),{once:!0}),cl(N,O),O.defaultPrevented?p.current=!1:A.onClose()}};return C.jsx(pa,{...h,ref:T,disabled:a,onClick:oe(o.onClick,S),onPointerDown:N=>{var O;(O=o.onPointerDown)==null||O.call(o,N),p.current=!0},onPointerUp:oe(o.onPointerUp,N=>{var O;p.current||(O=N.currentTarget)==null||O.click()}),onKeyDown:oe(o.onKeyDown,N=>{const O=b.searchRef.current!=="";a||O&&N.key===" "||yi.includes(N.key)&&(N.currentTarget.click(),N.preventDefault())})})});Vr.displayName=Mr;var pa=v.forwardRef((o,l)=>{const{__scopeMenu:a,disabled:d=!1,textValue:h,...g}=o,A=Yi(Mr,a),b=ua(a),T=v.useRef(null),p=et(l,T),[S,N]=v.useState(!1),[O,k]=v.useState("");return v.useEffect(()=>{const Y=T.current;Y&&k((Y.textContent??"").trim())},[g.children]),C.jsx(rr.ItemSlot,{scope:a,disabled:d,textValue:h??O,children:C.jsx(Uu,{asChild:!0,...b,focusable:!d,children:C.jsx(ct.div,{role:"menuitem","data-highlighted":S?"":void 0,"aria-disabled":d||void 0,"data-disabled":d?"":void 0,...g,ref:p,onPointerMove:oe(o.onPointerMove,ir(Y=>{d?A.onItemLeave(Y):(A.onItemEnter(Y),Y.defaultPrevented||Y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:oe(o.onPointerLeave,ir(Y=>A.onItemLeave(Y))),onFocus:oe(o.onFocus,()=>N(!0)),onBlur:oe(o.onBlur,()=>N(!1))})})})}),l0="MenuCheckboxItem",ma=v.forwardRef((o,l)=>{const{checked:a=!1,onCheckedChange:d,...h}=o;return C.jsx(ba,{scope:o.__scopeMenu,checked:a,children:C.jsx(Vr,{role:"menuitemcheckbox","aria-checked":_r(a)?"mixed":a,...h,ref:l,"data-state":Qi(a),onSelect:oe(h.onSelect,()=>d==null?void 0:d(_r(a)?!0:!a),{checkForDefaultPrevented:!1})})})});ma.displayName=l0;var wa="MenuRadioGroup",[u0,d0]=En(wa,{value:void 0,onValueChange:()=>{}}),Ca=v.forwardRef((o,l)=>{const{value:a,onValueChange:d,...h}=o,g=ln(d);return C.jsx(u0,{scope:o.__scopeMenu,value:a,onValueChange:g,children:C.jsx(Zi,{...h,ref:l})})});Ca.displayName=wa;var Aa="MenuRadioItem",Ea=v.forwardRef((o,l)=>{const{value:a,...d}=o,h=d0(Aa,o.__scopeMenu),g=a===h.value;return C.jsx(ba,{scope:o.__scopeMenu,checked:g,children:C.jsx(Vr,{role:"menuitemradio","aria-checked":g,...d,ref:l,"data-state":Qi(g),onSelect:oe(d.onSelect,()=>{var A;return(A=h.onValueChange)==null?void 0:A.call(h,a)},{checkForDefaultPrevented:!1})})})});Ea.displayName=Aa;var Ki="MenuItemIndicator",[ba,f0]=En(Ki,{checked:!1}),ya=v.forwardRef((o,l)=>{const{__scopeMenu:a,forceMount:d,...h}=o,g=f0(Ki,a);return C.jsx(Rt,{present:d||_r(g.checked)||g.checked===!0,children:C.jsx(ct.span,{...h,ref:l,"data-state":Qi(g.checked)})})});ya.displayName=Ki;var h0="MenuSeparator",Ia=v.forwardRef((o,l)=>{const{__scopeMenu:a,...d}=o;return C.jsx(ct.div,{role:"separator","aria-orientation":"horizontal",...d,ref:l})});Ia.displayName=h0;var g0="MenuArrow",Sa=v.forwardRef((o,l)=>{const{__scopeMenu:a,...d}=o,h=zr(a);return C.jsx(Di,{...h,...d,ref:l})});Sa.displayName=g0;var x0="MenuSub",[wg,Ta]=En(x0),Jn="MenuSubTrigger",Na=v.forwardRef((o,l)=>{const a=bn(Jn,o.__scopeMenu),d=lr(Jn,o.__scopeMenu),h=Ta(Jn,o.__scopeMenu),g=Yi(Jn,o.__scopeMenu),A=v.useRef(null),{pointerGraceTimerRef:b,onPointerGraceIntentChange:T}=g,p={__scopeMenu:o.__scopeMenu},S=v.useCallback(()=>{A.current&&window.clearTimeout(A.current),A.current=null},[]);return v.useEffect(()=>S,[S]),v.useEffect(()=>{const N=b.current;return()=>{window.clearTimeout(N),T(null)}},[b,T]),C.jsx(Gi,{asChild:!0,...p,children:C.jsx(pa,{id:h.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":h.contentId,"data-state":_a(a.open),...o,ref:so(l,h.onTriggerChange),onClick:N=>{var O;(O=o.onClick)==null||O.call(o,N),!(o.disabled||N.defaultPrevented)&&(N.currentTarget.focus(),a.open||a.onOpenChange(!0))},onPointerMove:oe(o.onPointerMove,ir(N=>{g.onItemEnter(N),!N.defaultPrevented&&!o.disabled&&!a.open&&!A.current&&(g.onPointerGraceIntentChange(null),A.current=window.setTimeout(()=>{a.onOpenChange(!0),S()},100))})),onPointerLeave:oe(o.onPointerLeave,ir(N=>{var k,Y;S();const O=(k=a.content)==null?void 0:k.getBoundingClientRect();if(O){const F=(Y=a.content)==null?void 0:Y.dataset.side,X=F==="right",Q=X?-5:5,Z=O[X?"left":"right"],W=O[X?"right":"left"];g.onPointerGraceIntentChange({area:[{x:N.clientX+Q,y:N.clientY},{x:Z,y:O.top},{x:W,y:O.top},{x:W,y:O.bottom},{x:Z,y:O.bottom}],side:F}),window.clearTimeout(b.current),b.current=window.setTimeout(()=>g.onPointerGraceIntentChange(null),300)}else{if(g.onTriggerLeave(N),N.defaultPrevented)return;g.onPointerGraceIntentChange(null)}})),onKeyDown:oe(o.onKeyDown,N=>{var k;const O=g.searchRef.current!=="";o.disabled||O&&N.key===" "||Ku[d.dir].includes(N.key)&&(a.onOpenChange(!0),(k=a.content)==null||k.focus(),N.preventDefault())})})})});Na.displayName=Jn;var va="MenuSubContent",Ma=v.forwardRef((o,l)=>{const a=fa(Dt,o.__scopeMenu),{forceMount:d=a.forceMount,...h}=o,g=bn(Dt,o.__scopeMenu),A=lr(Dt,o.__scopeMenu),b=Ta(va,o.__scopeMenu),T=v.useRef(null),p=et(l,T);return C.jsx(rr.Provider,{scope:o.__scopeMenu,children:C.jsx(Rt,{present:d||g.open,children:C.jsx(rr.Slot,{scope:o.__scopeMenu,children:C.jsx(Xi,{id:b.contentId,"aria-labelledby":b.triggerId,...h,ref:p,align:"start",side:A.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:S=>{var N;A.isUsingKeyboardRef.current&&((N=T.current)==null||N.focus()),S.preventDefault()},onCloseAutoFocus:S=>S.preventDefault(),onFocusOutside:oe(o.onFocusOutside,S=>{S.target!==b.trigger&&g.onOpenChange(!1)}),onEscapeKeyDown:oe(o.onEscapeKeyDown,S=>{A.onClose(),S.preventDefault()}),onKeyDown:oe(o.onKeyDown,S=>{var k;const N=S.currentTarget.contains(S.target),O=Qu[A.dir].includes(S.key);N&&O&&(g.onOpenChange(!1),(k=b.trigger)==null||k.focus(),S.preventDefault())})})})})})});Ma.displayName=va;function _a(o){return o?"open":"closed"}function _r(o){return o==="indeterminate"}function Qi(o){return _r(o)?"indeterminate":o?"checked":"unchecked"}function p0(o){const l=document.activeElement;for(const a of o)if(a===l||(a.focus(),document.activeElement!==l))return}function m0(o,l){return o.map((a,d)=>o[(l+d)%o.length])}function w0(o,l,a){const h=l.length>1&&Array.from(l).every(p=>p===l[0])?l[0]:l,g=a?o.indexOf(a):-1;let A=m0(o,Math.max(g,0));h.length===1&&(A=A.filter(p=>p!==a));const T=A.find(p=>p.toLowerCase().startsWith(h.toLowerCase()));return T!==a?T:void 0}function C0(o,l){const{x:a,y:d}=o;let h=!1;for(let g=0,A=l.length-1;g<l.length;A=g++){const b=l[g],T=l[A],p=b.x,S=b.y,N=T.x,O=T.y;S>d!=O>d&&a<(N-p)*(d-S)/(O-S)+p&&(h=!h)}return h}function A0(o,l){if(!l)return!1;const a={x:o.clientX,y:o.clientY};return C0(a,l)}function ir(o){return l=>l.pointerType==="mouse"?o(l):void 0}var E0=da,b0=Gi,y0=ha,I0=ga,S0=Zi,T0=xa,N0=Vr,v0=ma,M0=Ca,_0=Ea,D0=ya,R0=Ia,O0=Sa,L0=Na,P0=Ma,Gr="DropdownMenu",[B0,Cg]=fn(Gr,[la]),gt=la(),[k0,Da]=B0(Gr),Ra=o=>{const{__scopeDropdownMenu:l,children:a,dir:d,open:h,defaultOpen:g,onOpenChange:A,modal:b=!0}=o,T=gt(l),p=v.useRef(null),[S,N]=Fn({prop:h,defaultProp:g??!1,onChange:A,caller:Gr});return C.jsx(k0,{scope:l,triggerId:Qt(),triggerRef:p,contentId:Qt(),open:S,onOpenChange:N,onOpenToggle:v.useCallback(()=>N(O=>!O),[N]),modal:b,children:C.jsx(E0,{...T,open:S,onOpenChange:N,dir:d,modal:b,children:a})})};Ra.displayName=Gr;var Oa="DropdownMenuTrigger",La=v.forwardRef((o,l)=>{const{__scopeDropdownMenu:a,disabled:d=!1,...h}=o,g=Da(Oa,a),A=gt(a);return C.jsx(b0,{asChild:!0,...A,children:C.jsx(ct.button,{type:"button",id:g.triggerId,"aria-haspopup":"menu","aria-expanded":g.open,"aria-controls":g.open?g.contentId:void 0,"data-state":g.open?"open":"closed","data-disabled":d?"":void 0,disabled:d,...h,ref:so(l,g.triggerRef),onPointerDown:oe(o.onPointerDown,b=>{!d&&b.button===0&&b.ctrlKey===!1&&(g.onOpenToggle(),g.open||b.preventDefault())}),onKeyDown:oe(o.onKeyDown,b=>{d||(["Enter"," "].includes(b.key)&&g.onOpenToggle(),b.key==="ArrowDown"&&g.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(b.key)&&b.preventDefault())})})})});La.displayName=Oa;var F0="DropdownMenuPortal",Pa=o=>{const{__scopeDropdownMenu:l,...a}=o,d=gt(l);return C.jsx(y0,{...d,...a})};Pa.displayName=F0;var Ba="DropdownMenuContent",ka=v.forwardRef((o,l)=>{const{__scopeDropdownMenu:a,...d}=o,h=Da(Ba,a),g=gt(a),A=v.useRef(!1);return C.jsx(I0,{id:h.contentId,"aria-labelledby":h.triggerId,...g,...d,ref:l,onCloseAutoFocus:oe(o.onCloseAutoFocus,b=>{var T;A.current||(T=h.triggerRef.current)==null||T.focus(),A.current=!1,b.preventDefault()}),onInteractOutside:oe(o.onInteractOutside,b=>{const T=b.detail.originalEvent,p=T.button===0&&T.ctrlKey===!0,S=T.button===2||p;(!h.modal||S)&&(A.current=!0)}),style:{...o.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ka.displayName=Ba;var j0="DropdownMenuGroup",Fa=v.forwardRef((o,l)=>{const{__scopeDropdownMenu:a,...d}=o,h=gt(a);return C.jsx(S0,{...h,...d,ref:l})});Fa.displayName=j0;var U0="DropdownMenuLabel",ja=v.forwardRef((o,l)=>{const{__scopeDropdownMenu:a,...d}=o,h=gt(a);return C.jsx(T0,{...h,...d,ref:l})});ja.displayName=U0;var H0="DropdownMenuItem",Ua=v.forwardRef((o,l)=>{const{__scopeDropdownMenu:a,...d}=o,h=gt(a);return C.jsx(N0,{...h,...d,ref:l})});Ua.displayName=H0;var z0="DropdownMenuCheckboxItem",Ha=v.forwardRef((o,l)=>{const{__scopeDropdownMenu:a,...d}=o,h=gt(a);return C.jsx(v0,{...h,...d,ref:l})});Ha.displayName=z0;var V0="DropdownMenuRadioGroup",G0=v.forwardRef((o,l)=>{const{__scopeDropdownMenu:a,...d}=o,h=gt(a);return C.jsx(M0,{...h,...d,ref:l})});G0.displayName=V0;var W0="DropdownMenuRadioItem",Y0=v.forwardRef((o,l)=>{const{__scopeDropdownMenu:a,...d}=o,h=gt(a);return C.jsx(_0,{...h,...d,ref:l})});Y0.displayName=W0;var X0="DropdownMenuItemIndicator",za=v.forwardRef((o,l)=>{const{__scopeDropdownMenu:a,...d}=o,h=gt(a);return C.jsx(D0,{...h,...d,ref:l})});za.displayName=X0;var Z0="DropdownMenuSeparator",Va=v.forwardRef((o,l)=>{const{__scopeDropdownMenu:a,...d}=o,h=gt(a);return C.jsx(R0,{...h,...d,ref:l})});Va.displayName=Z0;var K0="DropdownMenuArrow",Q0=v.forwardRef((o,l)=>{const{__scopeDropdownMenu:a,...d}=o,h=gt(a);return C.jsx(O0,{...h,...d,ref:l})});Q0.displayName=K0;var q0="DropdownMenuSubTrigger",J0=v.forwardRef((o,l)=>{const{__scopeDropdownMenu:a,...d}=o,h=gt(a);return C.jsx(L0,{...h,...d,ref:l})});J0.displayName=q0;var $0="DropdownMenuSubContent",ed=v.forwardRef((o,l)=>{const{__scopeDropdownMenu:a,...d}=o,h=gt(a);return C.jsx(P0,{...h,...d,ref:l,style:{...o.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ed.displayName=$0;var td=Ra,nd=La,rd=Pa,id=ka,sd=Fa,od=ja,ad=Ua,cd=Ha,ld=za,ud=Va;function dd({...o}){return C.jsx(td,{"data-slot":"dropdown-menu",...o})}function fd({...o}){return C.jsx(nd,{"data-slot":"dropdown-menu-trigger",...o})}function hd({className:o,sideOffset:l=4,...a}){return C.jsx(rd,{children:C.jsx(id,{"data-slot":"dropdown-menu-content",sideOffset:l,className:ue("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md",o),...a})})}function gd({...o}){return C.jsx(sd,{"data-slot":"dropdown-menu-group",...o})}function Os({className:o,inset:l,variant:a="default",...d}){return C.jsx(ad,{"data-slot":"dropdown-menu-item","data-inset":l,"data-variant":a,className:ue("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive-foreground data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/40 data-[variant=destructive]:focus:text-destructive-foreground data-[variant=destructive]:*:[svg]:!text-destructive-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",o),...d})}function Ag({className:o,children:l,checked:a,...d}){return C.jsxs(cd,{"data-slot":"dropdown-menu-checkbox-item",className:ue("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",o),checked:a,...d,children:[C.jsx("span",{className:"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center",children:C.jsx(ld,{children:C.jsx(sl,{className:"size-4"})})}),l]})}function xd({className:o,inset:l,...a}){return C.jsx(od,{"data-slot":"dropdown-menu-label","data-inset":l,className:ue("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",o),...a})}function Ls({className:o,...l}){return C.jsx(ud,{"data-slot":"dropdown-menu-separator",className:ue("bg-border -mx-1 my-1 h-px",o),...l})}var pi={exports:{}},mi={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ps;function pd(){if(Ps)return mi;Ps=1;var o=$c();function l(N,O){return N===O&&(N!==0||1/N===1/O)||N!==N&&O!==O}var a=typeof Object.is=="function"?Object.is:l,d=o.useState,h=o.useEffect,g=o.useLayoutEffect,A=o.useDebugValue;function b(N,O){var k=O(),Y=d({inst:{value:k,getSnapshot:O}}),F=Y[0].inst,X=Y[1];return g(function(){F.value=k,F.getSnapshot=O,T(F)&&X({inst:F})},[N,k,O]),h(function(){return T(F)&&X({inst:F}),N(function(){T(F)&&X({inst:F})})},[N]),A(k),k}function T(N){var O=N.getSnapshot;N=N.value;try{var k=O();return!a(N,k)}catch{return!0}}function p(N,O){return O()}var S=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:b;return mi.useSyncExternalStore=o.useSyncExternalStore!==void 0?o.useSyncExternalStore:S,mi}var Bs;function md(){return Bs||(Bs=1,pi.exports=pd()),pi.exports}var wd=md();function Cd(){return wd.useSyncExternalStore(Ad,()=>!0,()=>!1)}function Ad(){return()=>{}}var qi="Avatar",[Ed,Eg]=fn(qi),[bd,Ga]=Ed(qi),Wa=v.forwardRef((o,l)=>{const{__scopeAvatar:a,...d}=o,[h,g]=v.useState("idle");return C.jsx(bd,{scope:a,imageLoadingStatus:h,onImageLoadingStatusChange:g,children:C.jsx(ct.span,{...d,ref:l})})});Wa.displayName=qi;var Ya="AvatarImage",Xa=v.forwardRef((o,l)=>{const{__scopeAvatar:a,src:d,onLoadingStatusChange:h=()=>{},...g}=o,A=Ga(Ya,a),b=yd(d,g),T=ln(p=>{h(p),A.onImageLoadingStatusChange(p)});return tr(()=>{b!=="idle"&&T(b)},[b,T]),b==="loaded"?C.jsx(ct.img,{...g,ref:l,src:d}):null});Xa.displayName=Ya;var Za="AvatarFallback",Ka=v.forwardRef((o,l)=>{const{__scopeAvatar:a,delayMs:d,...h}=o,g=Ga(Za,a),[A,b]=v.useState(d===void 0);return v.useEffect(()=>{if(d!==void 0){const T=window.setTimeout(()=>b(!0),d);return()=>window.clearTimeout(T)}},[d]),A&&g.imageLoadingStatus!=="loaded"?C.jsx(ct.span,{...h,ref:l}):null});Ka.displayName=Za;function ks(o,l){return o?l?(o.src!==l&&(o.src=l),o.complete&&o.naturalWidth>0?"loaded":"loading"):"error":"idle"}function yd(o,{referrerPolicy:l,crossOrigin:a}){const d=Cd(),h=v.useRef(null),g=d?(h.current||(h.current=new window.Image),h.current):null,[A,b]=v.useState(()=>ks(g,o));return tr(()=>{b(ks(g,o))},[g,o]),tr(()=>{const T=N=>()=>{b(N)};if(!g)return;const p=T("loaded"),S=T("error");return g.addEventListener("load",p),g.addEventListener("error",S),l&&(g.referrerPolicy=l),typeof a=="string"&&(g.crossOrigin=a),()=>{g.removeEventListener("load",p),g.removeEventListener("error",S)}},[g,a,l]),A}var Id=Wa,Sd=Xa,Td=Ka;function Nd({className:o,...l}){return C.jsx(Id,{"data-slot":"avatar",className:ue("relative flex size-8 shrink-0 overflow-hidden rounded-full",o),...l})}function vd({className:o,...l}){return C.jsx(Sd,{"data-slot":"avatar-image",className:ue("aspect-square size-full",o),...l})}function Md({className:o,...l}){return C.jsx(Td,{"data-slot":"avatar-fallback",className:ue("bg-muted flex size-full items-center justify-center rounded-full",o),...l})}function _d(){return v.useCallback(l=>{const a=l.trim().split(" ");if(a.length===0)return"";if(a.length===1)return a[0].charAt(0).toUpperCase();const d=a[0].charAt(0),h=a[a.length-1].charAt(0);return`${d}${h}`.toUpperCase()},[])}function Qa({user:o,showEmail:l=!1}){const a=_d();return C.jsxs(C.Fragment,{children:[C.jsxs(Nd,{className:"h-8 w-8 overflow-hidden rounded-full",children:[C.jsx(vd,{src:o.avatar,alt:o.first_name}),C.jsx(Md,{className:"rounded-lg bg-neutral-200 text-black dark:bg-neutral-700 dark:text-white",children:a(o.first_name)})]}),C.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[C.jsx("span",{className:"truncate font-medium",children:`${o.first_name} ${o.last_name}`}),C.jsx("span",{className:"text-muted-foreground truncate text-sm",children:o.role.name}),l&&C.jsx("span",{className:"text-muted-foreground truncate text-xs",children:o.email})]})]})}function qa({...o}){return C.jsx(Po,{"data-slot":"dialog",...o})}function Ja({...o}){return C.jsx(C1,{"data-slot":"dialog-trigger",...o})}function Dd({...o}){return C.jsx(Bo,{"data-slot":"dialog-portal",...o})}function bg({...o}){return C.jsx(ki,{"data-slot":"dialog-close",...o})}function Rd({className:o,...l}){return C.jsx(ko,{"data-slot":"dialog-overlay",className:ue("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",o),...l})}function $a({className:o,children:l,...a}){return C.jsxs(Dd,{"data-slot":"dialog-portal",children:[C.jsx(Rd,{}),C.jsxs(Fo,{"data-slot":"dialog-content",className:ue("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",o),...a,children:[l,C.jsxs(ki,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[C.jsx(uo,{}),C.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ec({className:o,...l}){return C.jsx("div",{"data-slot":"dialog-header",className:ue("flex flex-col gap-2 text-center sm:text-left",o),...l})}function tc({className:o,...l}){return C.jsx("div",{"data-slot":"dialog-footer",className:ue("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",o),...l})}function nc({className:o,...l}){return C.jsx(jo,{"data-slot":"dialog-title",className:ue("text-lg leading-none font-semibold",o),...l})}function Od({className:o,...l}){return C.jsx(Uo,{"data-slot":"dialog-description",className:ue("text-muted-foreground text-sm",o),...l})}function Ld({cleanup:o}){const[l,a]=v.useState(!1),{post:d}=el(),h=()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur(),o(),d(route("logout")),a(!1)};return C.jsxs(qa,{open:l,onOpenChange:a,children:[C.jsx(Ja,{asChild:!0,children:C.jsxs(Pn,{variant:"ghost",className:"w-full justify-start",children:[C.jsx(Sl,{className:"mr-2"}),"Log out"]})}),C.jsxs($a,{children:[C.jsx(ec,{children:C.jsx(nc,{children:"Are you sure you want to log out?"})}),C.jsxs(tc,{className:"flex justify-end gap-2",children:[C.jsx(Pn,{variant:"secondary",onClick:()=>a(!1),children:"Cancel"}),C.jsx(Pn,{variant:"destructive",onClick:h,children:"Yes, Log out"})]})]})]})}function Pd(){return v.useCallback(()=>{document.body.style.removeProperty("pointer-events")},[])}function Bd({user:o}){const l=Pd();return C.jsxs(C.Fragment,{children:[C.jsx(xd,{className:"p-0 font-normal",children:C.jsx("div",{className:"flex items-center gap-2 px-1 py-1.5 text-left text-sm",children:C.jsx(Qa,{user:o,showEmail:!0})})}),C.jsx(Ls,{}),C.jsx(gd,{children:C.jsx(Os,{asChild:!0,children:C.jsxs(sr,{className:"block w-full",href:route("profile.edit"),as:"button",prefetch:!0,onClick:l,children:[C.jsx(jl,{className:"mr-2"}),"Settings"]})})}),C.jsx(Ls,{}),C.jsx(Os,{asChild:!0,children:C.jsx(Ld,{cleanup:l})})]})}function kd(){const{auth:o}=Si().props,{state:l}=Fr(),a=fo();return C.jsx(Ui,{children:C.jsx(jr,{children:C.jsxs(dd,{children:[C.jsx(fd,{asChild:!0,children:C.jsxs(Ur,{size:"lg",className:"text-sidebar-accent-foreground data-[state=open]:bg-sidebar-accent group",children:[C.jsx(Qa,{user:o.user}),C.jsx(pl,{className:"ml-auto size-4"})]})}),C.jsx(hd,{className:"w-(--radix-dropdown-menu-trigger-width) min-w-56 rounded-lg",align:"end",side:a?"bottom":l==="collapsed"?"left":"bottom",children:C.jsx(Bd,{user:o.user})})]})})})}function Fd(){return C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"text-sidebar-primary-foreground mb-1 flex aspect-square size-28 items-center justify-center rounded-[100%] bg-[#00964f] fill-current p-3",children:C.jsx(rl,{})}),C.jsxs("div",{className:"grid flex-1 text-center text-sm leading-tight",children:[C.jsx("span",{className:"truncate font-semibold",children:"VSU Motor Pool Services Office"}),C.jsx("span",{className:"truncate text-xs",children:"Fleet Management System"})]})]})}const jd=[{title:"Dashboard",href:"/dashboard",icon:yl},{title:"My Requests",href:"/services/requests?status=my-requests",icon:Ss,allowedRoles:["Driver"]},{title:"Services Requests",href:"/services",icon:Ss,allowedRoles:["Admin","Mechanic","Manager"],children:[{title:"All Requests",href:"/services/requests",allowedRoles:["Admin","Mechanic","Manager"]},{title:"Pending",href:"/services/requests?status=pending",allowedRoles:["Admin","Manager"]},{title:"Received",href:"/services/requests?status=received",allowedRoles:["Mechanic"]},{title:"Inspected",href:"/services/requests?status=inspected",allowedRoles:["Admin","Manager"]},{title:"Approved",href:"/services/requests?status=approved",allowedRoles:["Mechanic"]},{title:"Conducted",href:"/services/requests?status=conducted",allowedRoles:["Manager"]},{title:"Completed",href:"/services/requests?status=completed",allowedRoles:["Admin","Mechanic","Manager"]},{title:"Cancelled",href:"/services/requests?status=cancelled",allowedRoles:["Admin","Mechanic","Manager"]}]},{title:"Service Request Inspection",href:"/services/request-inspections",icon:Hl,allowedRoles:["Admin","Mechanic","Manager"]},{title:"Vehicles",href:"/vehicles",icon:Vl,allowedRoles:["Admin","Manager"]},{title:"Trips",href:"/vehicles/trips",icon:Nl,allowedRoles:["Admin","Driver","Manager"]},{title:"Maintenance Plans",href:"/plans",icon:Ml,allowedRoles:["Admin","Manager","Mechanic"]},{title:"Service Records",href:"#",icon:ll,allowedRoles:["Admin","Mechanic","Manager"],children:[{title:"Preventive Maintenance Records",href:"/preventive",allowedRoles:["Admin","Manager","Mechanic"]},{title:"Planned Maintenance Records",href:"/maintenance",allowedRoles:["Admin","Mechanic","Manager"]},{title:"Repair Records",href:"/repairs",allowedRoles:["Admin","Mechanic","Manager"]}]},{title:"Parts",href:"/parts",icon:Ol,allowedRoles:["Admin","Manager"]},{title:"Personnel",href:"/personnel",icon:Wl,allowedRoles:["Admin"]},{title:"Fleet Analytics",href:"/reports/fleet-analytics",icon:hl,allowedRoles:["Admin","Manager"]}];function Ud(){return C.jsxs(ou,{collapsible:"icon",variant:"inset",children:[C.jsx(lu,{children:C.jsx(Ui,{children:C.jsx(jr,{children:C.jsx(Ur,{size:null,asChild:!0,children:C.jsx(sr,{href:"/dashboard",prefetch:!0,className:"flex flex-col items-center",children:C.jsx(Fd,{})})})})})}),C.jsx(du,{children:C.jsx(vu,{items:jd})}),C.jsx(uu,{children:C.jsx(kd,{})})]})}function Hd({...o}){return C.jsx("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...o})}function zd({className:o,...l}){return C.jsx("ol",{"data-slot":"breadcrumb-list",className:ue("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",o),...l})}function Vd({className:o,...l}){return C.jsx("li",{"data-slot":"breadcrumb-item",className:ue("inline-flex items-center gap-1.5",o),...l})}function Gd({asChild:o,className:l,...a}){const d=o?Or:"a";return C.jsx(d,{"data-slot":"breadcrumb-link",className:ue("hover:text-foreground transition-colors",l),...a})}function Wd({className:o,...l}){return C.jsx("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:ue("text-foreground font-normal",o),...l})}function Yd({children:o,className:l,...a}){return C.jsx("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",className:ue("[&>svg]:size-3.5",l),...a,children:o??C.jsx(lo,{})})}function Xd({breadcrumbs:o}){return C.jsx(C.Fragment,{children:o.length>0&&C.jsx(Hd,{children:C.jsx(zd,{children:o.map((l,a)=>{const d=a===o.length-1;return C.jsxs(v.Fragment,{children:[C.jsx(Vd,{children:d?C.jsx(Wd,{children:l.title}):C.jsx(Gd,{asChild:!0,children:C.jsx(sr,{href:l.href,children:l.title})})}),!d&&C.jsx(Yd,{})]},a)})})})})}function Zd(o){const l=Kd(o),a=v.forwardRef((d,h)=>{const{children:g,...A}=d,b=v.Children.toArray(g),T=b.find(qd);if(T){const p=T.props.children,S=b.map(N=>N===T?v.Children.count(p)>1?v.Children.only(null):v.isValidElement(p)?p.props.children:null:N);return C.jsx(l,{...A,ref:h,children:v.isValidElement(p)?v.cloneElement(p,void 0,S):null})}return C.jsx(l,{...A,ref:h,children:g})});return a.displayName=`${o}.Slot`,a}function Kd(o){const l=v.forwardRef((a,d)=>{const{children:h,...g}=a,A=v.isValidElement(h)?$d(h):void 0,b=et(A,d);if(v.isValidElement(h)){const T=Jd(g,h.props);return h.type!==v.Fragment&&(T.ref=b),v.cloneElement(h,T)}return v.Children.count(h)>1?v.Children.only(null):null});return l.displayName=`${o}.SlotClone`,l}var Qd=Symbol("radix.slottable");function qd(o){return v.isValidElement(o)&&typeof o.type=="function"&&"__radixId"in o.type&&o.type.__radixId===Qd}function Jd(o,l){const a={...l};for(const d in l){const h=o[d],g=l[d];/^on[A-Z]/.test(d)?h&&g?a[d]=(...b)=>{const T=g(...b);return h(...b),T}:h&&(a[d]=h):d==="style"?a[d]={...h,...g}:d==="className"&&(a[d]=[h,g].filter(Boolean).join(" "))}return{...o,...a}}function $d(o){var d,h;let l=(d=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:d.get,a=l&&"isReactWarning"in l&&l.isReactWarning;return a?o.ref:(l=(h=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:h.get,a=l&&"isReactWarning"in l&&l.isReactWarning,a?o.props.ref:o.props.ref||o.ref)}var Wr="Popover",[rc,yg]=fn(Wr,[jn]),ur=jn(),[ef,hn]=rc(Wr),ic=o=>{const{__scopePopover:l,children:a,open:d,defaultOpen:h,onOpenChange:g,modal:A=!1}=o,b=ur(l),T=v.useRef(null),[p,S]=v.useState(!1),[N,O]=Fn({prop:d,defaultProp:h??!1,onChange:g,caller:Wr});return C.jsx(Mi,{...b,children:C.jsx(ef,{scope:l,contentId:Qt(),triggerRef:T,open:N,onOpenChange:O,onOpenToggle:v.useCallback(()=>O(k=>!k),[O]),hasCustomAnchor:p,onCustomAnchorAdd:v.useCallback(()=>S(!0),[]),onCustomAnchorRemove:v.useCallback(()=>S(!1),[]),modal:A,children:a})})};ic.displayName=Wr;var sc="PopoverAnchor",tf=v.forwardRef((o,l)=>{const{__scopePopover:a,...d}=o,h=hn(sc,a),g=ur(a),{onCustomAnchorAdd:A,onCustomAnchorRemove:b}=h;return v.useEffect(()=>(A(),()=>b()),[A,b]),C.jsx(Lr,{...g,...d,ref:l})});tf.displayName=sc;var oc="PopoverTrigger",ac=v.forwardRef((o,l)=>{const{__scopePopover:a,...d}=o,h=hn(oc,a),g=ur(a),A=et(l,h.triggerRef),b=C.jsx(ct.button,{type:"button","aria-haspopup":"dialog","aria-expanded":h.open,"aria-controls":h.contentId,"data-state":fc(h.open),...d,ref:A,onClick:oe(o.onClick,h.onOpenToggle)});return h.hasCustomAnchor?b:C.jsx(Lr,{asChild:!0,...g,children:b})});ac.displayName=oc;var Ji="PopoverPortal",[nf,rf]=rc(Ji,{forceMount:void 0}),cc=o=>{const{__scopePopover:l,forceMount:a,children:d,container:h}=o,g=hn(Ji,l);return C.jsx(nf,{scope:l,forceMount:a,children:C.jsx(Rt,{present:a||g.open,children:C.jsx(_i,{asChild:!0,container:h,children:d})})})};cc.displayName=Ji;var kn="PopoverContent",lc=v.forwardRef((o,l)=>{const a=rf(kn,o.__scopePopover),{forceMount:d=a.forceMount,...h}=o,g=hn(kn,o.__scopePopover);return C.jsx(Rt,{present:d||g.open,children:g.modal?C.jsx(of,{...h,ref:l}):C.jsx(af,{...h,ref:l})})});lc.displayName=kn;var sf=Zd("PopoverContent.RemoveScroll"),of=v.forwardRef((o,l)=>{const a=hn(kn,o.__scopePopover),d=v.useRef(null),h=et(l,d),g=v.useRef(!1);return v.useEffect(()=>{const A=d.current;if(A)return Ti(A)},[]),C.jsx(Ni,{as:sf,allowPinchZoom:!0,children:C.jsx(uc,{...o,ref:h,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:oe(o.onCloseAutoFocus,A=>{var b;A.preventDefault(),g.current||(b=a.triggerRef.current)==null||b.focus()}),onPointerDownOutside:oe(o.onPointerDownOutside,A=>{const b=A.detail.originalEvent,T=b.button===0&&b.ctrlKey===!0,p=b.button===2||T;g.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:oe(o.onFocusOutside,A=>A.preventDefault(),{checkForDefaultPrevented:!1})})})}),af=v.forwardRef((o,l)=>{const a=hn(kn,o.__scopePopover),d=v.useRef(!1),h=v.useRef(!1);return C.jsx(uc,{...o,ref:l,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:g=>{var A,b;(A=o.onCloseAutoFocus)==null||A.call(o,g),g.defaultPrevented||(d.current||(b=a.triggerRef.current)==null||b.focus(),g.preventDefault()),d.current=!1,h.current=!1},onInteractOutside:g=>{var T,p;(T=o.onInteractOutside)==null||T.call(o,g),g.defaultPrevented||(d.current=!0,g.detail.originalEvent.type==="pointerdown"&&(h.current=!0));const A=g.target;((p=a.triggerRef.current)==null?void 0:p.contains(A))&&g.preventDefault(),g.detail.originalEvent.type==="focusin"&&h.current&&g.preventDefault()}})}),uc=v.forwardRef((o,l)=>{const{__scopePopover:a,trapFocus:d,onOpenAutoFocus:h,onCloseAutoFocus:g,disableOutsidePointerEvents:A,onEscapeKeyDown:b,onPointerDownOutside:T,onFocusOutside:p,onInteractOutside:S,...N}=o,O=hn(kn,a),k=ur(a);return vi(),C.jsx(co,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:h,onUnmountAutoFocus:g,children:C.jsx(Ri,{asChild:!0,disableOutsidePointerEvents:A,onInteractOutside:S,onEscapeKeyDown:b,onPointerDownOutside:T,onFocusOutside:p,onDismiss:()=>O.onOpenChange(!1),children:C.jsx(Oi,{"data-state":fc(O.open),role:"dialog",id:O.contentId,...k,...N,ref:l,style:{...N.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),dc="PopoverClose",cf=v.forwardRef((o,l)=>{const{__scopePopover:a,...d}=o,h=hn(dc,a);return C.jsx(ct.button,{type:"button",...d,ref:l,onClick:oe(o.onClick,()=>h.onOpenChange(!1))})});cf.displayName=dc;var lf="PopoverArrow",uf=v.forwardRef((o,l)=>{const{__scopePopover:a,...d}=o,h=ur(a);return C.jsx(Di,{...h,...d,ref:l})});uf.displayName=lf;function fc(o){return o?"open":"closed"}var df=ic,ff=ac,hf=cc,gf=lc;function xf({...o}){return C.jsx(df,{"data-slot":"popover",...o})}function pf({...o}){return C.jsx(ff,{"data-slot":"popover-trigger",...o})}function mf({className:o,align:l="center",sideOffset:a=4,...d}){return C.jsx(hf,{children:C.jsx(gf,{"data-slot":"popover-content",align:l,sideOffset:a,className:ue("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",o),...d})})}const Ig=6048e5,Sg=864e5,Tg=6e4,Ng=36e5,vg=1e3,Sr=43200,Fs=1440,js=Symbol.for("constructDateFrom");function $i(o,l){return typeof o=="function"?o(l):o&&typeof o=="object"&&js in o?o[js](l):o instanceof Date?new o.constructor(l):new Date(l)}function un(o,l){return $i(l||o,o)}let wf={};function Cf(){return wf}function Us(o){const l=un(o),a=new Date(Date.UTC(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds()));return a.setUTCFullYear(l.getFullYear()),+o-+a}function es(o,...l){const a=$i.bind(null,o||l.find(d=>typeof d=="object"));return l.map(a)}function Tr(o,l){const a=+un(o)-+un(l);return a<0?-1:a>0?1:a}function Af(o){return $i(o,Date.now())}function Ef(o,l,a){const[d,h]=es(a==null?void 0:a.in,o,l),g=d.getFullYear()-h.getFullYear(),A=d.getMonth()-h.getMonth();return g*12+A}function bf(o){return l=>{const d=(o?Math[o]:Math.trunc)(l);return d===0?0:d}}function yf(o,l){return+un(o)-+un(l)}function If(o,l){const a=un(o,l==null?void 0:l.in);return a.setHours(23,59,59,999),a}function Sf(o,l){const a=un(o,l==null?void 0:l.in),d=a.getMonth();return a.setFullYear(a.getFullYear(),d+1,0),a.setHours(23,59,59,999),a}function Tf(o,l){const a=un(o,l==null?void 0:l.in);return+If(a,l)==+Sf(a,l)}function Nf(o,l,a){const[d,h,g]=es(a==null?void 0:a.in,o,o,l),A=Tr(h,g),b=Math.abs(Ef(h,g));if(b<1)return 0;h.getMonth()===1&&h.getDate()>27&&h.setDate(30),h.setMonth(h.getMonth()-A*b);let T=Tr(h,g)===-A;Tf(d)&&b===1&&Tr(d,g)===1&&(T=!1);const p=A*(b-+T);return p===0?0:p}function vf(o,l,a){const d=yf(o,l)/1e3;return bf(a==null?void 0:a.roundingMethod)(d)}const Mf={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_f=(o,l,a)=>{let d;const h=Mf[o];return typeof h=="string"?d=h:l===1?d=h.one:d=h.other.replace("{{count}}",l.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+d:d+" ago":d};function wi(o){return(l={})=>{const a=l.width?String(l.width):o.defaultWidth;return o.formats[a]||o.formats[o.defaultWidth]}}const Df={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Rf={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Of={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Lf={date:wi({formats:Df,defaultWidth:"full"}),time:wi({formats:Rf,defaultWidth:"full"}),dateTime:wi({formats:Of,defaultWidth:"full"})},Pf={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Bf=(o,l,a,d)=>Pf[o];function Qn(o){return(l,a)=>{const d=a!=null&&a.context?String(a.context):"standalone";let h;if(d==="formatting"&&o.formattingValues){const A=o.defaultFormattingWidth||o.defaultWidth,b=a!=null&&a.width?String(a.width):A;h=o.formattingValues[b]||o.formattingValues[A]}else{const A=o.defaultWidth,b=a!=null&&a.width?String(a.width):o.defaultWidth;h=o.values[b]||o.values[A]}const g=o.argumentCallback?o.argumentCallback(l):l;return h[g]}}const kf={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ff={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},jf={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Uf={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Hf={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},zf={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Vf=(o,l)=>{const a=Number(o),d=a%100;if(d>20||d<10)switch(d%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},Gf={ordinalNumber:Vf,era:Qn({values:kf,defaultWidth:"wide"}),quarter:Qn({values:Ff,defaultWidth:"wide",argumentCallback:o=>o-1}),month:Qn({values:jf,defaultWidth:"wide"}),day:Qn({values:Uf,defaultWidth:"wide"}),dayPeriod:Qn({values:Hf,defaultWidth:"wide",formattingValues:zf,defaultFormattingWidth:"wide"})};function qn(o){return(l,a={})=>{const d=a.width,h=d&&o.matchPatterns[d]||o.matchPatterns[o.defaultMatchWidth],g=l.match(h);if(!g)return null;const A=g[0],b=d&&o.parsePatterns[d]||o.parsePatterns[o.defaultParseWidth],T=Array.isArray(b)?Yf(b,N=>N.test(A)):Wf(b,N=>N.test(A));let p;p=o.valueCallback?o.valueCallback(T):T,p=a.valueCallback?a.valueCallback(p):p;const S=l.slice(A.length);return{value:p,rest:S}}}function Wf(o,l){for(const a in o)if(Object.prototype.hasOwnProperty.call(o,a)&&l(o[a]))return a}function Yf(o,l){for(let a=0;a<o.length;a++)if(l(o[a]))return a}function Xf(o){return(l,a={})=>{const d=l.match(o.matchPattern);if(!d)return null;const h=d[0],g=l.match(o.parsePattern);if(!g)return null;let A=o.valueCallback?o.valueCallback(g[0]):g[0];A=a.valueCallback?a.valueCallback(A):A;const b=l.slice(h.length);return{value:A,rest:b}}}const Zf=/^(\d+)(th|st|nd|rd)?/i,Kf=/\d+/i,Qf={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qf={any:[/^b/i,/^(a|c)/i]},Jf={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},$f={any:[/1/i,/2/i,/3/i,/4/i]},eh={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},th={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},nh={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rh={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ih={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},sh={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},oh={ordinalNumber:Xf({matchPattern:Zf,parsePattern:Kf,valueCallback:o=>parseInt(o,10)}),era:qn({matchPatterns:Qf,defaultMatchWidth:"wide",parsePatterns:qf,defaultParseWidth:"any"}),quarter:qn({matchPatterns:Jf,defaultMatchWidth:"wide",parsePatterns:$f,defaultParseWidth:"any",valueCallback:o=>o+1}),month:qn({matchPatterns:eh,defaultMatchWidth:"wide",parsePatterns:th,defaultParseWidth:"any"}),day:qn({matchPatterns:nh,defaultMatchWidth:"wide",parsePatterns:rh,defaultParseWidth:"any"}),dayPeriod:qn({matchPatterns:ih,defaultMatchWidth:"any",parsePatterns:sh,defaultParseWidth:"any"})},ah={code:"en-US",formatDistance:_f,formatLong:Lf,formatRelative:Bf,localize:Gf,match:oh,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ch(o,l,a){const d=Cf(),h=(a==null?void 0:a.locale)??d.locale??ah,g=2520,A=Tr(o,l);if(isNaN(A))throw new RangeError("Invalid time value");const b=Object.assign({},a,{addSuffix:a==null?void 0:a.addSuffix,comparison:A}),[T,p]=es(a==null?void 0:a.in,...A>0?[l,o]:[o,l]),S=vf(p,T),N=(Us(p)-Us(T))/1e3,O=Math.round((S-N)/60);let k;if(O<2)return a!=null&&a.includeSeconds?S<5?h.formatDistance("lessThanXSeconds",5,b):S<10?h.formatDistance("lessThanXSeconds",10,b):S<20?h.formatDistance("lessThanXSeconds",20,b):S<40?h.formatDistance("halfAMinute",0,b):S<60?h.formatDistance("lessThanXMinutes",1,b):h.formatDistance("xMinutes",1,b):O===0?h.formatDistance("lessThanXMinutes",1,b):h.formatDistance("xMinutes",O,b);if(O<45)return h.formatDistance("xMinutes",O,b);if(O<90)return h.formatDistance("aboutXHours",1,b);if(O<Fs){const Y=Math.round(O/60);return h.formatDistance("aboutXHours",Y,b)}else{if(O<g)return h.formatDistance("xDays",1,b);if(O<Sr){const Y=Math.round(O/Fs);return h.formatDistance("xDays",Y,b)}else if(O<Sr*2)return k=Math.round(O/Sr),h.formatDistance("aboutXMonths",k,b)}if(k=Nf(p,T),k<12){const Y=Math.round(O/Sr);return h.formatDistance("xMonths",Y,b)}else{const Y=k%12,F=Math.trunc(k/12);return Y<3?h.formatDistance("aboutXYears",F,b):Y<9?h.formatDistance("overXYears",F,b):h.formatDistance("almostXYears",F+1,b)}}function lh(o,l){return ch(o,Af(o),l)}function uh(){const[o,l]=Nr.useState([]);Nr.useEffect(()=>{ys.get("/notifications",{params:{limit:5}}).then(h=>{l(h.data)})},[]);const a=h=>{ys.put(`/notifications/${h}/read`).then(()=>{l(g=>g.map(A=>A.notification_id===h?{...A,is_read:!0}:A))})},d=o.filter(h=>!h.is_read).length;return C.jsxs(xf,{children:[C.jsx(pf,{asChild:!0,children:C.jsxs("button",{className:"flex size-7 items-center justify-center rounded-md bg-white drop-shadow-md",children:[C.jsx(Is,{className:"size-5",color:"green",fill:"green"}),d>0&&C.jsx("span",{className:"absolute top-0 right-0 rounded-full bg-red-500 px-1 text-xs text-white",children:d})]})}),C.jsxs(mf,{className:"mx-5 w-96 rounded-md bg-white p-2 shadow-lg",children:[C.jsx("h3",{className:"mb-2 text-sm font-semibold text-gray-700",children:"Notifications"}),o.length>0?C.jsx("div",{className:"h-48 gap-2 overflow-y-auto",children:o.map(h=>C.jsxs("div",{className:"flex flex-col items-center justify-between rounded-md p-2 hover:bg-gray-100",children:[C.jsxs("div",{className:`flex items-center text-sm ${h.is_read?"text-gray-400":"font-medium text-gray-700"}`,children:[h.is_read?C.jsx(wl,{className:"mr-2 h-4 w-4 text-green-500"}):C.jsx(Is,{className:"mr-2 h-4 w-4"}),C.jsxs("div",{className:"flex flex-col",children:[C.jsx("span",{className:"text-sm font-semibold",children:h.title}),C.jsx("span",{children:h.message})]}),!h.is_read&&C.jsx(Pn,{variant:"ghost",size:"icon",onClick:()=>a(h.notification_id),className:"ml-auto hover:text-green-500",children:C.jsx(Al,{className:"size-4"})})]},h.id),C.jsx("span",{className:"self-end text-xs text-gray-500",children:lh(new Date(h.created_at),{addSuffix:!0})})]}))}):C.jsx("p",{className:"text-sm text-gray-500",children:"No new notifications"})]})]})}function dh({breadcrumbs:o=[]}){return C.jsx("header",{className:"border-sidebar-border/50 flex h-16 shrink-0 items-center gap-2 border-b px-6 transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-12 md:px-4",children:C.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx(au,{className:"-ml-1"}),C.jsx(Xd,{breadcrumbs:o})]}),C.jsx("div",{className:"",children:C.jsx(uh,{})})]})})}function fh({details:o}){return C.jsxs("div",{children:[C.jsx("h1",{className:"text-base font-semibold",children:o.title}),C.jsx("span",{className:"text-muted-foreground text-sm",children:o.description})]})}var J;(function(o){o[o.QR_CODE=0]="QR_CODE",o[o.AZTEC=1]="AZTEC",o[o.CODABAR=2]="CODABAR",o[o.CODE_39=3]="CODE_39",o[o.CODE_93=4]="CODE_93",o[o.CODE_128=5]="CODE_128",o[o.DATA_MATRIX=6]="DATA_MATRIX",o[o.MAXICODE=7]="MAXICODE",o[o.ITF=8]="ITF",o[o.EAN_13=9]="EAN_13",o[o.EAN_8=10]="EAN_8",o[o.PDF_417=11]="PDF_417",o[o.RSS_14=12]="RSS_14",o[o.RSS_EXPANDED=13]="RSS_EXPANDED",o[o.UPC_A=14]="UPC_A",o[o.UPC_E=15]="UPC_E",o[o.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(J||(J={}));var Hs=new Map([[J.QR_CODE,"QR_CODE"],[J.AZTEC,"AZTEC"],[J.CODABAR,"CODABAR"],[J.CODE_39,"CODE_39"],[J.CODE_93,"CODE_93"],[J.CODE_128,"CODE_128"],[J.DATA_MATRIX,"DATA_MATRIX"],[J.MAXICODE,"MAXICODE"],[J.ITF,"ITF"],[J.EAN_13,"EAN_13"],[J.EAN_8,"EAN_8"],[J.PDF_417,"PDF_417"],[J.RSS_14,"RSS_14"],[J.RSS_EXPANDED,"RSS_EXPANDED"],[J.UPC_A,"UPC_A"],[J.UPC_E,"UPC_E"],[J.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),zs;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.URL=1]="URL"})(zs||(zs={}));function hh(o){return Object.values(J).includes(o)}var dn;(function(o){o[o.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",o[o.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(dn||(dn={}));var kt=function(){function o(){}return o.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",o.SCAN_DEFAULT_FPS=2,o.DEFAULT_DISABLE_FLIP=!1,o.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,o.DEFAULT_SUPPORTED_SCAN_TYPE=[dn.SCAN_TYPE_CAMERA,dn.SCAN_TYPE_FILE],o}(),hc=function(){function o(l,a){this.format=l,this.formatName=a}return o.prototype.toString=function(){return this.formatName},o.create=function(l){if(!Hs.has(l))throw"".concat(l," not in html5QrcodeSupportedFormatsTextMap");return new o(l,Hs.get(l))},o}(),Vs=function(){function o(){}return o.createFromText=function(l){var a={text:l};return{decodedText:l,result:a}},o.createFromQrcodeResult=function(l){return{decodedText:l.text,result:l}},o}(),Ii;(function(o){o[o.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",o[o.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",o[o.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Ii||(Ii={}));var gc=function(){function o(){}return o.createFrom=function(l){return{errorMessage:l,type:Ii.UNKWOWN_ERROR}},o}(),xc=function(){function o(l){this.verbose=l}return o.prototype.log=function(l){this.verbose&&console.log(l)},o.prototype.warn=function(l){this.verbose&&console.warn(l)},o.prototype.logError=function(l,a){(this.verbose||a===!0)&&console.error(l)},o.prototype.logErrors=function(l){if(l.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(l)},o}();function Xt(o){return typeof o>"u"||o===null}function gh(o,l,a){return o>a?a:o<l?l:o}var Ln=function(){function o(){}return o.codeParseError=function(l){return"QR code parse error, error = ".concat(l)},o.errorGettingUserMedia=function(l){return"Error getting userMedia, error = ".concat(l)},o.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},o.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},o.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},o.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},o.scannerPaused=function(){return"Scanner paused"},o}(),Se=function(){function o(){}return o.scanningStatus=function(){return"Scanning"},o.idleStatus=function(){return"Idle"},o.errorStatus=function(){return"Error"},o.permissionStatus=function(){return"Permission"},o.noCameraFoundErrorStatus=function(){return"No Cameras"},o.lastMatch=function(l){return"Last Match: ".concat(l)},o.codeScannerTitle=function(){return"Code Scanner"},o.cameraPermissionTitle=function(){return"Request Camera Permissions"},o.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},o.noCameraFound=function(){return"No camera found"},o.scanButtonStopScanningText=function(){return"Stop Scanning"},o.scanButtonStartScanningText=function(){return"Start Scanning"},o.torchOnButton=function(){return"Switch On Torch"},o.torchOffButton=function(){return"Switch Off Torch"},o.torchOnFailedMessage=function(){return"Failed to turn on torch"},o.torchOffFailedMessage=function(){return"Failed to turn off torch"},o.scanButtonScanningStarting=function(){return"Launching Camera..."},o.textIfCameraScanSelected=function(){return"Scan an Image File"},o.textIfFileScanSelected=function(){return"Scan using camera directly"},o.selectCamera=function(){return"Select Camera"},o.fileSelectionChooseImage=function(){return"Choose Image"},o.fileSelectionChooseAnother=function(){return"Choose Another"},o.fileSelectionNoImageSelected=function(){return"No image choosen"},o.anonymousCameraPrefix=function(){return"Anonymous Camera"},o.dragAndDropMessage=function(){return"Or drop an image to scan"},o.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},o.zoom=function(){return"zoom"},o.loadingImage=function(){return"Loading image..."},o.cameraScanAltText=function(){return"Camera based scan"},o.fileScanAltText=function(){return"Fule based scan"},o}(),Gs=function(){function o(){}return o.poweredBy=function(){return"Powered by "},o.reportIssues=function(){return"Report issues"},o}(),pc=function(){function o(){}return o.isMediaStreamConstraintsValid=function(l,a){if(typeof l!="object"){var d=typeof l;return a.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(d,"."),!0),!1}for(var h=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],g=new Set(h),A=Object.keys(l),b=0,T=A;b<T.length;b++){var p=T[b];if(g.has(p))return a.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},o}(),$n={exports:{}},xh=$n.exports,Ws;function ph(){return Ws||(Ws=1,function(o,l){(function(a,d){d(l)})(xh,function(a){function d(m){return m==null}var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,e){m.__proto__=e}||function(m,e){for(var t in e)e.hasOwnProperty(t)&&(m[t]=e[t])};function g(m,e){h(m,e);function t(){this.constructor=m}m.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function A(m,e){var t=Object.setPrototypeOf;t?t(m,e):m.__proto__=e}function b(m,e){e===void 0&&(e=m.constructor);var t=Error.captureStackTrace;t&&t(m,e)}var T=function(m){g(e,m);function e(t){var n=this.constructor,r=m.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),A(r,n.prototype),b(r),r}return e}(Error);class p extends T{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}p.kind="Exception";class S extends p{}S.kind="ArgumentException";class N extends p{}N.kind="IllegalArgumentException";class O{constructor(e){if(this.binarizer=e,e===null)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const i=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new O(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new O(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new O(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class k extends p{static getChecksumInstance(){return new k}}k.kind="ChecksumException";class Y{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class F{static arraycopy(e,t,n,r,i){for(;i--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class X extends p{}X.kind="IndexOutOfBoundsException";class Q extends X{constructor(e=void 0,t=void 0){super(t),this.index=e,this.message=t}}Q.kind="ArrayIndexOutOfBoundsException";class Z{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){Z.rangeCheck(e.length,t,n);for(let i=t;i<n;i++)e[i]=r}static rangeCheck(e,t,n){if(t>n)throw new N("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new Q(t);if(n>e)throw new Q(n)}static asList(...e){return e}static create(e,t,n){return Array.from({length:e}).map(i=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(i=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(e===null)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,i=new Int32Array(r);return F.arraycopy(e,t,i,0,r),i}static binarySearch(e,t,n){n===void 0&&(n=Z.numberComparator);let r=0,i=e.length-1;for(;r<=i;){const s=i+r>>1,c=n(t,e[s]);if(c>0)r=s+1;else if(c<0)i=s-1;else return s}return-r-1}static numberComparator(e,t){return e-t}}class W{static numberOfTrailingZeros(e){let t;if(e===0)return 32;let n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t=void 0){return parseInt(e,t)}}W.MIN_VALUE_32_BITS=-2147483648,W.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ${constructor(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=$.makeArray(e):this.bits=t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const t=$.makeArray(e);F.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=n[r];i&=~((1<<(e&31))-1);const s=n.length;for(;i===0;){if(++r===s)return t;i=n[r]}const c=r*32+W.numberOfTrailingZeros(i);return c>t?t:c}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=~n[r];i&=~((1<<(e&31))-1);const s=n.length;for(;i===0;){if(++r===s)return t;i=~n[r]}const c=r*32+W.numberOfTrailingZeros(i);return c>t?t:c}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new N;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),i=this.bits;for(let s=n;s<=r;s++){const c=s>n?0:e&31,f=(2<<(s<r?31:t&31))-(1<<c);i[s]|=f}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new N;if(t===e)return!0;t--;const r=Math.floor(e/32),i=Math.floor(t/32),s=this.bits;for(let c=r;c<=i;c++){const u=c>r?0:e&31,x=(2<<(c<i?31:t&31))-(1<<u)&4294967295;if((s[c]&x)!==(n?x:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,t){if(t<0||t>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new N("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let i=0;i<r;i++){let s=0;for(let c=0;c<8;c++)this.get(e)&&(s|=1<<7-c),e++;t[n+i]=s}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let i=0;i<n;i++){let s=r[i];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-i]=s}if(this.size!==n*32){const i=n*32-this.size;let s=e[0]>>>i;for(let c=1;c<n;c++){const u=e[c];s|=u<<32-i,e[c-1]=s,s=u>>>i}e[n-1]=s}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof $))return!1;const t=e;return this.size===t.size&&Z.equals(this.bits,t.bits)}hashCode(){return 31*this.size+Z.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new $(this.size,this.bits.slice())}}var Oe;(function(m){m[m.OTHER=0]="OTHER",m[m.PURE_BARCODE=1]="PURE_BARCODE",m[m.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",m[m.TRY_HARDER=3]="TRY_HARDER",m[m.CHARACTER_SET=4]="CHARACTER_SET",m[m.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",m[m.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",m[m.ASSUME_GS1=7]="ASSUME_GS1",m[m.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",m[m.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",m[m.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Oe||(Oe={}));var ge=Oe;class j extends p{static getFormatInstance(){return new j}}j.kind="FormatException";var ae;(function(m){m[m.Cp437=0]="Cp437",m[m.ISO8859_1=1]="ISO8859_1",m[m.ISO8859_2=2]="ISO8859_2",m[m.ISO8859_3=3]="ISO8859_3",m[m.ISO8859_4=4]="ISO8859_4",m[m.ISO8859_5=5]="ISO8859_5",m[m.ISO8859_6=6]="ISO8859_6",m[m.ISO8859_7=7]="ISO8859_7",m[m.ISO8859_8=8]="ISO8859_8",m[m.ISO8859_9=9]="ISO8859_9",m[m.ISO8859_10=10]="ISO8859_10",m[m.ISO8859_11=11]="ISO8859_11",m[m.ISO8859_13=12]="ISO8859_13",m[m.ISO8859_14=13]="ISO8859_14",m[m.ISO8859_15=14]="ISO8859_15",m[m.ISO8859_16=15]="ISO8859_16",m[m.SJIS=16]="SJIS",m[m.Cp1250=17]="Cp1250",m[m.Cp1251=18]="Cp1251",m[m.Cp1252=19]="Cp1252",m[m.Cp1256=20]="Cp1256",m[m.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",m[m.UTF8=22]="UTF8",m[m.ASCII=23]="ASCII",m[m.Big5=24]="Big5",m[m.GB18030=25]="GB18030",m[m.EUC_KR=26]="EUC_KR"})(ae||(ae={}));class z{constructor(e,t,n,...r){this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=r,z.VALUE_IDENTIFIER_TO_ECI.set(e,this),z.NAME_TO_ECI.set(n,this);const i=this.values;for(let s=0,c=i.length;s!==c;s++){const u=i[s];z.VALUES_TO_ECI.set(u,this)}for(const s of r)z.NAME_TO_ECI.set(s,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new j("incorect value");const t=z.VALUES_TO_ECI.get(e);if(t===void 0)throw new j("incorect value");return t}static getCharacterSetECIByName(e){const t=z.NAME_TO_ECI.get(e);if(t===void 0)throw new j("incorect value");return t}equals(e){if(!(e instanceof z))return!1;const t=e;return this.getName()===t.getName()}}z.VALUE_IDENTIFIER_TO_ECI=new Map,z.VALUES_TO_ECI=new Map,z.NAME_TO_ECI=new Map,z.Cp437=new z(ae.Cp437,Int32Array.from([0,2]),"Cp437"),z.ISO8859_1=new z(ae.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),z.ISO8859_2=new z(ae.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),z.ISO8859_3=new z(ae.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),z.ISO8859_4=new z(ae.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),z.ISO8859_5=new z(ae.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),z.ISO8859_6=new z(ae.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),z.ISO8859_7=new z(ae.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),z.ISO8859_8=new z(ae.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),z.ISO8859_9=new z(ae.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),z.ISO8859_10=new z(ae.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),z.ISO8859_11=new z(ae.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),z.ISO8859_13=new z(ae.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),z.ISO8859_14=new z(ae.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),z.ISO8859_15=new z(ae.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),z.ISO8859_16=new z(ae.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),z.SJIS=new z(ae.SJIS,20,"SJIS","Shift_JIS"),z.Cp1250=new z(ae.Cp1250,21,"Cp1250","windows-1250"),z.Cp1251=new z(ae.Cp1251,22,"Cp1251","windows-1251"),z.Cp1252=new z(ae.Cp1252,23,"Cp1252","windows-1252"),z.Cp1256=new z(ae.Cp1256,24,"Cp1256","windows-1256"),z.UnicodeBigUnmarked=new z(ae.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),z.UTF8=new z(ae.UTF8,26,"UTF8","UTF-8"),z.ASCII=new z(ae.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),z.Big5=new z(ae.Big5,28,"Big5"),z.GB18030=new z(ae.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),z.EUC_KR=new z(ae.EUC_KR,30,"EUC_KR","EUC-KR");class tt extends p{}tt.kind="UnsupportedOperationException";class Xe{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!Xe.isBrowser()&&e==="ISO-8859-1"}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof z?e:z.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(Xe.isDecodeFallbackSupported(n)){let r="";for(let i=0,s=e.length;i<s;i++){let c=e[i].toString(16);c.length<2&&(c="0"+c),r+="%"+c}return decodeURIComponent(r)}if(n.equals(z.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new tt(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(z.UTF8)||e.equals(z.ISO8859_1)||e.equals(z.ASCII)}static encodeFallback(e){const n=btoa(unescape(encodeURIComponent(e))).split(""),r=[];for(let i=0;i<n.length;i++)r.push(n[i].charCodeAt(0));return new Uint8Array(r)}}class ie{static castAsNonUtf8Char(e,t=null){const n=t?t.getName():this.ISO88591;return Xe.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(t!=null&&t.get(ge.CHARACTER_SET)!==void 0)return t.get(ge.CHARACTER_SET).toString();const n=e.length;let r=!0,i=!0,s=!0,c=0,u=0,f=0,x=0,w=0,E=0,I=0,M=0,_=0,D=0,P=0;const V=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let G=0;G<n&&(r||i||s);G++){const H=e[G]&255;s&&(c>0?(H&128)===0?s=!1:c--:(H&128)!==0&&((H&64)===0?s=!1:(c++,(H&32)===0?u++:(c++,(H&16)===0?f++:(c++,(H&8)===0?x++:s=!1))))),r&&(H>127&&H<160?r=!1:H>159&&(H<192||H===215||H===247)&&P++),i&&(w>0?H<64||H===127||H>252?i=!1:w--:H===128||H===160||H>239?i=!1:H>160&&H<224?(E++,M=0,I++,I>_&&(_=I)):H>127?(w++,I=0,M++,M>D&&(D=M)):(I=0,M=0))}return s&&c>0&&(s=!1),i&&w>0&&(i=!1),s&&(V||u+f+x>0)?ie.UTF8:i&&(ie.ASSUME_SHIFT_JIS||_>=3||D>=3)?ie.SHIFT_JIS:r&&i?_===2&&E===2||P*10>=n?ie.SHIFT_JIS:ie.ISO88591:r?ie.ISO88591:i?ie.SHIFT_JIS:s?ie.UTF8:ie.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let n=-1;function r(s,c,u,f,x,w){if(s==="%%")return"%";if(t[++n]===void 0)return;s=f?parseInt(f.substr(1)):void 0;let E=x?parseInt(x.substr(1)):void 0,I;switch(w){case"s":I=t[n];break;case"c":I=t[n][0];break;case"f":I=parseFloat(t[n]).toFixed(s);break;case"p":I=parseFloat(t[n]).toPrecision(s);break;case"e":I=parseFloat(t[n]).toExponential(s);break;case"x":I=parseInt(t[n]).toString(E||16);break;case"d":I=parseFloat(parseInt(t[n],E||10).toPrecision(s)).toFixed(0);break}I=typeof I=="object"?JSON.stringify(I):(+I).toString(E);let M=parseInt(u),_=u&&u[0]+""=="0"?"0":" ";for(;I.length<M;)I=c!==void 0?I+_:_+I;return I}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}static getBytes(e,t){return Xe.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}ie.SHIFT_JIS=z.SJIS.getName(),ie.GB2312="GB2312",ie.ISO88591=z.ISO8859_1.getName(),ie.EUC_JP="EUC_JP",ie.UTF8=z.UTF8.getName(),ie.PLATFORM_DEFAULT_ENCODING=ie.UTF8,ie.ASSUME_SHIFT_JIS=!1;class we{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ie.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class Fe{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,t==null&&(t=e),this.height=t,e<1||t<1)throw new N("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,r==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new Fe(n,t);for(let i=0;i<t;i++){const s=e[i];for(let c=0;c<n;c++)s[c]&&r.set(c,i)}return r}static parseFromString(e,t,n){if(e===null)throw new N("stringRepresentation cannot be null");const r=new Array(e.length);let i=0,s=0,c=-1,u=0,f=0;for(;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(i>s){if(c===-1)c=i-s;else if(i-s!==c)throw new N("row lengths do not match");s=i,u++}f++}else if(e.substring(f,f+t.length)===t)f+=t.length,r[i]=!0,i++;else if(e.substring(f,f+n.length)===n)f+=n.length,r[i]=!1,i++;else throw new N("illegal character encountered: "+e.substring(f));if(i>s){if(c===-1)c=i-s;else if(i-s!==c)throw new N("row lengths do not match");u++}const x=new Fe(c,u);for(let w=0;w<i;w++)r[w]&&x.set(Math.floor(w%c),Math.floor(w/c));return x}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new N("input matrix dimensions do not match");const t=new $(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,s=this.height;i<s;i++){const c=i*n,u=e.getRow(i,t).getBitArray();for(let f=0;f<n;f++)r[c+f]^=u[f]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new N("Left and top must be nonnegative");if(r<1||n<1)throw new N("Height and width must be at least 1");const i=e+n,s=t+r;if(s>this.height||i>this.width)throw new N("The region must fit inside the matrix");const c=this.rowSize,u=this.bits;for(let f=t;f<s;f++){const x=f*c;for(let w=e;w<i;w++)u[x+Math.floor(w/32)]|=1<<(w&31)&4294967295}}getRow(e,t){t==null||t.getSize()<this.width?t=new $(this.width):t.clear();const n=this.rowSize,r=this.bits,i=e*n;for(let s=0;s<n;s++)t.setBulk(s*32,r[i+s]);return t}setRow(e,t){F.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new $(e),r=new $(e);for(let i=0,s=Math.floor((t+1)/2);i<s;i++)n=this.getRow(i,n),r=this.getRow(t-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(t-1-i,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,r=this.bits;let i=e,s=t,c=-1,u=-1;for(let f=0;f<t;f++)for(let x=0;x<n;x++){const w=r[f*n+x];if(w!==0){if(f<s&&(s=f),f>u&&(u=f),x*32<i){let E=0;for(;(w<<31-E&4294967295)===0;)E++;x*32+E<i&&(i=x*32+E)}if(x*32+31>c){let E=31;for(;!(w>>>E);)E--;x*32+E>c&&(c=x*32+E)}}}return c<i||u<s?null:Int32Array.from([i,s,c-i+1,u-s+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;const r=n/e;let i=n%e*32;const s=t[n];let c=0;for(;(s<<31-c&4294967295)===0;)c++;return i+=c,Int32Array.from([i,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&t[n]===0;)n--;if(n<0)return null;const r=Math.floor(n/e);let i=Math.floor(n%e)*32;const s=t[n];let c=31;for(;!(s>>>c);)c--;return i+=c,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Fe))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Z.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Z.hashCode(this.bits),e}toString(e="X ",t="  ",n=`
`){return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new we;for(let i=0,s=this.height;i<s;i++){for(let c=0,u=this.width;c<u;c++)r.append(this.get(c,i)?e:t);r.append(n)}return r.toString()}clone(){return new Fe(this.width,this.height,this.rowSize,this.bits.slice())}}class B extends p{static getNotFoundInstance(){return new B}}B.kind="NotFoundException";class Te extends Y{constructor(e){super(e),this.luminances=Te.EMPTY,this.buckets=new Int32Array(Te.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();t==null||t.getSize()<r?t=new $(r):t.clear(),this.initArrays(r);const i=n.getRow(e,this.luminances),s=this.buckets;for(let u=0;u<r;u++)s[(i[u]&255)>>Te.LUMINANCE_SHIFT]++;const c=Te.estimateBlackPoint(s);if(r<3)for(let u=0;u<r;u++)(i[u]&255)<c&&t.set(u);else{let u=i[0]&255,f=i[1]&255;for(let x=1;x<r-1;x++){const w=i[x+1]&255;(f*4-u-w)/2<c&&t.set(x),u=f,f=w}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new Fe(t,n);this.initArrays(t);const i=this.buckets;for(let u=1;u<5;u++){const f=Math.floor(n*u/5),x=e.getRow(f,this.luminances),w=Math.floor(t*4/5);for(let E=Math.floor(t/5);E<w;E++){const I=x[E]&255;i[I>>Te.LUMINANCE_SHIFT]++}}const s=Te.estimateBlackPoint(i),c=e.getMatrix();for(let u=0;u<n;u++){const f=u*t;for(let x=0;x<t;x++)(c[f+x]&255)<s&&r.set(x,u)}return r}createBinarizer(e){return new Te(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<Te.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,i=0;for(let x=0;x<t;x++)e[x]>i&&(r=x,i=e[x]),e[x]>n&&(n=e[x]);let s=0,c=0;for(let x=0;x<t;x++){const w=x-r,E=e[x]*w*w;E>c&&(s=x,c=E)}if(r>s){const x=r;r=s,s=x}if(s-r<=t/16)throw new B;let u=s-1,f=-1;for(let x=s-1;x>r;x--){const w=x-r,E=w*w*(s-x)*(n-e[x]);E>f&&(u=x,f=E)}return u<<Te.LUMINANCE_SHIFT}}Te.LUMINANCE_BITS=5,Te.LUMINANCE_SHIFT=8-Te.LUMINANCE_BITS,Te.LUMINANCE_BUCKETS=1<<Te.LUMINANCE_BITS,Te.EMPTY=Uint8ClampedArray.from([0]);class de extends Te{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=de.MINIMUM_DIMENSION&&n>=de.MINIMUM_DIMENSION){const r=e.getMatrix();let i=t>>de.BLOCK_SIZE_POWER;(t&de.BLOCK_SIZE_MASK)!==0&&i++;let s=n>>de.BLOCK_SIZE_POWER;(n&de.BLOCK_SIZE_MASK)!==0&&s++;const c=de.calculateBlackPoints(r,i,s,t,n),u=new Fe(t,n);de.calculateThresholdForBlock(r,i,s,t,n,c,u),this.matrix=u}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new de(e)}static calculateThresholdForBlock(e,t,n,r,i,s,c){const u=i-de.BLOCK_SIZE,f=r-de.BLOCK_SIZE;for(let x=0;x<n;x++){let w=x<<de.BLOCK_SIZE_POWER;w>u&&(w=u);const E=de.cap(x,2,n-3);for(let I=0;I<t;I++){let M=I<<de.BLOCK_SIZE_POWER;M>f&&(M=f);const _=de.cap(I,2,t-3);let D=0;for(let V=-2;V<=2;V++){const G=s[E+V];D+=G[_-2]+G[_-1]+G[_]+G[_+1]+G[_+2]}const P=D/25;de.thresholdBlock(e,M,w,P,r,c)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,i,s){for(let c=0,u=n*i+t;c<de.BLOCK_SIZE;c++,u+=i)for(let f=0;f<de.BLOCK_SIZE;f++)(e[u+f]&255)<=r&&s.set(t+f,n+c)}static calculateBlackPoints(e,t,n,r,i){const s=i-de.BLOCK_SIZE,c=r-de.BLOCK_SIZE,u=new Array(n);for(let f=0;f<n;f++){u[f]=new Int32Array(t);let x=f<<de.BLOCK_SIZE_POWER;x>s&&(x=s);for(let w=0;w<t;w++){let E=w<<de.BLOCK_SIZE_POWER;E>c&&(E=c);let I=0,M=255,_=0;for(let P=0,V=x*r+E;P<de.BLOCK_SIZE;P++,V+=r){for(let G=0;G<de.BLOCK_SIZE;G++){const H=e[V+G]&255;I+=H,H<M&&(M=H),H>_&&(_=H)}if(_-M>de.MIN_DYNAMIC_RANGE)for(P++,V+=r;P<de.BLOCK_SIZE;P++,V+=r)for(let G=0;G<de.BLOCK_SIZE;G++)I+=e[V+G]&255}let D=I>>de.BLOCK_SIZE_POWER*2;if(_-M<=de.MIN_DYNAMIC_RANGE&&(D=M/2,f>0&&w>0)){const P=(u[f-1][w]+2*u[f][w-1]+u[f-1][w-1])/4;M<P&&(D=P)}u[f][w]=D}}return u}}de.BLOCK_SIZE_POWER=3,de.BLOCK_SIZE=1<<de.BLOCK_SIZE_POWER,de.BLOCK_SIZE_MASK=de.BLOCK_SIZE-1,de.MINIMUM_DIMENSION=de.BLOCK_SIZE*5,de.MIN_DYNAMIC_RANGE=24;class Tt{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new tt("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new tt("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new tt("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new we;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let i=0;i<this.width;i++){const s=r[i]&255;let c;s<64?c="#":s<128?c="+":s<192?c=".":c=" ",t.append(c)}t.append(`
`)}return t.toString()}}class ce extends Tt{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let i=0;i<r;i++)n[i]=255-(n[i]&255);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(e[r]&255);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new ce(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ce(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ce(this.delegate.rotateCounterClockwise45())}}class Ge extends Tt{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=Ge.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return Ge.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let i=0,s=0,c=e.length;i<c;i+=4,s++){let u;if(e[i+3]===0)u=255;else{const x=e[i],w=e[i+1],E=e[i+2];u=306*x+601*w+117*E+512>>10}r[s]=u}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return t===null?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*Ge.DEGREE_TO_RADIANS,i=this.canvas.width,s=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*s),u=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*s);return t.width=c,t.height=u,n.translate(c/2,u/2),n.rotate(r),n.drawImage(this.canvas,i/-2,s/-2),this.buffer=Ge.makeBufferFromCanvasImageData(t),this}invert(){return new ce(this)}}Ge.DEGREE_TO_RADIANS=Math.PI/180;class Et{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Be=(globalThis||Ir||self||window||void 0)&&(globalThis||Ir||self||window||void 0).__awaiter||function(m,e,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function c(x){try{f(n.next(x))}catch(w){s(w)}}function u(x){try{f(n.throw(x))}catch(w){s(w)}}function f(x){x.done?i(x.value):r(x.value).then(c,u)}f((n=n.apply(m,e||[])).next())})};class Ot{constructor(e,t=500,n){this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return Be(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const r=n.kind==="video"?"videoinput":n.kind;if(r!=="videoinput")continue;const i=n.deviceId||n.id,s=n.label||`Video device ${t.length+1}`,c=n.groupId,u={deviceId:i,label:s,kind:r,groupId:c};t.push(u)}return t})}getVideoInputDevices(){return Be(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new Et(t.deviceId,t.label))})}findDeviceById(e){return Be(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(n=>n.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return Be(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return Be(this,void 0,void 0,function*(){this.reset();let n;e?n={deviceId:{exact:e}}:n={facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return Be(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return Be(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return Be(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return Be(this,void 0,void 0,function*(){let r;e?r={deviceId:{exact:e}}:r={facingMode:"environment"};const i={video:r};return yield this.decodeFromConstraints(i,t,n)})}decodeFromConstraints(e,t,n){return Be(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return Be(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return Be(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return Be(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new S(`element with id '${e}' not found`);if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new S(`element with id '${e}' must be an ${t} element`);return n}decodeFromImage(e,t){if(!e&&!t)throw new S("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new S("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(e===void 0&&t===void 0)throw new S("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new S("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);this.imageElement=t;let n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new S("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new S("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return Be(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return Be(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,n=!0){this._stopAsyncDecode=!1;const r=(i,s)=>{if(this._stopAsyncDecode){s(new B("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const c=this.decode(e);i(c)}catch(c){const u=t&&c instanceof B,x=(c instanceof k||c instanceof j)&&n;if(u||x)return setTimeout(r,this._timeBetweenDecodingAttempts,i,s);s(c)}};return new Promise((i,s)=>r(i,s))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r);const i=r instanceof k||r instanceof j,s=r instanceof B;(i||s)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,n=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new Ge(t),r=new de(n);return new O(r)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const n=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class Qe{constructor(e,t,n=t==null?0:8*t.length,r,i,s=F.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=s,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=r,this.format=i,this.resultMetadata=null,s==null?this.timestamp=F.currentTimeMillis():this.timestamp=s}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){const n=new Array(t.length+e.length);F.arraycopy(t,0,n,0,t.length),F.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}var yn;(function(m){m[m.AZTEC=0]="AZTEC",m[m.CODABAR=1]="CODABAR",m[m.CODE_39=2]="CODE_39",m[m.CODE_93=3]="CODE_93",m[m.CODE_128=4]="CODE_128",m[m.DATA_MATRIX=5]="DATA_MATRIX",m[m.EAN_8=6]="EAN_8",m[m.EAN_13=7]="EAN_13",m[m.ITF=8]="ITF",m[m.MAXICODE=9]="MAXICODE",m[m.PDF_417=10]="PDF_417",m[m.QR_CODE=11]="QR_CODE",m[m.RSS_14=12]="RSS_14",m[m.RSS_EXPANDED=13]="RSS_EXPANDED",m[m.UPC_A=14]="UPC_A",m[m.UPC_E=15]="UPC_E",m[m.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(yn||(yn={}));var te=yn,jt;(function(m){m[m.OTHER=0]="OTHER",m[m.ORIENTATION=1]="ORIENTATION",m[m.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",m[m.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",m[m.ISSUE_NUMBER=4]="ISSUE_NUMBER",m[m.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",m[m.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",m[m.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",m[m.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",m[m.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",m[m.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(jt||(jt={}));var We=jt;class dt{constructor(e,t,n,r,i=-1,s=-1){this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Jt{exp(e){return this.expTable[e]}log(e){if(e===0)throw new N;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class xt{constructor(e,t){if(t.length===0)throw new N;this.field=e;const n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-r),F.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const t=this.coefficients;let n;if(e===1){n=0;for(let s=0,c=t.length;s!==c;s++){const u=t[s];n=Jt.addOrSubtract(n,u)}return n}n=t[0];const r=t.length,i=this.field;for(let s=1;s<r;s++)n=Jt.addOrSubtract(i.multiply(e,n),t[s]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const s=t;t=n,n=s}let r=new Int32Array(n.length);const i=n.length-t.length;F.arraycopy(n,0,r,0,i);for(let s=i;s<n.length;s++)r[s]=Jt.addOrSubtract(t[s-i],n[s]);return new xt(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1),c=this.field;for(let u=0;u<n;u++){const f=t[u];for(let x=0;x<i;x++)s[u+x]=Jt.addOrSubtract(s[u+x],c.multiply(f,r[x]))}return new xt(c,s)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),i=this.coefficients;for(let s=0;s<t;s++)r[s]=n.multiply(i[s],e);return new xt(n,r)}multiplyByMonomial(e,t){if(e<0)throw new N;if(t===0)return this.field.getZero();const n=this.coefficients,r=n.length,i=new Int32Array(r+e),s=this.field;for(let c=0;c<r;c++)i[c]=s.multiply(n[c],t);return new xt(s,i)}divide(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new N("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const i=e.getCoefficient(e.getDegree()),s=t.inverse(i);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const c=r.getDegree()-e.getDegree(),u=t.multiply(r.getCoefficient(r.getDegree()),s),f=e.multiplyByMonomial(c,u),x=t.buildMonomial(c,u);n=n.addOrSubtract(x),r=r.addOrSubtract(f)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){const r=this.field.log(n);r===0?e+="1":r===1?e+="a":(e+="a^",e+=r)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e}}class dr extends p{}dr.kind="ArithmeticException";class Ee extends Jt{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let i=1;for(let c=0;c<t;c++)r[c]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=r;const s=new Int32Array(t);for(let c=0;c<t-1;c++)s[r[c]]=c;this.logTable=s,this.zero=new xt(this,Int32Array.from([0])),this.one=new xt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new N;if(t===0)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new xt(this,n)}inverse(e){if(e===0)throw new dr;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+W.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}Ee.AZTEC_DATA_12=new Ee(4201,4096,1),Ee.AZTEC_DATA_10=new Ee(1033,1024,1),Ee.AZTEC_DATA_6=new Ee(67,64,1),Ee.AZTEC_PARAM=new Ee(19,16,1),Ee.QR_CODE_FIELD_256=new Ee(285,256,0),Ee.DATA_MATRIX_FIELD_256=new Ee(301,256,1),Ee.AZTEC_DATA_8=Ee.DATA_MATRIX_FIELD_256,Ee.MAXICODE_FIELD_64=Ee.AZTEC_DATA_6;class In extends p{}In.kind="ReedSolomonException";class Ut extends p{}Ut.kind="IllegalStateException";class Un{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new xt(n,e),i=new Int32Array(t);let s=!0;for(let I=0;I<t;I++){const M=r.evaluateAt(n.exp(I+n.getGeneratorBase()));i[i.length-1-I]=M,M!==0&&(s=!1)}if(s)return;const c=new xt(n,i),u=this.runEuclideanAlgorithm(n.buildMonomial(t,1),c,t),f=u[0],x=u[1],w=this.findErrorLocations(f),E=this.findErrorMagnitudes(x,w);for(let I=0;I<w.length;I++){const M=e.length-1-n.log(w[I]);if(M<0)throw new In("Bad error location");e[M]=Ee.addOrSubtract(e[M],E[I])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const I=e;e=t,t=I}const r=this.field;let i=e,s=t,c=r.getZero(),u=r.getOne();for(;s.getDegree()>=(n/2|0);){let I=i,M=c;if(i=s,c=u,i.isZero())throw new In("r_{i-1} was zero");s=I;let _=r.getZero();const D=i.getCoefficient(i.getDegree()),P=r.inverse(D);for(;s.getDegree()>=i.getDegree()&&!s.isZero();){const V=s.getDegree()-i.getDegree(),G=r.multiply(s.getCoefficient(s.getDegree()),P);_=_.addOrSubtract(r.buildMonomial(V,G)),s=s.addOrSubtract(i.multiplyByMonomial(V,G))}if(u=_.multiply(c).addOrSubtract(M),s.getDegree()>=i.getDegree())throw new Ut("Division algorithm failed to reduce polynomial?")}const f=u.getCoefficient(0);if(f===0)throw new In("sigmaTilde(0) was zero");const x=r.inverse(f),w=u.multiplyScalar(x),E=s.multiplyScalar(x);return[w,E]}findErrorLocations(e){const t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const i=this.field;for(let s=1;s<i.getSize()&&r<t;s++)e.evaluateAt(s)===0&&(n[r]=i.inverse(s),r++);if(r!==t)throw new In("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),i=this.field;for(let s=0;s<n;s++){const c=i.inverse(t[s]);let u=1;for(let f=0;f<n;f++)if(s!==f){const x=i.multiply(t[f],c),w=(x&1)===0?x|1:x&-2;u=i.multiply(u,w)}r[s]=i.multiply(e.evaluateAt(c),i.inverse(u)),i.getGeneratorBase()!==0&&(r[s]=i.multiply(r[s],c))}return r}}var it;(function(m){m[m.UPPER=0]="UPPER",m[m.LOWER=1]="LOWER",m[m.MIXED=2]="MIXED",m[m.DIGIT=3]="DIGIT",m[m.PUNCT=4]="PUNCT",m[m.BINARY=5]="BINARY"})(it||(it={}));class De{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),i=De.convertBoolArrayToByteArray(r),s=De.getEncodedData(r),c=new dt(i,s,null,null);return c.setNumBits(r.length),c}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=it.UPPER,r=it.UPPER,i="",s=0;for(;s<t;)if(r===it.BINARY){if(t-s<5)break;let c=De.readCode(e,s,5);if(s+=5,c===0){if(t-s<11)break;c=De.readCode(e,s,11)+31,s+=11}for(let u=0;u<c;u++){if(t-s<8){s=t;break}const f=De.readCode(e,s,8);i+=ie.castAsNonUtf8Char(f),s+=8}r=n}else{let c=r===it.DIGIT?4:5;if(t-s<c)break;let u=De.readCode(e,s,c);s+=c;let f=De.getCharacter(r,u);f.startsWith("CTRL_")?(n=r,r=De.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=r)):(i+=f,r=n)}return i}static getTable(e){switch(e){case"L":return it.LOWER;case"P":return it.PUNCT;case"M":return it.MIXED;case"D":return it.DIGIT;case"B":return it.BINARY;case"U":default:return it.UPPER}}static getCharacter(e,t){switch(e){case it.UPPER:return De.UPPER_TABLE[t];case it.LOWER:return De.LOWER_TABLE[t];case it.MIXED:return De.MIXED_TABLE[t];case it.PUNCT:return De.PUNCT_TABLE[t];case it.DIGIT:return De.DIGIT_TABLE[t];default:throw new Ut("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=Ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=Ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=Ee.AZTEC_DATA_10):(n=12,t=Ee.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),i=e.length/n;if(i<r)throw new j;let s=e.length%n,c=new Int32Array(i);for(let E=0;E<i;E++,s+=n)c[E]=De.readCode(e,s,n);try{new Un(t).decode(c,i-r)}catch(E){throw new j(E)}let u=(1<<n)-1,f=0;for(let E=0;E<r;E++){let I=c[E];if(I===0||I===u)throw new j;(I===1||I===u-1)&&f++}let x=new Array(r*n-f),w=0;for(let E=0;E<r;E++){let I=c[E];if(I===1||I===u-1)x.fill(I>1,w,w+n-1),w+=n-1;else for(let M=n-1;M>=0;--M)x[w++]=(I&1<<M)!==0}return x}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+n*4,i=new Int32Array(r),s=new Array(this.totalBitsInLayer(n,t));if(t)for(let c=0;c<i.length;c++)i[c]=c;else{let c=r+1+2*W.truncDivision(W.truncDivision(r,2)-1,15),u=r/2,f=W.truncDivision(c,2);for(let x=0;x<u;x++){let w=x+W.truncDivision(x,15);i[u-x-1]=f-w-1,i[u+x]=f+w+1}}for(let c=0,u=0;c<n;c++){let f=(n-c)*4+(t?9:12),x=c*2,w=r-1-x;for(let E=0;E<f;E++){let I=E*2;for(let M=0;M<2;M++)s[u+I+M]=e.get(i[x+M],i[x+E]),s[u+2*f+I+M]=e.get(i[x+E],i[w-M]),s[u+4*f+I+M]=e.get(i[w-M],i[w-E]),s[u+6*f+I+M]=e.get(i[w-E],i[x+M])}u+=f*8}return s}static readCode(e,t,n){let r=0;for(let i=t;i<t+n;i++)r<<=1,e[i]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?De.readCode(e,t,8):De.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=De.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}De.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],De.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],De.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],De.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],De.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ce{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const i=e-n,s=t-r;return Math.sqrt(i*i+s*s)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++){const i=e[n];t+=i}return t}}class fr{static floatToIntBits(e){return e}}fr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ee{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof ee){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*fr.floatToIntBits(this.x)+fr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let i,s,c;if(n>=t&&n>=r?(s=e[0],i=e[1],c=e[2]):r>=n&&r>=t?(s=e[1],i=e[0],c=e[2]):(s=e[2],i=e[0],c=e[1]),this.crossProductZ(i,s,c)<0){const u=i;i=c,c=u}e[0]=i,e[1]=s,e[2]=c}static distance(e,t){return Ce.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}}class hr{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class rs extends hr{constructor(e,t,n,r,i){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Zt{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=Zt.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),r==null&&(r=e.getHeight()/2|0);const i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=r-i,this.downInit=r+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new B}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,i=!1,s=!0,c=!1,u=!1,f=!1,x=!1,w=!1;const E=this.width,I=this.height;for(;s;){s=!1;let M=!0;for(;(M||!u)&&t<E;)M=this.containsBlackPoint(n,r,t,!1),M?(t++,s=!0,u=!0):u||t++;if(t>=E){i=!0;break}let _=!0;for(;(_||!f)&&r<I;)_=this.containsBlackPoint(e,t,r,!0),_?(r++,s=!0,f=!0):f||r++;if(r>=I){i=!0;break}let D=!0;for(;(D||!x)&&e>=0;)D=this.containsBlackPoint(n,r,e,!1),D?(e--,s=!0,x=!0):x||e--;if(e<0){i=!0;break}let P=!0;for(;(P||!w)&&n>=0;)P=this.containsBlackPoint(e,t,n,!0),P?(n--,s=!0,w=!0):w||n--;if(n<0){i=!0;break}s&&(c=!0)}if(!i&&c){const M=t-e;let _=null;for(let G=1;_===null&&G<M;G++)_=this.getBlackPointOnSegment(e,r-G,e+G,r);if(_==null)throw new B;let D=null;for(let G=1;D===null&&G<M;G++)D=this.getBlackPointOnSegment(e,n+G,e+G,n);if(D==null)throw new B;let P=null;for(let G=1;P===null&&G<M;G++)P=this.getBlackPointOnSegment(t,n+G,t-G,n);if(P==null)throw new B;let V=null;for(let G=1;V===null&&G<M;G++)V=this.getBlackPointOnSegment(t,r-G,t-G,r);if(V==null)throw new B;return this.centerEdges(V,_,P,D)}else throw new B}getBlackPointOnSegment(e,t,n,r){const i=Ce.round(Ce.distance(e,t,n,r)),s=(n-e)/i,c=(r-t)/i,u=this.image;for(let f=0;f<i;f++){const x=Ce.round(e+f*s),w=Ce.round(t+f*c);if(u.get(x,w))return new ee(x,w)}return null}centerEdges(e,t,n,r){const i=e.getX(),s=e.getY(),c=t.getX(),u=t.getY(),f=n.getX(),x=n.getY(),w=r.getX(),E=r.getY(),I=Zt.CORR;return i<this.width/2?[new ee(w-I,E+I),new ee(c+I,u+I),new ee(f-I,x-I),new ee(i+I,s-I)]:[new ee(w+I,E+I),new ee(c+I,u-I),new ee(f-I,x+I),new ee(i-I,s-I)]}containsBlackPoint(e,t,n,r){const i=this.image;if(r){for(let s=e;s<=t;s++)if(i.get(s,n))return!0}else for(let s=e;s<=t;s++)if(i.get(n,s))return!0;return!1}}Zt.INIT_SIZE=10,Zt.CORR=1;class Yr{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let i=!0;for(let s=0;s<t.length&&i;s+=2){const c=Math.floor(t[s]),u=Math.floor(t[s+1]);if(c<-1||c>n||u<-1||u>r)throw new B;i=!1,c===-1?(t[s]=0,i=!0):c===n&&(t[s]=n-1,i=!0),u===-1?(t[s+1]=0,i=!0):u===r&&(t[s+1]=r-1,i=!0)}i=!0;for(let s=t.length-2;s>=0&&i;s-=2){const c=Math.floor(t[s]),u=Math.floor(t[s+1]);if(c<-1||c>n||u<-1||u>r)throw new B;i=!1,c===-1?(t[s]=0,i=!0):c===n&&(t[s]=n-1,i=!0),u===-1?(t[s+1]=0,i=!0):u===r&&(t[s+1]=r-1,i=!0)}}}class Lt{constructor(e,t,n,r,i,s,c,u,f){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=s,this.a13=c,this.a23=u,this.a33=f}static quadrilateralToQuadrilateral(e,t,n,r,i,s,c,u,f,x,w,E,I,M,_,D){const P=Lt.quadrilateralToSquare(e,t,n,r,i,s,c,u);return Lt.squareToQuadrilateral(f,x,w,E,I,M,_,D).times(P)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,i=this.a13,s=this.a21,c=this.a22,u=this.a23,f=this.a31,x=this.a32,w=this.a33;for(let E=0;E<t;E+=2){const I=e[E],M=e[E+1],_=i*I+u*M+w;e[E]=(n*I+s*M+f)/_,e[E+1]=(r*I+c*M+x)/_}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,i=this.a13,s=this.a21,c=this.a22,u=this.a23,f=this.a31,x=this.a32,w=this.a33,E=e.length;for(let I=0;I<E;I++){const M=e[I],_=t[I],D=i*M+u*_+w;e[I]=(n*M+s*_+f)/D,t[I]=(r*M+c*_+x)/D}}static squareToQuadrilateral(e,t,n,r,i,s,c,u){const f=e-n+i-c,x=t-r+s-u;if(f===0&&x===0)return new Lt(n-e,i-n,e,r-t,s-r,t,0,0,1);{const w=n-i,E=c-i,I=r-s,M=u-s,_=w*M-E*I,D=(f*M-E*x)/_,P=(w*x-f*I)/_;return new Lt(n-e+D*n,c-e+P*c,e,r-t+D*r,u-t+P*u,t,D,P,1)}}static quadrilateralToSquare(e,t,n,r,i,s,c,u){return Lt.squareToQuadrilateral(e,t,n,r,i,s,c,u).buildAdjoint()}buildAdjoint(){return new Lt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new Lt(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class is extends Yr{sampleGrid(e,t,n,r,i,s,c,u,f,x,w,E,I,M,_,D,P,V,G){const H=Lt.quadrilateralToQuadrilateral(r,i,s,c,u,f,x,w,E,I,M,_,D,P,V,G);return this.sampleGridWithTransform(e,t,n,H)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new B;const i=new Fe(t,n),s=new Float32Array(2*t);for(let c=0;c<n;c++){const u=s.length,f=c+.5;for(let x=0;x<u;x+=2)s[x]=x/2+.5,s[x+1]=f;r.transformPoints(s),Yr.checkAndNudgePoints(e,s);try{for(let x=0;x<u;x+=2)e.get(Math.floor(s[x]),Math.floor(s[x+1]))&&i.set(x/2,c)}catch{throw new B}}return i}}class $t{static setGridSampler(e){$t.gridSampler=e}static getInstance(){return $t.gridSampler}}$t.gridSampler=new is;class ft{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new ee(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ss{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let s=n[0];n[0]=n[2],n[2]=s}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new rs(r,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new B;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let s=0;s<4;s++){let c=n[(this.shift+s)%4];this.compact?(r<<=7,r+=c>>1&127):(r<<=10,r+=(c>>2&992)+(c>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=(i>>6)+1,this.nbDataBlocks=(i&63)+1):(this.nbLayers=(i>>11)+1,this.nbDataBlocks=(i&2047)+1)}getRotation(e,t){let n=0;e.forEach((r,i,s)=>{let c=(r>>t-2<<1)+(r&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(let r=0;r<4;r++)if(W.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new B}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let i=n-r,s=new Int32Array(n);for(let u=n-1;u>=0;--u)s[u]=e&15,e>>=4;try{new Un(Ee.AZTEC_PARAM).decode(s,i)}catch{throw new B}let c=0;for(let u=0;u<r;u++)c=(c<<4)+s[u];return c}getBullsEyeCorners(e){let t=e,n=e,r=e,i=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let w=this.getFirstDifferent(t,s,1,-1),E=this.getFirstDifferent(n,s,1,1),I=this.getFirstDifferent(r,s,-1,1),M=this.getFirstDifferent(i,s,-1,-1);if(this.nbCenterLayers>2){let _=this.distancePoint(M,w)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(_<.75||_>1.25||!this.isWhiteOrBlackRectangle(w,E,I,M))break}t=w,n=E,r=I,i=M,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new B;this.compact=this.nbCenterLayers===5;let c=new ee(t.getX()+.5,t.getY()-.5),u=new ee(n.getX()+.5,n.getY()+.5),f=new ee(r.getX()-.5,r.getY()+.5),x=new ee(i.getX()-.5,i.getY()-.5);return this.expandSquare([c,u,f,x],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let c=new Zt(this.image).detect();e=c[0],t=c[1],n=c[2],r=c[3]}catch{let u=this.image.getWidth()/2,f=this.image.getHeight()/2;e=this.getFirstDifferent(new ft(u+7,f-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ft(u+7,f+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ft(u-7,f+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ft(u-7,f-7),!1,-1,-1).toResultPoint()}let i=Ce.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=Ce.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let c=new Zt(this.image,15,i,s).detect();e=c[0],t=c[1],n=c[2],r=c[3]}catch{e=this.getFirstDifferent(new ft(i+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ft(i+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ft(i-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ft(i-7,s-7),!1,-1,-1).toResultPoint()}return i=Ce.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=Ce.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new ft(i,s)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,i){let s=$t.getInstance(),c=this.getDimension(),u=c/2-this.nbCenterLayers,f=c/2+this.nbCenterLayers;return s.sampleGrid(e,c,c,u,u,f,u,f,f,u,f,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(e,t,n){let r=0,i=this.distanceResultPoint(e,t),s=i/n,c=e.getX(),u=e.getY(),f=s*(t.getX()-e.getX())/i,x=s*(t.getY()-e.getY())/i;for(let w=0;w<n;w++)this.image.get(Ce.round(c+w*f),Ce.round(u+w*x))&&(r|=1<<n-w-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let i=3;e=new ft(e.getX()-i,e.getY()+i),t=new ft(t.getX()-i,t.getY()-i),n=new ft(n.getX()+i,n.getY()-i),r=new ft(r.getX()+i,r.getY()+i);let s=this.getColor(r,e);if(s===0)return!1;let c=this.getColor(e,t);return c!==s||(c=this.getColor(t,n),c!==s)?!1:(c=this.getColor(n,r),c===s)}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,s=0,c=e.getX(),u=e.getY(),f=this.image.get(e.getX(),e.getY()),x=Math.ceil(n);for(let E=0;E<x;E++)c+=r,u+=i,this.image.get(Ce.round(c),Ce.round(u))!==f&&s++;let w=s/n;return w>.1&&w<.9?0:w<=.1===f?1:-1}getFirstDifferent(e,t,n,r){let i=e.getX()+n,s=e.getY()+r;for(;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n,s+=r;for(i-=n,s-=r;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n;for(i-=n;this.isValid(i,s)&&this.image.get(i,s)===t;)s+=r;return s-=r,new ft(i,s)}expandSquare(e,t,n){let r=n/(2*t),i=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),c=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,f=new ee(c+r*i,u+r*s),x=new ee(c-r*i,u-r*s);i=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),c=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;let w=new ee(c+r*i,u+r*s),E=new ee(c-r*i,u-r*s);return[f,w,x,E]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=Ce.round(e.getX()),n=Ce.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return Ce.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return Ce.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(W.truncDivision(this.nbLayers-4,8)+1)+15}}class gr{decode(e,t=null){let n=null,r=new ss(e.getBlackMatrix()),i=null,s=null;try{let x=r.detectMirror(!1);i=x.getPoints(),this.reportFoundResultPoints(t,i),s=new De().decode(x)}catch(x){n=x}if(s==null)try{let x=r.detectMirror(!0);i=x.getPoints(),this.reportFoundResultPoints(t,i),s=new De().decode(x)}catch(x){throw n??x}let c=new Qe(s.getText(),s.getRawBytes(),s.getNumBits(),i,te.AZTEC,F.currentTimeMillis()),u=s.getByteSegments();u!=null&&c.putMetadata(We.BYTE_SEGMENTS,u);let f=s.getECLevel();return f!=null&&c.putMetadata(We.ERROR_CORRECTION_LEVEL,f),c}reportFoundResultPoints(e,t){if(e!=null){let n=e.get(ge.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach((r,i,s)=>{n.foundPossibleResultPoint(r)})}}reset(){}}class Ac extends Ot{constructor(e=500){super(new gr,e)}}class Ze{decode(e,t){try{return this.doDecode(e,t)}catch{if(t&&t.get(ge.TRY_HARDER)===!0&&e.isRotateSupported()){const i=e.rotateCounterClockwise(),s=this.doDecode(i,t),c=s.getResultMetadata();let u=270;c!==null&&c.get(We.ORIENTATION)===!0&&(u=u+c.get(We.ORIENTATION)%360),s.putMetadata(We.ORIENTATION,u);const f=s.getResultPoints();if(f!==null){const x=i.getHeight();for(let w=0;w<f.length;w++)f[w]=new ee(x-f[w].getY()-1,f[w].getX())}return s}else throw new B}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let i=new $(n);const s=t&&t.get(ge.TRY_HARDER)===!0,c=Math.max(1,r>>(s?8:5));let u;s?u=r:u=15;const f=Math.trunc(r/2);for(let x=0;x<u;x++){const w=Math.trunc((x+1)/2),E=(x&1)===0,I=f+c*(E?w:-w);if(I<0||I>=r)break;try{i=e.getBlackRow(I,i)}catch{continue}for(let M=0;M<2;M++){if(M===1&&(i.reverse(),t&&t.get(ge.NEED_RESULT_POINT_CALLBACK)===!0)){const _=new Map;t.forEach((D,P)=>_.set(P,D)),_.delete(ge.NEED_RESULT_POINT_CALLBACK),t=_}try{const _=this.decodeRow(I,i,t);if(M===1){_.putMetadata(We.ORIENTATION,180);const D=_.getResultPoints();D!==null&&(D[0]=new ee(n-D[0].getX()-1,D[0].getY()),D[1]=new ee(n-D[1].getX()-1,D[1].getY()))}return _}catch{}}}throw new B}static recordPattern(e,t,n){const r=n.length;for(let f=0;f<r;f++)n[f]=0;const i=e.getSize();if(t>=i)throw new B;let s=!e.get(t),c=0,u=t;for(;u<i;){if(e.get(u)!==s)n[c]++;else{if(++c===r)break;n[c]=1,s=!s}u++}if(!(c===r||c===r-1&&u===i))throw new B}static recordPatternInReverse(e,t,n){let r=n.length,i=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==i&&(r--,i=!i);if(r>=0)throw new B;Ze.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let i=0,s=0;for(let f=0;f<r;f++)i+=e[f],s+=t[f];if(i<s)return Number.POSITIVE_INFINITY;const c=i/s;n*=c;let u=0;for(let f=0;f<r;f++){const x=e[f],w=t[f]*c,E=x>w?x-w:w-x;if(E>n)return Number.POSITIVE_INFINITY;u+=E}return u/i}}class K extends Ze{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,i=Int32Array.from([0,0,0,0,0,0]),s=n,c=!1;const u=6;for(let f=n;f<t;f++)if(e.get(f)!==c)i[r]++;else{if(r===u-1){let x=K.MAX_AVG_VARIANCE,w=-1;for(let E=K.CODE_START_A;E<=K.CODE_START_C;E++){const I=Ze.patternMatchVariance(i,K.CODE_PATTERNS[E],K.MAX_INDIVIDUAL_VARIANCE);I<x&&(x=I,w=E)}if(w>=0&&e.isRange(Math.max(0,s-(f-s)/2),s,!1))return Int32Array.from([s,f,w]);s+=i[0]+i[1],i=i.slice(2,i.length-1),i[r-1]=0,i[r]=0,r--}else r++;i[r]=1,c=!c}throw new B}static decodeCode(e,t,n){Ze.recordPattern(e,n,t);let r=K.MAX_AVG_VARIANCE,i=-1;for(let s=0;s<K.CODE_PATTERNS.length;s++){const c=K.CODE_PATTERNS[s],u=this.patternMatchVariance(t,c,K.MAX_INDIVIDUAL_VARIANCE);u<r&&(r=u,i=s)}if(i>=0)return i;throw new B}decodeRow(e,t,n){const r=n&&n.get(ge.ASSUME_GS1)===!0,i=K.findStartPattern(t),s=i[2];let c=0;const u=new Uint8Array(20);u[c++]=s;let f;switch(s){case K.CODE_START_A:f=K.CODE_CODE_A;break;case K.CODE_START_B:f=K.CODE_CODE_B;break;case K.CODE_START_C:f=K.CODE_CODE_C;break;default:throw new j}let x=!1,w=!1,E="",I=i[0],M=i[1];const _=Int32Array.from([0,0,0,0,0,0]);let D=0,P=0,V=s,G=0,H=!0,pe=!1,fe=!1;for(;!x;){const On=w;switch(w=!1,D=P,P=K.decodeCode(t,_,M),u[c++]=P,P!==K.CODE_STOP&&(H=!0),P!==K.CODE_STOP&&(G++,V+=G*P),I=M,M+=_.reduce((Kc,Qc)=>Kc+Qc,0),P){case K.CODE_START_A:case K.CODE_START_B:case K.CODE_START_C:throw new j}switch(f){case K.CODE_CODE_A:if(P<64)fe===pe?E+=String.fromCharCode(32+P):E+=String.fromCharCode(32+P+128),fe=!1;else if(P<96)fe===pe?E+=String.fromCharCode(P-64):E+=String.fromCharCode(P+64),fe=!1;else switch(P!==K.CODE_STOP&&(H=!1),P){case K.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case K.CODE_FNC_2:case K.CODE_FNC_3:break;case K.CODE_FNC_4_A:!pe&&fe?(pe=!0,fe=!1):pe&&fe?(pe=!1,fe=!1):fe=!0;break;case K.CODE_SHIFT:w=!0,f=K.CODE_CODE_B;break;case K.CODE_CODE_B:f=K.CODE_CODE_B;break;case K.CODE_CODE_C:f=K.CODE_CODE_C;break;case K.CODE_STOP:x=!0;break}break;case K.CODE_CODE_B:if(P<96)fe===pe?E+=String.fromCharCode(32+P):E+=String.fromCharCode(32+P+128),fe=!1;else switch(P!==K.CODE_STOP&&(H=!1),P){case K.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case K.CODE_FNC_2:case K.CODE_FNC_3:break;case K.CODE_FNC_4_B:!pe&&fe?(pe=!0,fe=!1):pe&&fe?(pe=!1,fe=!1):fe=!0;break;case K.CODE_SHIFT:w=!0,f=K.CODE_CODE_A;break;case K.CODE_CODE_A:f=K.CODE_CODE_A;break;case K.CODE_CODE_C:f=K.CODE_CODE_C;break;case K.CODE_STOP:x=!0;break}break;case K.CODE_CODE_C:if(P<100)P<10&&(E+="0"),E+=P;else switch(P!==K.CODE_STOP&&(H=!1),P){case K.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case K.CODE_CODE_A:f=K.CODE_CODE_A;break;case K.CODE_CODE_B:f=K.CODE_CODE_B;break;case K.CODE_STOP:x=!0;break}break}On&&(f=f===K.CODE_CODE_A?K.CODE_CODE_B:K.CODE_CODE_A)}const Ct=M-I;if(M=t.getNextUnset(M),!t.isRange(M,Math.min(t.getSize(),M+(M-I)/2),!1))throw new B;if(V-=G*D,V%103!==D)throw new k;const Bt=E.length;if(Bt===0)throw new B;Bt>0&&H&&(f===K.CODE_CODE_C?E=E.substring(0,Bt-2):E=E.substring(0,Bt-1));const At=(i[1]+i[0])/2,_e=I+Ct/2,at=u.length,bt=new Uint8Array(at);for(let On=0;On<at;On++)bt[On]=u[On];const Rn=[new ee(At,e),new ee(_e,e)];return new Qe(E,bt,0,Rn,te.CODE_128,new Date().getTime())}}K.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],K.MAX_AVG_VARIANCE=.25,K.MAX_INDIVIDUAL_VARIANCE=.7,K.CODE_SHIFT=98,K.CODE_CODE_C=99,K.CODE_CODE_B=100,K.CODE_CODE_A=101,K.CODE_FNC_1=102,K.CODE_FNC_2=97,K.CODE_FNC_3=96,K.CODE_FNC_4_A=101,K.CODE_FNC_4_B=100,K.CODE_START_A=103,K.CODE_START_B=104,K.CODE_START_C=105,K.CODE_STOP=106;class qe extends Ze{constructor(e=!1,t=!1){super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let i=qe.findAsteriskPattern(t,r),s=t.getNextSet(i[1]),c=t.getSize(),u,f;do{qe.recordPattern(t,s,r);let _=qe.toNarrowWidePattern(r);if(_<0)throw new B;u=qe.patternToChar(_),this.decodeRowResult+=u,f=s;for(let D of r)s+=D;s=t.getNextSet(s)}while(u!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let x=0;for(let _ of r)x+=_;let w=s-f-x;if(s!==c&&w*2<x)throw new B;if(this.usingCheckDigit){let _=this.decodeRowResult.length-1,D=0;for(let P=0;P<_;P++)D+=qe.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(P));if(this.decodeRowResult.charAt(_)!==qe.ALPHABET_STRING.charAt(D%43))throw new k;this.decodeRowResult=this.decodeRowResult.substring(0,_)}if(this.decodeRowResult.length===0)throw new B;let E;this.extendedMode?E=qe.decodeExtended(this.decodeRowResult):E=this.decodeRowResult;let I=(i[1]+i[0])/2,M=f+x/2;return new Qe(E,null,0,[new ee(I,e),new ee(M,e)],te.CODE_39,new Date().getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),i=0,s=r,c=!1,u=t.length;for(let f=r;f<n;f++)if(e.get(f)!==c)t[i]++;else{if(i===u-1){if(this.toNarrowWidePattern(t)===qe.ASTERISK_ENCODING&&e.isRange(Math.max(0,s-Math.floor((f-s)/2)),s,!1))return[s,f];s+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,c=!c}throw new B}static toNarrowWidePattern(e){let t=e.length,n=0,r;do{let i=2147483647;for(let u of e)u<i&&u>n&&(i=u);n=i,r=0;let s=0,c=0;for(let u=0;u<t;u++){let f=e[u];f>n&&(c|=1<<t-1-u,r++,s+=f)}if(r===3){for(let u=0;u<t&&r>0;u++){let f=e[u];if(f>n&&(r--,f*2>=s))return-1}return c}}while(r>3);return-1}static patternToChar(e){for(let t=0;t<qe.CHARACTER_ENCODINGS.length;t++)if(qe.CHARACTER_ENCODINGS[t]===e)return qe.ALPHABET_STRING.charAt(t);if(e===qe.ASTERISK_ENCODING)return"*";throw new B}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let i=e.charAt(r);if(i==="+"||i==="$"||i==="%"||i==="/"){let s=e.charAt(r+1),c="\0";switch(i){case"+":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)+32);else throw new j;break;case"$":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)-64);else throw new j;break;case"%":if(s>="A"&&s<="E")c=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")c=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")c=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")c="\0";else if(s==="V")c="@";else if(s==="W")c="`";else if(s==="X"||s==="Y"||s==="Z")c="";else throw new j;break;case"/":if(s>="A"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")c=":";else throw new j;break}n+=c,r++}else n+=i}return n}}qe.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",qe.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],qe.ASTERISK_ENCODING=148;class ve extends Ze{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),i=this.decodeEnd(t),s=new we;ve.decodeMiddle(t,r[1],i[0],s);let c=s.toString(),u=null;n!=null&&(u=n.get(ge.ALLOWED_LENGTHS)),u==null&&(u=ve.DEFAULT_ALLOWED_LENGTHS);let f=c.length,x=!1,w=0;for(let M of u){if(f===M){x=!0;break}M>w&&(w=M)}if(!x&&f>w&&(x=!0),!x)throw new j;const E=[new ee(r[1],e),new ee(i[0],e)];return new Qe(c,null,0,E,te.ITF,new Date().getTime())}static decodeMiddle(e,t,n,r){let i=new Int32Array(10),s=new Int32Array(5),c=new Int32Array(5);for(i.fill(0),s.fill(0),c.fill(0);t<n;){Ze.recordPattern(e,t,i);for(let f=0;f<5;f++){let x=2*f;s[f]=i[x],c[f]=i[x+1]}let u=ve.decodeDigit(s);r.append(u.toString()),u=this.decodeDigit(c),r.append(u.toString()),i.forEach(function(f){t+=f})}}decodeStart(e){let t=ve.skipWhiteSpace(e),n=ve.findGuardPattern(e,t,ve.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=this.narrowLineWidth*10;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(n!==0)throw new B}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new B;return n}decodeEnd(e){e.reverse();try{let t=ve.skipWhiteSpace(e),n;try{n=ve.findGuardPattern(e,t,ve.END_PATTERN_REVERSED[0])}catch(i){i instanceof B&&(n=ve.findGuardPattern(e,t,ve.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let r=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-r,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,i=new Int32Array(r),s=e.getSize(),c=!1,u=0,f=t;i.fill(0);for(let x=t;x<s;x++)if(e.get(x)!==c)i[u]++;else{if(u===r-1){if(Ze.patternMatchVariance(i,n,ve.MAX_INDIVIDUAL_VARIANCE)<ve.MAX_AVG_VARIANCE)return[f,x];f+=i[0]+i[1],F.arraycopy(i,2,i,0,u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,c=!c}throw new B}static decodeDigit(e){let t=ve.MAX_AVG_VARIANCE,n=-1,r=ve.PATTERNS.length;for(let i=0;i<r;i++){let s=ve.PATTERNS[i],c=Ze.patternMatchVariance(e,s,ve.MAX_INDIVIDUAL_VARIANCE);c<t?(t=c,n=i):c===t&&(n=-1)}if(n>=0)return n%10;throw new B}}ve.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ve.MAX_AVG_VARIANCE=.38,ve.MAX_INDIVIDUAL_VARIANCE=.5,ve.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ve.START_PATTERN=Int32Array.from([1,1,1,1]),ve.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ue extends Ze{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t=!1,n,r=0,i=Int32Array.from([0,0,0]);for(;!t;){i=Int32Array.from([0,0,0]),n=Ue.findGuardPattern(e,r,!1,this.START_END_PATTERN,i);let s=n[0];r=n[1];let c=s-(r-s);c>=0&&(t=e.isRange(c,s,!1))}return n}static checkChecksum(e){return Ue.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return Ue.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new j;n+=i}n*=3;for(let r=t-2;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new j;n+=i}return(1e3-n)%10}static decodeEnd(e,t){return Ue.findGuardPattern(e,t,!1,Ue.START_END_PATTERN,new Int32Array(Ue.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,i){let s=e.getSize();t=n?e.getNextUnset(t):e.getNextSet(t);let c=0,u=t,f=r.length,x=n;for(let w=t;w<s;w++)if(e.get(w)!==x)i[c]++;else{if(c===f-1){if(Ze.patternMatchVariance(i,r,Ue.MAX_INDIVIDUAL_VARIANCE)<Ue.MAX_AVG_VARIANCE)return Int32Array.from([u,w]);u+=i[0]+i[1];let E=i.slice(2,i.length-1);for(let I=0;I<c-1;I++)i[I]=E[I];i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,x=!x}throw new B}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let i=this.MAX_AVG_VARIANCE,s=-1,c=r.length;for(let u=0;u<c;u++){let f=r[u],x=Ze.patternMatchVariance(t,f,Ue.MAX_INDIVIDUAL_VARIANCE);x<i&&(i=x,s=u)}if(s>=0)return s;throw new B}}Ue.MAX_AVG_VARIANCE=.48,Ue.MAX_INDIVIDUAL_VARIANCE=.7,Ue.START_END_PATTERN=Int32Array.from([1,1,1]),Ue.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ue.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ue.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Hn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),c=Hn.parseExtensionString(s),u=[new ee((n[0]+n[1])/2,e),new ee(i,e)],f=new Qe(s,null,0,u,te.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&f.putAllMetadata(c),f}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],c=0;for(let f=0;f<5&&s<i;f++){let x=Ue.decodeDigit(e,r,s,Ue.L_AND_G_PATTERNS);n+=String.fromCharCode(48+x%10);for(let w of r)s+=w;x>=10&&(c|=1<<4-f),f!==4&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(n.length!==5)throw new B;let u=this.determineCheckDigit(c);if(Hn.extensionChecksum(n.toString())!==u)throw new B;return s}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new B}static parseExtensionString(e){if(e.length!==5)return null;let t=Hn.parseExtension5String(e);return t==null?null:new Map([[We.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}let n=parseInt(e.substring(1)),r=(n/100).toString(),i=n%100,s=i<10?"0"+i:i.toString();return t+r+"."+s}}class Xr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),c=Xr.parseExtensionString(s),u=[new ee((n[0]+n[1])/2,e),new ee(i,e)],f=new Qe(s,null,0,u,te.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&f.putAllMetadata(c),f}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],c=0;for(let u=0;u<2&&s<i;u++){let f=Ue.decodeDigit(e,r,s,Ue.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);for(let x of r)s+=x;f>=10&&(c|=1<<1-u),u!==1&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(n.length!==2)throw new B;if(parseInt(n.toString())%4!==c)throw new B;return s}static parseExtensionString(e){return e.length!==2?null:new Map([[We.ISSUE_NUMBER,parseInt(e)]])}}class os{static decodeRow(e,t,n){let r=Ue.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Hn().decodeRow(e,t,r)}catch{return new Xr().decodeRow(e,t,r)}}}os.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class be extends Ue{constructor(){super(),this.decodeRowStringBuffer="",be.L_AND_G_PATTERNS=be.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=be.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[t.length-r-1];be.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=be.findStartGuardPattern(t),i=n==null?null:n.get(ge.NEED_RESULT_POINT_CALLBACK);if(i!=null){const H=new ee((r[0]+r[1])/2,e);i.foundPossibleResultPoint(H)}let s=this.decodeMiddle(t,r,this.decodeRowStringBuffer),c=s.rowOffset,u=s.resultString;if(i!=null){const H=new ee(c,e);i.foundPossibleResultPoint(H)}let f=this.decodeEnd(t,c);if(i!=null){const H=new ee((f[0]+f[1])/2,e);i.foundPossibleResultPoint(H)}let x=f[1],w=x+(x-f[0]);if(w>=t.getSize()||!t.isRange(x,w,!1))throw new B;let E=u.toString();if(E.length<8)throw new j;if(!be.checkChecksum(E))throw new k;let I=(r[1]+r[0])/2,M=(f[1]+f[0])/2,_=this.getBarcodeFormat(),D=[new ee(I,e),new ee(M,e)],P=new Qe(E,null,0,D,_,new Date().getTime()),V=0;try{let H=os.decodeRow(e,t,f[1]);P.putMetadata(We.UPC_EAN_EXTENSION,H.getText()),P.putAllMetadata(H.getResultMetadata()),P.addResultPoints(H.getResultPoints()),V=H.getText().length}catch{}let G=n==null?null:n.get(ge.ALLOWED_EAN_EXTENSIONS);if(G!=null){let H=!1;for(let pe in G)if(V.toString()===pe){H=!0;break}if(!H)throw new B}return P}decodeEnd(e,t){return be.findGuardPattern(e,t,!1,be.START_END_PATTERN,new Int32Array(be.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return be.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return be.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new j;n+=i}n*=3;for(let r=t-2;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new j;n+=i}return(1e3-n)%10}}class gn extends be{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],c=0;for(let f=0;f<6&&s<i;f++){let x=be.decodeDigit(e,r,s,be.L_AND_G_PATTERNS);n+=String.fromCharCode(48+x%10);for(let w of r)s+=w;x>=10&&(c|=1<<5-f)}n=gn.determineFirstDigit(n,c),s=be.findGuardPattern(e,s,!0,be.MIDDLE_PATTERN,new Int32Array(be.MIDDLE_PATTERN.length).fill(0))[1];for(let f=0;f<6&&s<i;f++){let x=be.decodeDigit(e,r,s,be.L_PATTERNS);n+=String.fromCharCode(48+x);for(let w of r)s+=w}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return te.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode(48+n)+e,e;throw new B}}gn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class as extends be{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1];for(let u=0;u<4&&s<i;u++){let f=be.decodeDigit(e,r,s,be.L_PATTERNS);n+=String.fromCharCode(48+f);for(let x of r)s+=x}s=be.findGuardPattern(e,s,!0,be.MIDDLE_PATTERN,new Int32Array(be.MIDDLE_PATTERN.length).fill(0))[1];for(let u=0;u<4&&s<i;u++){let f=be.decodeDigit(e,r,s,be.L_PATTERNS);n+=String.fromCharCode(48+f);for(let x of r)s+=x}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return te.EAN_8}}class cs extends be{constructor(){super(...arguments),this.ean13Reader=new gn}getBarcodeFormat(){return te.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if(t.charAt(0)==="0"){let n=new Qe(t.substring(1),null,null,e.getResultPoints(),te.UPC_A);return e.getResultMetadata()!=null&&n.putAllMetadata(e.getResultMetadata()),n}else throw new B}reset(){this.ean13Reader.reset()}}class Pt extends be{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map(f=>f);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const i=e.getSize();let s=t[1],c=0;for(let f=0;f<6&&s<i;f++){const x=Pt.decodeDigit(e,r,s,Pt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+x%10);for(let w of r)s+=w;x>=10&&(c|=1<<5-f)}let u=Pt.determineNumSysAndCheckDigit(n,c);return{rowOffset:s,resultString:u}}decodeEnd(e,t){return Pt.findGuardPatternWithoutCounters(e,t,!0,Pt.MIDDLE_END_PATTERN)}checkChecksum(e){return be.checkChecksum(Pt.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r]){let i=String.fromCharCode(48+n),s=String.fromCharCode(48+r);return i+e+s}throw B.getNotFoundInstance()}getBarcodeFormat(){return te.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(i=>i.charCodeAt(0)),n=new we;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r);break}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}Pt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Zr extends Ze{constructor(e){super();let t=e==null?null:e.get(ge.POSSIBLE_FORMATS),n=[];d(t)?(n.push(new gn),n.push(new cs),n.push(new as),n.push(new Pt)):(t.indexOf(te.EAN_13)>-1&&n.push(new gn),t.indexOf(te.UPC_A)>-1&&n.push(new cs),t.indexOf(te.EAN_8)>-1&&n.push(new as),t.indexOf(te.UPC_E)>-1&&n.push(new Pt)),this.readers=n}decodeRow(e,t,n){for(let r of this.readers)try{const i=r.decodeRow(e,t,n),s=i.getBarcodeFormat()===te.EAN_13&&i.getText().charAt(0)==="0",c=n==null?null:n.get(ge.POSSIBLE_FORMATS),u=c==null||c.includes(te.UPC_A);if(s&&u){const f=i.getRawBytes(),x=new Qe(i.getText().substring(1),f,f?f.length:null,i.getResultPoints(),te.UPC_A);return x.putAllMetadata(i.getResultMetadata()),x}return i}catch{}throw new B}reset(){for(let e of this.readers)e.reset()}}class lt extends Ze{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(Ze.patternMatchVariance(e,t[n],lt.MAX_INDIVIDUAL_VARIANCE)<lt.MAX_AVG_VARIANCE)return n;throw new B}static count(e){return Ce.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]>r&&(r=t[i],n=i);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]<r&&(r=t[i],n=i);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t+e[2]+e[3],r=t/n;if(r>=lt.MIN_FINDER_PATTERN_RATIO&&r<=lt.MAX_FINDER_PATTERN_RATIO){let i=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;for(let c of e)c>s&&(s=c),c<i&&(i=c);return s<10*i}return!1}}lt.MAX_AVG_VARIANCE=.2,lt.MAX_INDIVIDUAL_VARIANCE=.45,lt.MIN_FINDER_PATTERN_RATIO=9.5/12,lt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Sn{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Sn))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class xr{constructor(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new ee(n,i)),this.resultPoints.push(new ee(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof xr))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Ht{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let u of e)r+=u;let i=0,s=0,c=e.length;for(let u=0;u<c-1;u++){let f;for(f=1,s|=1<<u;f<e[u];f++,s&=~(1<<u)){let x=Ht.combins(r-f-1,c-u-2);if(n&&s===0&&r-f-(c-u-1)>=c-u-1&&(x-=Ht.combins(r-f-(c-u),c-u-2)),c-u-1>1){let w=0;for(let E=r-f-(c-u-2);E>t;E--)w+=Ht.combins(r-f-E-1,c-u-3);x-=w*(c-1-u)}else r-f>t&&x--;i+=x}r-=f}return i}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let i=1,s=1;for(let c=e;c>n;c--)i*=c,s<=r&&(i/=s,s++);for(;s<=r;)i/=s,s++;return i}}class Ec{static buildBitArray(e){let t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);let n=12*t,r=new $(n),i=0,c=e[0].getRightChar().getValue();for(let u=11;u>=0;--u)(c&1<<u)!=0&&r.set(i),i++;for(let u=1;u<e.length;++u){let f=e[u],x=f.getLeftChar().getValue();for(let w=11;w>=0;--w)(x&1<<w)!=0&&r.set(i),i++;if(f.getRightChar()!=null){let w=f.getRightChar().getValue();for(let E=11;E>=0;--E)(w&1<<E)!=0&&r.set(i),i++}}return r}}class xn{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Kr{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class pt extends Kr{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===pt.FNC1}}pt.FNC1="$";class pn extends Kr{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Nt extends Kr{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new j;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Nt.FNC1}isSecondDigitFNC1(){return this.secondDigit===Nt.FNC1}isAnyFNC1(){return this.firstDigit===Nt.FNC1||this.secondDigit===Nt.FNC1}}Nt.FNC1=10;class q{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new B;let t=e.substring(0,2);for(let i of q.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===q.VARIABLE_LENGTH?q.processVariableAI(2,i[2],e):q.processFixedAI(2,i[1],e);if(e.length<3)throw new B;let n=e.substring(0,3);for(let i of q.THREE_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===q.VARIABLE_LENGTH?q.processVariableAI(3,i[2],e):q.processFixedAI(3,i[1],e);for(let i of q.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===q.VARIABLE_LENGTH?q.processVariableAI(4,i[2],e):q.processFixedAI(4,i[1],e);if(e.length<4)throw new B;let r=e.substring(0,4);for(let i of q.FOUR_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===q.VARIABLE_LENGTH?q.processVariableAI(4,i[2],e):q.processFixedAI(4,i[1],e);throw new B}static processFixedAI(e,t,n){if(n.length<e)throw new B;let r=n.substring(0,e);if(n.length<e+t)throw new B;let i=n.substring(e,e+t),s=n.substring(e+t),c="("+r+")"+i,u=q.parseFieldsInGeneralPurpose(s);return u==null?c:c+u}static processVariableAI(e,t,n){let r=n.substring(0,e),i;n.length<e+t?i=n.length:i=e+t;let s=n.substring(e,i),c=n.substring(i),u="("+r+")"+s,f=q.parseFieldsInGeneralPurpose(c);return f==null?u:u+f}}q.VARIABLE_LENGTH=[],q.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",q.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",q.VARIABLE_LENGTH,20],["22",q.VARIABLE_LENGTH,29],["30",q.VARIABLE_LENGTH,8],["37",q.VARIABLE_LENGTH,8],["90",q.VARIABLE_LENGTH,30],["91",q.VARIABLE_LENGTH,30],["92",q.VARIABLE_LENGTH,30],["93",q.VARIABLE_LENGTH,30],["94",q.VARIABLE_LENGTH,30],["95",q.VARIABLE_LENGTH,30],["96",q.VARIABLE_LENGTH,30],["97",q.VARIABLE_LENGTH,3],["98",q.VARIABLE_LENGTH,30],["99",q.VARIABLE_LENGTH,30]],q.THREE_DIGIT_DATA_LENGTH=[["240",q.VARIABLE_LENGTH,30],["241",q.VARIABLE_LENGTH,30],["242",q.VARIABLE_LENGTH,6],["250",q.VARIABLE_LENGTH,30],["251",q.VARIABLE_LENGTH,30],["253",q.VARIABLE_LENGTH,17],["254",q.VARIABLE_LENGTH,20],["400",q.VARIABLE_LENGTH,30],["401",q.VARIABLE_LENGTH,30],["402",17],["403",q.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",q.VARIABLE_LENGTH,20],["421",q.VARIABLE_LENGTH,15],["422",3],["423",q.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],q.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",q.VARIABLE_LENGTH,15],["391",q.VARIABLE_LENGTH,18],["392",q.VARIABLE_LENGTH,15],["393",q.VARIABLE_LENGTH,18],["703",q.VARIABLE_LENGTH,30]],q.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",q.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",q.VARIABLE_LENGTH,20],["8003",q.VARIABLE_LENGTH,30],["8004",q.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",q.VARIABLE_LENGTH,30],["8008",q.VARIABLE_LENGTH,12],["8018",18],["8020",q.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",q.VARIABLE_LENGTH,70],["8200",q.VARIABLE_LENGTH,70]];class Tn{constructor(e){this.buffer=new we,this.information=e}decodeAllCodes(e,t){let n=t,r=null;do{let i=this.decodeGeneralPurposeField(n,r),s=q.parseFieldsInGeneralPurpose(i.getNewString());if(s!=null&&e.append(s),i.isRemaining()?r=""+i.getRemainingValue():r=null,n===i.getNewPosition())break;n=i.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let i=this.extractNumericValueFromBitArray(e,4);return i===0?new Nt(this.information.getSize(),Nt.FNC1,Nt.FNC1):new Nt(this.information.getSize(),i-1,Nt.FNC1)}let t=this.extractNumericValueFromBitArray(e,7),n=(t-8)/11,r=(t-8)%11;return new Nt(e+7,n,r)}extractNumericValueFromBitArray(e,t){return Tn.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return n!=null&&n.isRemaining()?new pn(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new pn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),!(n!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return e.isSecondDigitFNC1()?t=new pn(this.current.getPosition(),this.buffer.toString()):t=new pn(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new xn(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let t=new pn(this.current.getPosition(),this.buffer.toString());return new xn(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new xn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new pn(this.current.getPosition(),this.buffer.toString());return new xn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new xn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new pn(this.current.getPosition(),this.buffer.toString());return new xn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new xn(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new pt(e+5,pt.FNC1);if(t>=5&&t<15)return new pt(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new pt(e+7,""+(n+1));if(n>=90&&n<116)return new pt(e+7,""+(n+7));let r=this.extractNumericValueFromBitArray(e,8),i;switch(r){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new j}return new pt(e+8,i)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new pt(e+5,pt.FNC1);if(t>=5&&t<15)return new pt(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new pt(e+6,""+(n+33));let r;switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new Ut("Decoding invalid alphanumeric value: "+n)}return new pt(e+6,r)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class Qr{constructor(e){this.information=e,this.generalDecoder=new Tn(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class mt extends Qr{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let r=0;r<4;++r){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i)}mt.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let i=e.charAt(r+t).charCodeAt(0)-48;n+=(r&1)===0?3*i:i}n=10-n%10,n===10&&(n=0),e.append(n)}}mt.GTIN_SIZE=40;class Nn extends mt{constructor(e){super(e)}parseInformation(){let e=new we;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(Nn.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,Nn.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,Nn.HEADER_SIZE+44)}}Nn.HEADER_SIZE=4;class pr extends Qr{constructor(e){super(e)}parseInformation(){let e=new we;return this.getGeneralDecoder().decodeAllCodes(e,pr.HEADER_SIZE)}}pr.HEADER_SIZE=5;class mr extends mt{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let i=this.checkWeight(r),s=1e5;for(let c=0;c<5;++c)i/s===0&&e.append("0"),s/=10;e.append(i)}}class zt extends mr{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=zt.HEADER_SIZE+mr.GTIN_SIZE+zt.WEIGHT_SIZE)throw new B;let e=new we;return this.encodeCompressedGtin(e,zt.HEADER_SIZE),this.encodeCompressedWeight(e,zt.HEADER_SIZE+mr.GTIN_SIZE,zt.WEIGHT_SIZE),e.toString()}}zt.HEADER_SIZE=5,zt.WEIGHT_SIZE=15;class bc extends zt{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class yc extends zt{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Vt extends mt{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Vt.HEADER_SIZE+mt.GTIN_SIZE)throw new B;let e=new we;this.encodeCompressedGtin(e,Vt.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Vt.HEADER_SIZE+mt.GTIN_SIZE,Vt.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(Vt.HEADER_SIZE+mt.GTIN_SIZE+Vt.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}Vt.HEADER_SIZE=8,Vt.LAST_DIGIT_SIZE=2;class ht extends mt{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<ht.HEADER_SIZE+mt.GTIN_SIZE)throw new B;let e=new we;this.encodeCompressedGtin(e,ht.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(ht.HEADER_SIZE+mt.GTIN_SIZE,ht.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(ht.HEADER_SIZE+mt.GTIN_SIZE+ht.LAST_DIGIT_SIZE,ht.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(ht.HEADER_SIZE+mt.GTIN_SIZE+ht.LAST_DIGIT_SIZE+ht.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}ht.HEADER_SIZE=8,ht.LAST_DIGIT_SIZE=2,ht.FIRST_THREE_DIGITS_SIZE=10;class ke extends mr{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=ke.HEADER_SIZE+ke.GTIN_SIZE+ke.WEIGHT_SIZE+ke.DATE_SIZE)throw new B;let e=new we;return this.encodeCompressedGtin(e,ke.HEADER_SIZE),this.encodeCompressedWeight(e,ke.HEADER_SIZE+ke.GTIN_SIZE,ke.WEIGHT_SIZE),this.encodeCompressedDate(e,ke.HEADER_SIZE+ke.GTIN_SIZE+ke.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,ke.DATE_SIZE);if(n==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32;n/=32;let i=n%12+1;n/=12;let s=n;s/10==0&&e.append("0"),e.append(s),i/10==0&&e.append("0"),e.append(i),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}ke.HEADER_SIZE=8,ke.WEIGHT_SIZE=20,ke.DATE_SIZE=16;function ls(m){try{if(m.get(1))return new Nn(m);if(!m.get(2))return new pr(m);switch(Tn.extractNumericValueFromBitArray(m,1,4)){case 4:return new bc(m);case 5:return new yc(m)}switch(Tn.extractNumericValueFromBitArray(m,1,5)){case 12:return new Vt(m);case 13:return new ht(m)}switch(Tn.extractNumericValueFromBitArray(m,1,7)){case 56:return new ke(m,"310","11");case 57:return new ke(m,"320","11");case 58:return new ke(m,"310","13");case 59:return new ke(m,"320","13");case 60:return new ke(m,"310","15");case 61:return new ke(m,"320","15");case 62:return new ke(m,"310","17");case 63:return new ke(m,"320","17")}}catch(e){throw console.log(e),new Ut("unknown decoder: "+m)}}class en{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof en?en.equalsOrNull(e.leftchar,t.leftchar)&&en.equalsOrNull(e.rightchar,t.rightchar)&&en.equalsOrNull(e.finderpattern,t.finderpattern):!1}static equalsOrNull(e,t){return e===null?t===null:en.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class qr{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof qr?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((r,i)=>{t.forEach(s=>{r.getLeftChar().getValue()===s.getLeftChar().getValue()&&r.getRightChar().getValue()===s.getRightChar().getValue()&&r.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(n=!0)})}),n}}class U extends lt{constructor(e){super(...arguments),this.pairs=new Array(U.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return U.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,U.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof B){if(!this.pairs.length)throw new B;n=!0}}if(this.checkChecksum())return this.pairs;let r;if(this.rows.length?r=!0:r=!1,this.storeRow(e,!1),r){let i=this.checkRowsBoolean(!1);if(i!=null||(i=this.checkRowsBoolean(!0),i!=null))return i}throw new B}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let n=t;n<this.rows.length;n++){let r=this.rows[n];this.pairs.length=0;for(let s of e)this.pairs.push(s.getPairs());if(this.pairs.push(r.getPairs()),!U.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(e);i.push(r);try{return this.checkRows(i,n+1)}catch(s){this.verbose&&console.log(s)}}throw new B}static isValidSequence(e){for(let t of U.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,i=!1;for(;n<this.rows.length;){let s=this.rows[n];if(s.getRowNumber()>e){i=s.isEquivalent(this.pairs);break}r=s.isEquivalent(this.pairs),n++}i||r||U.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new qr(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length){for(let r of n.getPairs())for(let i of e)if(en.equals(r,i))break}}static isPartialRow(e,t){for(let n of t){let r=!0;for(let i of e){let s=!1;for(let c of n.getPairs())if(i.equals(c)){s=!0;break}if(!s){r=!1;break}}if(r)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=Ec.buildBitArray(e),r=ls(t).parseInformation(),i=e[0].getFinderPattern().getResultPoints(),s=e[e.length-1].getFinderPattern().getResultPoints(),c=[i[0],i[1],s[0],s[1]];return new Qe(r,null,null,c,te.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(n==null)return!1;let r=n.getChecksumPortion(),i=2;for(let c=1;c<this.pairs.size();++c){let u=this.pairs.get(c);r+=u.getLeftChar().getChecksumPortion(),i++;let f=u.getRightChar();f!=null&&(r+=f.getChecksumPortion(),i++)}return r%=211,211*(i-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r=t.length%2==0;this.startFromEven&&(r=!r);let i,s=!0,c=-1;do this.findNextPair(e,t,c),i=this.parseFoundFinderPattern(e,n,r),i==null?c=U.getNextSecondBar(e,this.startEnd[0]):s=!1;while(s);let u=this.decodeDataCharacter(e,i,r,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new B;let f;try{f=this.decodeDataCharacter(e,i,r,!1)}catch(x){f=null,this.verbose&&console.log(x)}return new en(u,f,i,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s;n>=0?s=n:this.isEmptyPair(t)?s=0:s=t[t.length-1].getFinderPattern().getStartEnd()[1];let c=t.length%2!=0;this.startFromEven&&(c=!c);let u=!1;for(;s<i&&(u=!e.get(s),!!u);)s++;let f=0,x=s;for(let w=s;w<i;w++)if(e.get(w)!=u)r[f]++;else{if(f==3){if(c&&U.reverseCounters(r),U.isFinderPattern(r)){this.startEnd[0]=x,this.startEnd[1]=w;return}c&&U.reverseCounters(r),x+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,f--}else f++;r[f]=1,u=!u}throw new B}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,i,s;if(n){let f=this.startEnd[0]-1;for(;f>=0&&!e.get(f);)f--;f++,r=this.startEnd[0]-f,i=f,s=this.startEnd[1]}else i=this.startEnd[0],s=e.getNextUnset(this.startEnd[1]+1),r=s-this.startEnd[1];let c=this.getDecodeFinderCounters();F.arraycopy(c,0,c,1,c.length-1),c[0]=r;let u;try{u=this.parseFinderValue(c,U.FINDER_PATTERNS)}catch{return null}return new xr(u,[i,s],i,s,t)}decodeDataCharacter(e,t,n,r){let i=this.getDataCharacterCounters();for(let _e=0;_e<i.length;_e++)i[_e]=0;if(r)U.recordPatternInReverse(e,t.getStartEnd()[0],i);else{U.recordPattern(e,t.getStartEnd()[1],i);for(let _e=0,at=i.length-1;_e<at;_e++,at--){let bt=i[_e];i[_e]=i[at],i[at]=bt}}let s=17,c=Ce.sum(new Int32Array(i))/s,u=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(c-u)/u>.3)throw new B;let f=this.getOddCounts(),x=this.getEvenCounts(),w=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let _e=0;_e<i.length;_e++){let at=1*i[_e]/c,bt=at+.5;if(bt<1){if(at<.3)throw new B;bt=1}else if(bt>8){if(at>8.7)throw new B;bt=8}let Rn=_e/2;(_e&1)==0?(f[Rn]=bt,w[Rn]=at-bt):(x[Rn]=bt,E[Rn]=at-bt)}this.adjustOddEvenCounts(s);let I=4*t.getValue()+(n?0:2)+(r?0:1)-1,M=0,_=0;for(let _e=f.length-1;_e>=0;_e--){if(U.isNotA1left(t,n,r)){let at=U.WEIGHTS[I][2*_e];_+=f[_e]*at}M+=f[_e]}let D=0;for(let _e=x.length-1;_e>=0;_e--)if(U.isNotA1left(t,n,r)){let at=U.WEIGHTS[I][2*_e+1];D+=x[_e]*at}let P=_+D;if((M&1)!=0||M>13||M<4)throw new B;let V=(13-M)/2,G=U.SYMBOL_WIDEST[V],H=9-G,pe=Ht.getRSSvalue(f,G,!0),fe=Ht.getRSSvalue(x,H,!1),Ct=U.EVEN_TOTAL_SUBSET[V],Bt=U.GSUM[V],At=pe*Ct+fe+Bt;return new Sn(At,P)}static isNotA1left(e,t,n){return!(e.getValue()==0&&t&&n)}adjustOddEvenCounts(e){let t=Ce.sum(new Int32Array(this.getOddCounts())),n=Ce.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;t>13?i=!0:t<4&&(r=!0);let s=!1,c=!1;n>13?c=!0:n<4&&(s=!0);let u=t+n-e,f=(t&1)==1,x=(n&1)==0;if(u==1)if(f){if(x)throw new B;i=!0}else{if(!x)throw new B;c=!0}else if(u==-1)if(f){if(x)throw new B;r=!0}else{if(!x)throw new B;s=!0}else if(u==0){if(f){if(!x)throw new B;t<n?(r=!0,c=!0):(i=!0,s=!0)}else if(x)throw new B}else throw new B;if(r){if(i)throw new B;U.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&U.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(c)throw new B;U.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&U.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}U.SYMBOL_WIDEST=[7,5,4,3,1],U.EVEN_TOTAL_SUBSET=[4,20,52,104,204],U.GSUM=[0,348,1388,2948,3988],U.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],U.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],U.FINDER_PAT_A=0,U.FINDER_PAT_B=1,U.FINDER_PAT_C=2,U.FINDER_PAT_D=3,U.FINDER_PAT_E=4,U.FINDER_PAT_F=5,U.FINDER_PATTERN_SEQUENCES=[[U.FINDER_PAT_A,U.FINDER_PAT_A],[U.FINDER_PAT_A,U.FINDER_PAT_B,U.FINDER_PAT_B],[U.FINDER_PAT_A,U.FINDER_PAT_C,U.FINDER_PAT_B,U.FINDER_PAT_D],[U.FINDER_PAT_A,U.FINDER_PAT_E,U.FINDER_PAT_B,U.FINDER_PAT_D,U.FINDER_PAT_C],[U.FINDER_PAT_A,U.FINDER_PAT_E,U.FINDER_PAT_B,U.FINDER_PAT_D,U.FINDER_PAT_D,U.FINDER_PAT_F],[U.FINDER_PAT_A,U.FINDER_PAT_E,U.FINDER_PAT_B,U.FINDER_PAT_D,U.FINDER_PAT_E,U.FINDER_PAT_F,U.FINDER_PAT_F],[U.FINDER_PAT_A,U.FINDER_PAT_A,U.FINDER_PAT_B,U.FINDER_PAT_B,U.FINDER_PAT_C,U.FINDER_PAT_C,U.FINDER_PAT_D,U.FINDER_PAT_D],[U.FINDER_PAT_A,U.FINDER_PAT_A,U.FINDER_PAT_B,U.FINDER_PAT_B,U.FINDER_PAT_C,U.FINDER_PAT_C,U.FINDER_PAT_D,U.FINDER_PAT_E,U.FINDER_PAT_E],[U.FINDER_PAT_A,U.FINDER_PAT_A,U.FINDER_PAT_B,U.FINDER_PAT_B,U.FINDER_PAT_C,U.FINDER_PAT_C,U.FINDER_PAT_D,U.FINDER_PAT_E,U.FINDER_PAT_F,U.FINDER_PAT_F],[U.FINDER_PAT_A,U.FINDER_PAT_A,U.FINDER_PAT_B,U.FINDER_PAT_B,U.FINDER_PAT_C,U.FINDER_PAT_D,U.FINDER_PAT_D,U.FINDER_PAT_E,U.FINDER_PAT_E,U.FINDER_PAT_F,U.FINDER_PAT_F]],U.MAX_PAIRS=11;class Ic extends Sn{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class He extends lt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);He.addOrTally(this.possibleLeftPairs,r),t.reverse();let i=this.decodePair(t,!0,e,n);He.addOrTally(this.possibleRightPairs,i),t.reverse();for(let s of this.possibleLeftPairs)if(s.getCount()>1){for(let c of this.possibleRightPairs)if(c.getCount()>1&&He.checkChecksum(s,c))return He.constructResult(s,c)}throw new B}static addOrTally(e,t){if(t==null)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),i=new we;for(let f=13-r.length;f>0;f--)i.append("0");i.append(r);let s=0;for(let f=0;f<13;f++){let x=i.charAt(f).charCodeAt(0)-48;s+=(f&1)===0?3*x:x}s=10-s%10,s===10&&(s=0),i.append(s.toString());let c=e.getFinderPattern().getResultPoints(),u=t.getFinderPattern().getResultPoints();return new Qe(i.toString(),null,0,[c[0],c[1],u[0],u[1]],te.RSS_14,new Date().getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let i=this.findFinderPattern(e,t),s=this.parseFoundFinderPattern(e,n,t,i),c=r==null?null:r.get(ge.NEED_RESULT_POINT_CALLBACK);if(c!=null){let x=(i[0]+i[1])/2;t&&(x=e.getSize()-1-x),c.foundPossibleResultPoint(new ee(x,n))}let u=this.decodeDataCharacter(e,s,!0),f=this.decodeDataCharacter(e,s,!1);return new Ic(1597*u.getValue()+f.getValue(),u.getChecksumPortion()+4*f.getChecksumPortion(),s)}catch{return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let D=0;D<r.length;D++)r[D]=0;if(n)Ze.recordPatternInReverse(e,t.getStartEnd()[0],r);else{Ze.recordPattern(e,t.getStartEnd()[1]+1,r);for(let D=0,P=r.length-1;D<P;D++,P--){let V=r[D];r[D]=r[P],r[P]=V}}let i=n?16:15,s=Ce.sum(new Int32Array(r))/i,c=this.getOddCounts(),u=this.getEvenCounts(),f=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors();for(let D=0;D<r.length;D++){let P=r[D]/s,V=Math.floor(P+.5);V<1?V=1:V>8&&(V=8);let G=Math.floor(D/2);(D&1)===0?(c[G]=V,f[G]=P-V):(u[G]=V,x[G]=P-V)}this.adjustOddEvenCounts(n,i);let w=0,E=0;for(let D=c.length-1;D>=0;D--)E*=9,E+=c[D],w+=c[D];let I=0,M=0;for(let D=u.length-1;D>=0;D--)I*=9,I+=u[D],M+=u[D];let _=E+3*I;if(n){if((w&1)!==0||w>12||w<4)throw new B;let D=(12-w)/2,P=He.OUTSIDE_ODD_WIDEST[D],V=9-P,G=Ht.getRSSvalue(c,P,!1),H=Ht.getRSSvalue(u,V,!0),pe=He.OUTSIDE_EVEN_TOTAL_SUBSET[D],fe=He.OUTSIDE_GSUM[D];return new Sn(G*pe+H+fe,_)}else{if((M&1)!==0||M>10||M<4)throw new B;let D=(10-M)/2,P=He.INSIDE_ODD_WIDEST[D],V=9-P,G=Ht.getRSSvalue(c,P,!0),H=Ht.getRSSvalue(u,V,!1),pe=He.INSIDE_ODD_TOTAL_SUBSET[D],fe=He.INSIDE_GSUM[D];return new Sn(H*pe+G+fe,_)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),i=!1,s=0;for(;s<r&&(i=!e.get(s),t!==i);)s++;let c=0,u=s;for(let f=s;f<r;f++)if(e.get(f)!==i)n[c]++;else{if(c===3){if(lt.isFinderPattern(n))return[u,f];u+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,c--}else c++;n[c]=1,i=!i}throw new B}parseFoundFinderPattern(e,t,n,r){let i=e.get(r[0]),s=r[0]-1;for(;s>=0&&i!==e.get(s);)s--;s++;const c=r[0]-s,u=this.getDecodeFinderCounters(),f=new Int32Array(u.length);F.arraycopy(u,0,f,1,u.length-1),f[0]=c;const x=this.parseFinderValue(f,He.FINDER_PATTERNS);let w=s,E=r[1];return n&&(w=e.getSize()-1-w,E=e.getSize()-1-E),new xr(x,[s,r[1]],w,E,t)}adjustOddEvenCounts(e,t){let n=Ce.sum(new Int32Array(this.getOddCounts())),r=Ce.sum(new Int32Array(this.getEvenCounts())),i=!1,s=!1,c=!1,u=!1;e?(n>12?s=!0:n<4&&(i=!0),r>12?u=!0:r<4&&(c=!0)):(n>11?s=!0:n<5&&(i=!0),r>10?u=!0:r<4&&(c=!0));let f=n+r-t,x=(n&1)===(e?1:0),w=(r&1)===1;if(f===1)if(x){if(w)throw new B;s=!0}else{if(!w)throw new B;u=!0}else if(f===-1)if(x){if(w)throw new B;i=!0}else{if(!w)throw new B;c=!0}else if(f===0){if(x){if(!w)throw new B;n<r?(i=!0,u=!0):(s=!0,c=!0)}else if(w)throw new B}else throw new B;if(i){if(s)throw new B;lt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&lt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new B;lt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&lt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}He.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],He.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],He.OUTSIDE_GSUM=[0,161,961,2015,2715],He.INSIDE_GSUM=[0,336,1036,1516],He.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],He.INSIDE_ODD_WIDEST=[2,4,6,8],He.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class vn extends Ze{constructor(e,t){super(),this.readers=[],this.verbose=t===!0;const n=e?e.get(ge.POSSIBLE_FORMATS):null,r=e&&e.get(ge.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;n?((n.includes(te.EAN_13)||n.includes(te.UPC_A)||n.includes(te.EAN_8)||n.includes(te.UPC_E))&&this.readers.push(new Zr(e)),n.includes(te.CODE_39)&&this.readers.push(new qe(r)),n.includes(te.CODE_128)&&this.readers.push(new K),n.includes(te.ITF)&&this.readers.push(new ve),n.includes(te.RSS_14)&&this.readers.push(new He),n.includes(te.RSS_EXPANDED)&&this.readers.push(new U(this.verbose))):(this.readers.push(new Zr(e)),this.readers.push(new qe),this.readers.push(new Zr(e)),this.readers.push(new K),this.readers.push(new ve),this.readers.push(new He),this.readers.push(new U(this.verbose)))}decodeRow(e,t,n){for(let r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch{}throw new B}reset(){this.readers.forEach(e=>e.reset())}}class Sc extends Ot{constructor(e=500,t){super(new vn(t),e,t)}}class Ie{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ye{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class me{constructor(e,t,n,r,i,s){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=s;let c=0;const u=s.getECCodewords(),f=s.getECBlocks();for(let x of f)c+=x.getCount()*(x.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if((e&1)!==0||(t&1)!==0)throw new j;for(let n of me.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new j}toString(){return""+this.versionNumber}static buildVersions(){return[new me(1,10,10,8,8,new Ie(5,new ye(1,3))),new me(2,12,12,10,10,new Ie(7,new ye(1,5))),new me(3,14,14,12,12,new Ie(10,new ye(1,8))),new me(4,16,16,14,14,new Ie(12,new ye(1,12))),new me(5,18,18,16,16,new Ie(14,new ye(1,18))),new me(6,20,20,18,18,new Ie(18,new ye(1,22))),new me(7,22,22,20,20,new Ie(20,new ye(1,30))),new me(8,24,24,22,22,new Ie(24,new ye(1,36))),new me(9,26,26,24,24,new Ie(28,new ye(1,44))),new me(10,32,32,14,14,new Ie(36,new ye(1,62))),new me(11,36,36,16,16,new Ie(42,new ye(1,86))),new me(12,40,40,18,18,new Ie(48,new ye(1,114))),new me(13,44,44,20,20,new Ie(56,new ye(1,144))),new me(14,48,48,22,22,new Ie(68,new ye(1,174))),new me(15,52,52,24,24,new Ie(42,new ye(2,102))),new me(16,64,64,14,14,new Ie(56,new ye(2,140))),new me(17,72,72,16,16,new Ie(36,new ye(4,92))),new me(18,80,80,18,18,new Ie(48,new ye(4,114))),new me(19,88,88,20,20,new Ie(56,new ye(4,144))),new me(20,96,96,22,22,new Ie(68,new ye(4,174))),new me(21,104,104,24,24,new Ie(56,new ye(6,136))),new me(22,120,120,18,18,new Ie(68,new ye(6,175))),new me(23,132,132,20,20,new Ie(62,new ye(8,163))),new me(24,144,144,22,22,new Ie(62,new ye(8,156),new ye(2,155))),new me(25,8,18,6,16,new Ie(7,new ye(1,5))),new me(26,8,32,6,14,new Ie(11,new ye(1,10))),new me(27,12,26,10,24,new Ie(14,new ye(1,16))),new me(28,12,36,10,16,new Ie(18,new ye(1,22))),new me(29,16,36,14,16,new Ie(24,new ye(1,32))),new me(30,16,48,14,22,new Ie(28,new ye(1,49)))]}}me.VERSIONS=me.buildVersions();class Jr{constructor(e){const t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new j;this.version=Jr.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Fe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return me.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const i=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth();let c=!1,u=!1,f=!1,x=!1;do if(n===i&&r===0&&!c)e[t++]=this.readCorner1(i,s)&255,n-=2,r+=2,c=!0;else if(n===i-2&&r===0&&(s&3)!==0&&!u)e[t++]=this.readCorner2(i,s)&255,n-=2,r+=2,u=!0;else if(n===i+4&&r===2&&(s&7)===0&&!f)e[t++]=this.readCorner3(i,s)&255,n-=2,r+=2,f=!0;else if(n===i-2&&r===0&&(s&7)===4&&!x)e[t++]=this.readCorner4(i,s)&255,n-=2,r+=2,x=!0;else{do n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,i,s)&255),n-=2,r+=2;while(n>=0&&r<s);n+=1,r+=3;do n>=0&&r<s&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,i,s)&255),n+=2,r-=2;while(n<i&&r>=0);n+=3,r+=1}while(n<i||r<s);if(t!==this.version.getTotalCodewords())throw new j;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new N("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),s=t/r|0,c=n/i|0,u=s*r,f=c*i,x=new Fe(f,u);for(let w=0;w<s;++w){const E=w*r;for(let I=0;I<c;++I){const M=I*i;for(let _=0;_<r;++_){const D=w*(r+2)+1+_,P=E+_;for(let V=0;V<i;++V){const G=I*(i+2)+1+V;if(e.get(G,D)){const H=M+V;x.set(H,P)}}}}}return x}}class $r{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const i=n.getECBlocks();for(let _ of i)r+=_.getCount();const s=new Array(r);let c=0;for(let _ of i)for(let D=0;D<_.getCount();D++){const P=_.getDataCodewords(),V=n.getECCodewords()+P;s[c++]=new $r(P,new Uint8Array(V))}const f=s[0].codewords.length-n.getECCodewords(),x=f-1;let w=0;for(let _=0;_<x;_++)for(let D=0;D<c;D++)s[D].codewords[_]=e[w++];const E=t.getVersionNumber()===24,I=E?8:c;for(let _=0;_<I;_++)s[_].codewords[f-1]=e[w++];const M=s[0].codewords.length;for(let _=f;_<M;_++)for(let D=0;D<c;D++){const P=E?(D+8)%c:D,V=E&&P>7?_-1:_;s[P].codewords[V]=e[w++]}if(w!==e.length)throw new N;return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ei{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new N(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const i=this.bytes;if(n>0){const s=8-n,c=e<s?e:s,u=s-c,f=255>>8-c<<u;t=(i[r]&f)>>u,e-=c,n+=c,n===8&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|i[r]&255,r++,e-=8;if(e>0){const s=8-e,c=255>>s<<s;t=t<<e|(i[r]&c)>>s,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Je;(function(m){m[m.PAD_ENCODE=0]="PAD_ENCODE",m[m.ASCII_ENCODE=1]="ASCII_ENCODE",m[m.C40_ENCODE=2]="C40_ENCODE",m[m.TEXT_ENCODE=3]="TEXT_ENCODE",m[m.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",m[m.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",m[m.BASE256_ENCODE=6]="BASE256_ENCODE"})(Je||(Je={}));class tn{static decode(e){const t=new ei(e),n=new we,r=new we,i=new Array;let s=Je.ASCII_ENCODE;do if(s===Je.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,r);else{switch(s){case Je.C40_ENCODE:this.decodeC40Segment(t,n);break;case Je.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case Je.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case Je.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case Je.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new j}s=Je.ASCII_ENCODE}while(s!==Je.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new dt(e,n.toString(),i.length===0?null:i,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let i=e.readBits(8);if(i===0)throw new j;if(i<=128)return r&&(i+=128),t.append(String.fromCharCode(i-1)),Je.ASCII_ENCODE;if(i===129)return Je.PAD_ENCODE;if(i<=229){const s=i-130;s<10&&t.append("0"),t.append(""+s)}else switch(i){case 230:return Je.C40_ENCODE;case 231:return Je.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:r=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return Je.ANSIX12_ENCODE;case 239:return Je.TEXT_ENCODE;case 240:return Je.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new j;break}}while(e.available()>0);return Je.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let i=0;do{if(e.available()===8)return;const s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),r);for(let c=0;c<3;c++){const u=r[c];switch(i){case 0:if(u<3)i=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){const f=this.C40_BASIC_SET_CHARS[u];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f)}else throw new j;break;case 1:n?(t.append(String.fromCharCode(u+128)),n=!1):t.append(String.fromCharCode(u)),i=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){const f=this.C40_SHIFT2_SET_CHARS[u];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f)}else switch(u){case 27:t.append("");break;case 30:n=!0;break;default:throw new j}i=0;break;case 3:n?(t.append(String.fromCharCode(u+224)),n=!1):t.append(String.fromCharCode(u+96)),i=0;break;default:throw new j}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],i=0;do{if(e.available()===8)return;const s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),r);for(let c=0;c<3;c++){const u=r[c];switch(i){case 0:if(u<3)i=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){const f=this.TEXT_BASIC_SET_CHARS[u];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f)}else throw new j;break;case 1:n?(t.append(String.fromCharCode(u+128)),n=!1):t.append(String.fromCharCode(u)),i=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){const f=this.TEXT_SHIFT2_SET_CHARS[u];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f)}else switch(u){case 27:t.append("");break;case 30:n=!0;break;default:throw new j}i=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){const f=this.TEXT_SHIFT3_SET_CHARS[u];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f),i=0}else throw new j;break;default:throw new j}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(e.available()===8)return;const r=e.readBits(8);if(r===254)return;this.parseTwoBytes(r,e.readBits(8),n);for(let i=0;i<3;i++){const s=n[i];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new j;break}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=i*1600,i=Math.floor(r/40),n[1]=i,n[2]=r-i*40}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let r=e.readBits(6);if(r===31){const i=8-e.getBitOffset();i!==8&&e.readBits(i);return}(r&32)===0&&(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const i=this.unrandomize255State(e.readBits(8),r++);let s;if(i===0?s=e.available()/8|0:i<250?s=i:s=250*(i-249)+this.unrandomize255State(e.readBits(8),r++),s<0)throw new j;const c=new Uint8Array(s);for(let u=0;u<s;u++){if(e.available()<8)throw new j;c[u]=this.unrandomize255State(e.readBits(8),r++)}n.push(c);try{t.append(Xe.decode(c,ie.ISO88591))}catch(u){throw new Ut("Platform does not support required encoding: "+u.message)}}static unrandomize255State(e,t){const n=149*t%255+1,r=e-n;return r>=0?r:r+256}}tn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],tn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],tn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],tn.TEXT_SHIFT2_SET_CHARS=tn.C40_SHIFT2_SET_CHARS,tn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Tc{constructor(){this.rsDecoder=new Un(Ee.DATA_MATRIX_FIELD_256)}decode(e){const t=new Jr(e),n=t.getVersion(),r=t.readCodewords(),i=$r.getDataBlocks(r,n);let s=0;for(let f of i)s+=f.getNumDataCodewords();const c=new Uint8Array(s),u=i.length;for(let f=0;f<u;f++){const x=i[f],w=x.getCodewords(),E=x.getNumDataCodewords();this.correctErrors(w,E);for(let I=0;I<E;I++)c[I*u+f]=w[I]}return tn.decode(c)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new k}for(let r=0;r<t;r++)e[r]=n[r]}}class Ye{constructor(e){this.image=e,this.rectangleDetector=new Zt(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new B;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],i=t[2],s=t[3];let c=this.transitionsBetween(n,s)+1,u=this.transitionsBetween(i,s)+1;(c&1)===1&&(c+=1),(u&1)===1&&(u+=1),4*c<7*u&&4*u<7*c&&(c=u=Math.max(c,u));let f=Ye.sampleGrid(this.image,n,r,i,s,c,u);return new hr(f,[n,r,i,s])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new ee(e.getX()+r,e.getY()+i)}static moveAway(e,t,n){let r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new ee(r,i)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],i=e[2],s=this.transitionsBetween(t,n),c=this.transitionsBetween(n,r),u=this.transitionsBetween(r,i),f=this.transitionsBetween(i,t),x=s,w=[i,t,n,r];return x>c&&(x=c,w[0]=t,w[1]=n,w[2]=r,w[3]=i),x>u&&(x=u,w[0]=n,w[1]=r,w[2]=i,w[3]=t),x>f&&(w[0]=r,w[1]=i,w[2]=t,w[3]=n),w}detectSolid2(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),c=Ye.shiftPoint(n,r,(s+1)*4),u=Ye.shiftPoint(r,n,(s+1)*4),f=this.transitionsBetween(c,t),x=this.transitionsBetween(u,i);return f<x?(e[0]=t,e[1]=n,e[2]=r,e[3]=i):(e[0]=n,e[1]=r,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),c=this.transitionsBetween(n,i),u=Ye.shiftPoint(t,n,(c+1)*4),f=Ye.shiftPoint(r,n,(s+1)*4);s=this.transitionsBetween(u,i),c=this.transitionsBetween(f,i);let x=new ee(i.getX()+(r.getX()-n.getX())/(s+1),i.getY()+(r.getY()-n.getY())/(s+1)),w=new ee(i.getX()+(t.getX()-n.getX())/(c+1),i.getY()+(t.getY()-n.getY())/(c+1));if(!this.isValid(x))return this.isValid(w)?w:null;if(!this.isValid(w))return x;let E=this.transitionsBetween(u,x)+this.transitionsBetween(f,x),I=this.transitionsBetween(u,w)+this.transitionsBetween(f,w);return E>I?x:w}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i)+1,c=this.transitionsBetween(r,i)+1,u=Ye.shiftPoint(t,n,c*4),f=Ye.shiftPoint(r,n,s*4);s=this.transitionsBetween(u,i)+1,c=this.transitionsBetween(f,i)+1,(s&1)===1&&(s+=1),(c&1)===1&&(c+=1);let x=(t.getX()+n.getX()+r.getX()+i.getX())/4,w=(t.getY()+n.getY()+r.getY()+i.getY())/4;t=Ye.moveAway(t,x,w),n=Ye.moveAway(n,x,w),r=Ye.moveAway(r,x,w),i=Ye.moveAway(i,x,w);let E,I;return u=Ye.shiftPoint(t,n,c*4),u=Ye.shiftPoint(u,i,s*4),E=Ye.shiftPoint(n,t,c*4),E=Ye.shiftPoint(E,r,s*4),f=Ye.shiftPoint(r,i,c*4),f=Ye.shiftPoint(f,n,s*4),I=Ye.shiftPoint(i,r,c*4),I=Ye.shiftPoint(I,t,s*4),[u,E,f,I]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,i,s,c){return $t.getInstance().sampleGrid(e,s,c,.5,.5,s-.5,.5,s-.5,c-.5,.5,c-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),s=Math.trunc(t.getY()),c=Math.abs(s-r)>Math.abs(i-n);if(c){let _=n;n=r,r=_,_=i,i=s,s=_}let u=Math.abs(i-n),f=Math.abs(s-r),x=-u/2,w=r<s?1:-1,E=n<i?1:-1,I=0,M=this.image.get(c?r:n,c?n:r);for(let _=n,D=r;_!==i;_+=E){let P=this.image.get(c?D:_,c?_:D);if(P!==M&&(I++,M=P),x+=f,x>0){if(D===s)break;D+=w,x-=u}}return I}}class nn{constructor(){this.decoder=new Tc}decode(e,t=null){let n,r;if(t!=null&&t.has(ge.PURE_BARCODE)){const f=nn.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(f),r=nn.NO_POINTS}else{const f=new Ye(e.getBlackMatrix()).detect();n=this.decoder.decode(f.getBits()),r=f.getPoints()}const i=n.getRawBytes(),s=new Qe(n.getText(),i,8*i.length,r,te.DATA_MATRIX,F.currentTimeMillis()),c=n.getByteSegments();c!=null&&s.putMetadata(We.BYTE_SEGMENTS,c);const u=n.getECLevel();return u!=null&&s.putMetadata(We.ERROR_CORRECTION_LEVEL,u),s}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new B;const r=this.moduleSize(t,e);let i=t[1];const s=n[1];let c=t[0];const f=(n[0]-c+1)/r,x=(s-i+1)/r;if(f<=0||x<=0)throw new B;const w=r/2;i+=w,c+=w;const E=new Fe(f,x);for(let I=0;I<x;I++){const M=i+I*r;for(let _=0;_<f;_++)e.get(c+_*r,M)&&E.set(_,I)}return E}static moduleSize(e,t){const n=t.getWidth();let r=e[0];const i=e[1];for(;r<n&&t.get(r,i);)r++;if(r===n)throw new B;const s=r-e[0];if(s===0)throw new B;return s}}nn.NO_POINTS=[];class Nc extends Ot{constructor(e=500){super(new nn,e)}}var Mn;(function(m){m[m.L=0]="L",m[m.M=1]="M",m[m.Q=2]="Q",m[m.H=3]="H"})(Mn||(Mn={}));class Re{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,Re.FOR_BITS.set(n,this),Re.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Re.L;case"M":return Re.M;case"Q":return Re.Q;case"H":return Re.H;default:throw new S(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Re))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=Re.FOR_BITS.size)throw new N;return Re.FOR_BITS.get(e)}}Re.FOR_BITS=new Map,Re.FOR_VALUE=new Map,Re.L=new Re(Mn.L,"L",1),Re.M=new Re(Mn.M,"M",0),Re.Q=new Re(Mn.Q,"Q",3),Re.H=new Re(Mn.H,"H",2);class ut{constructor(e){this.errorCorrectionLevel=Re.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,t){return W.bitCount(e^t)}static decodeFormatInformation(e,t){const n=ut.doDecodeFormatInformation(e,t);return n!==null?n:ut.doDecodeFormatInformation(e^ut.FORMAT_INFO_MASK_QR,t^ut.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const i of ut.FORMAT_INFO_DECODE_LOOKUP){const s=i[0];if(s===e||s===t)return new ut(i[1]);let c=ut.numBitsDiffering(e,s);c<n&&(r=i[1],n=c),e!==t&&(c=ut.numBitsDiffering(t,s),c<n&&(r=i[1],n=c))}return n<=3?new ut(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof ut))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}ut.FORMAT_INFO_MASK_QR=21522,ut.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class R{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class y{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ne{constructor(e,t,...n){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=n;let r=0;const i=n[0].getECCodewordsPerBlock(),s=n[0].getECBlocks();for(const c of s)r+=c.getCount()*(c.getDataCodewords()+i);this.totalCodewords=r}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new j;try{return this.getVersionForNumber((e-17)/4)}catch{throw new j}}static getVersionForNumber(e){if(e<1||e>40)throw new N;return ne.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<ne.VERSION_DECODE_INFO.length;r++){const i=ne.VERSION_DECODE_INFO[r];if(i===e)return ne.getVersionForNumber(r+7);const s=ut.numBitsDiffering(e,i);s<t&&(n=r+7,t=s)}return t<=3?ne.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new Fe(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const i=this.alignmentPatternCenters[r]-2;for(let s=0;s<n;s++)r===0&&(s===0||s===n-1)||r===n-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,i,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}ne.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ne.VERSIONS=[new ne(1,new Int32Array(0),new R(7,new y(1,19)),new R(10,new y(1,16)),new R(13,new y(1,13)),new R(17,new y(1,9))),new ne(2,Int32Array.from([6,18]),new R(10,new y(1,34)),new R(16,new y(1,28)),new R(22,new y(1,22)),new R(28,new y(1,16))),new ne(3,Int32Array.from([6,22]),new R(15,new y(1,55)),new R(26,new y(1,44)),new R(18,new y(2,17)),new R(22,new y(2,13))),new ne(4,Int32Array.from([6,26]),new R(20,new y(1,80)),new R(18,new y(2,32)),new R(26,new y(2,24)),new R(16,new y(4,9))),new ne(5,Int32Array.from([6,30]),new R(26,new y(1,108)),new R(24,new y(2,43)),new R(18,new y(2,15),new y(2,16)),new R(22,new y(2,11),new y(2,12))),new ne(6,Int32Array.from([6,34]),new R(18,new y(2,68)),new R(16,new y(4,27)),new R(24,new y(4,19)),new R(28,new y(4,15))),new ne(7,Int32Array.from([6,22,38]),new R(20,new y(2,78)),new R(18,new y(4,31)),new R(18,new y(2,14),new y(4,15)),new R(26,new y(4,13),new y(1,14))),new ne(8,Int32Array.from([6,24,42]),new R(24,new y(2,97)),new R(22,new y(2,38),new y(2,39)),new R(22,new y(4,18),new y(2,19)),new R(26,new y(4,14),new y(2,15))),new ne(9,Int32Array.from([6,26,46]),new R(30,new y(2,116)),new R(22,new y(3,36),new y(2,37)),new R(20,new y(4,16),new y(4,17)),new R(24,new y(4,12),new y(4,13))),new ne(10,Int32Array.from([6,28,50]),new R(18,new y(2,68),new y(2,69)),new R(26,new y(4,43),new y(1,44)),new R(24,new y(6,19),new y(2,20)),new R(28,new y(6,15),new y(2,16))),new ne(11,Int32Array.from([6,30,54]),new R(20,new y(4,81)),new R(30,new y(1,50),new y(4,51)),new R(28,new y(4,22),new y(4,23)),new R(24,new y(3,12),new y(8,13))),new ne(12,Int32Array.from([6,32,58]),new R(24,new y(2,92),new y(2,93)),new R(22,new y(6,36),new y(2,37)),new R(26,new y(4,20),new y(6,21)),new R(28,new y(7,14),new y(4,15))),new ne(13,Int32Array.from([6,34,62]),new R(26,new y(4,107)),new R(22,new y(8,37),new y(1,38)),new R(24,new y(8,20),new y(4,21)),new R(22,new y(12,11),new y(4,12))),new ne(14,Int32Array.from([6,26,46,66]),new R(30,new y(3,115),new y(1,116)),new R(24,new y(4,40),new y(5,41)),new R(20,new y(11,16),new y(5,17)),new R(24,new y(11,12),new y(5,13))),new ne(15,Int32Array.from([6,26,48,70]),new R(22,new y(5,87),new y(1,88)),new R(24,new y(5,41),new y(5,42)),new R(30,new y(5,24),new y(7,25)),new R(24,new y(11,12),new y(7,13))),new ne(16,Int32Array.from([6,26,50,74]),new R(24,new y(5,98),new y(1,99)),new R(28,new y(7,45),new y(3,46)),new R(24,new y(15,19),new y(2,20)),new R(30,new y(3,15),new y(13,16))),new ne(17,Int32Array.from([6,30,54,78]),new R(28,new y(1,107),new y(5,108)),new R(28,new y(10,46),new y(1,47)),new R(28,new y(1,22),new y(15,23)),new R(28,new y(2,14),new y(17,15))),new ne(18,Int32Array.from([6,30,56,82]),new R(30,new y(5,120),new y(1,121)),new R(26,new y(9,43),new y(4,44)),new R(28,new y(17,22),new y(1,23)),new R(28,new y(2,14),new y(19,15))),new ne(19,Int32Array.from([6,30,58,86]),new R(28,new y(3,113),new y(4,114)),new R(26,new y(3,44),new y(11,45)),new R(26,new y(17,21),new y(4,22)),new R(26,new y(9,13),new y(16,14))),new ne(20,Int32Array.from([6,34,62,90]),new R(28,new y(3,107),new y(5,108)),new R(26,new y(3,41),new y(13,42)),new R(30,new y(15,24),new y(5,25)),new R(28,new y(15,15),new y(10,16))),new ne(21,Int32Array.from([6,28,50,72,94]),new R(28,new y(4,116),new y(4,117)),new R(26,new y(17,42)),new R(28,new y(17,22),new y(6,23)),new R(30,new y(19,16),new y(6,17))),new ne(22,Int32Array.from([6,26,50,74,98]),new R(28,new y(2,111),new y(7,112)),new R(28,new y(17,46)),new R(30,new y(7,24),new y(16,25)),new R(24,new y(34,13))),new ne(23,Int32Array.from([6,30,54,78,102]),new R(30,new y(4,121),new y(5,122)),new R(28,new y(4,47),new y(14,48)),new R(30,new y(11,24),new y(14,25)),new R(30,new y(16,15),new y(14,16))),new ne(24,Int32Array.from([6,28,54,80,106]),new R(30,new y(6,117),new y(4,118)),new R(28,new y(6,45),new y(14,46)),new R(30,new y(11,24),new y(16,25)),new R(30,new y(30,16),new y(2,17))),new ne(25,Int32Array.from([6,32,58,84,110]),new R(26,new y(8,106),new y(4,107)),new R(28,new y(8,47),new y(13,48)),new R(30,new y(7,24),new y(22,25)),new R(30,new y(22,15),new y(13,16))),new ne(26,Int32Array.from([6,30,58,86,114]),new R(28,new y(10,114),new y(2,115)),new R(28,new y(19,46),new y(4,47)),new R(28,new y(28,22),new y(6,23)),new R(30,new y(33,16),new y(4,17))),new ne(27,Int32Array.from([6,34,62,90,118]),new R(30,new y(8,122),new y(4,123)),new R(28,new y(22,45),new y(3,46)),new R(30,new y(8,23),new y(26,24)),new R(30,new y(12,15),new y(28,16))),new ne(28,Int32Array.from([6,26,50,74,98,122]),new R(30,new y(3,117),new y(10,118)),new R(28,new y(3,45),new y(23,46)),new R(30,new y(4,24),new y(31,25)),new R(30,new y(11,15),new y(31,16))),new ne(29,Int32Array.from([6,30,54,78,102,126]),new R(30,new y(7,116),new y(7,117)),new R(28,new y(21,45),new y(7,46)),new R(30,new y(1,23),new y(37,24)),new R(30,new y(19,15),new y(26,16))),new ne(30,Int32Array.from([6,26,52,78,104,130]),new R(30,new y(5,115),new y(10,116)),new R(28,new y(19,47),new y(10,48)),new R(30,new y(15,24),new y(25,25)),new R(30,new y(23,15),new y(25,16))),new ne(31,Int32Array.from([6,30,56,82,108,134]),new R(30,new y(13,115),new y(3,116)),new R(28,new y(2,46),new y(29,47)),new R(30,new y(42,24),new y(1,25)),new R(30,new y(23,15),new y(28,16))),new ne(32,Int32Array.from([6,34,60,86,112,138]),new R(30,new y(17,115)),new R(28,new y(10,46),new y(23,47)),new R(30,new y(10,24),new y(35,25)),new R(30,new y(19,15),new y(35,16))),new ne(33,Int32Array.from([6,30,58,86,114,142]),new R(30,new y(17,115),new y(1,116)),new R(28,new y(14,46),new y(21,47)),new R(30,new y(29,24),new y(19,25)),new R(30,new y(11,15),new y(46,16))),new ne(34,Int32Array.from([6,34,62,90,118,146]),new R(30,new y(13,115),new y(6,116)),new R(28,new y(14,46),new y(23,47)),new R(30,new y(44,24),new y(7,25)),new R(30,new y(59,16),new y(1,17))),new ne(35,Int32Array.from([6,30,54,78,102,126,150]),new R(30,new y(12,121),new y(7,122)),new R(28,new y(12,47),new y(26,48)),new R(30,new y(39,24),new y(14,25)),new R(30,new y(22,15),new y(41,16))),new ne(36,Int32Array.from([6,24,50,76,102,128,154]),new R(30,new y(6,121),new y(14,122)),new R(28,new y(6,47),new y(34,48)),new R(30,new y(46,24),new y(10,25)),new R(30,new y(2,15),new y(64,16))),new ne(37,Int32Array.from([6,28,54,80,106,132,158]),new R(30,new y(17,122),new y(4,123)),new R(28,new y(29,46),new y(14,47)),new R(30,new y(49,24),new y(10,25)),new R(30,new y(24,15),new y(46,16))),new ne(38,Int32Array.from([6,32,58,84,110,136,162]),new R(30,new y(4,122),new y(18,123)),new R(28,new y(13,46),new y(32,47)),new R(30,new y(48,24),new y(14,25)),new R(30,new y(42,15),new y(32,16))),new ne(39,Int32Array.from([6,26,54,82,110,138,166]),new R(30,new y(20,117),new y(4,118)),new R(28,new y(40,47),new y(7,48)),new R(30,new y(43,24),new y(22,25)),new R(30,new y(10,15),new y(67,16))),new ne(40,Int32Array.from([6,30,58,86,114,142,170]),new R(30,new y(19,118),new y(6,119)),new R(28,new y(18,47),new y(31,48)),new R(30,new y(34,24),new y(34,25)),new R(30,new y(20,15),new y(61,16)))];var nt;(function(m){m[m.DATA_MASK_000=0]="DATA_MASK_000",m[m.DATA_MASK_001=1]="DATA_MASK_001",m[m.DATA_MASK_010=2]="DATA_MASK_010",m[m.DATA_MASK_011=3]="DATA_MASK_011",m[m.DATA_MASK_100=4]="DATA_MASK_100",m[m.DATA_MASK_101=5]="DATA_MASK_101",m[m.DATA_MASK_110=6]="DATA_MASK_110",m[m.DATA_MASK_111=7]="DATA_MASK_111"})(nt||(nt={}));class vt{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}vt.values=new Map([[nt.DATA_MASK_000,new vt(nt.DATA_MASK_000,(m,e)=>(m+e&1)===0)],[nt.DATA_MASK_001,new vt(nt.DATA_MASK_001,(m,e)=>(m&1)===0)],[nt.DATA_MASK_010,new vt(nt.DATA_MASK_010,(m,e)=>e%3===0)],[nt.DATA_MASK_011,new vt(nt.DATA_MASK_011,(m,e)=>(m+e)%3===0)],[nt.DATA_MASK_100,new vt(nt.DATA_MASK_100,(m,e)=>(Math.floor(m/2)+Math.floor(e/3)&1)===0)],[nt.DATA_MASK_101,new vt(nt.DATA_MASK_101,(m,e)=>m*e%6===0)],[nt.DATA_MASK_110,new vt(nt.DATA_MASK_110,(m,e)=>m*e%6<3)],[nt.DATA_MASK_111,new vt(nt.DATA_MASK_111,(m,e)=>(m+e+m*e%3&1)===0)]]);class vc{constructor(e){const t=e.getHeight();if(t<21||(t&3)!==1)throw new j;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let i=t-1;i>=r;i--)n=this.copyBit(8,i,n);for(let i=t-8;i<t;i++)n=this.copyBit(i,8,n);if(this.parsedFormatInfo=ut.decodeFormatInformation(e,n),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new j}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return ne.getVersionForNumber(t);let n=0;const r=e-11;for(let s=5;s>=0;s--)for(let c=e-9;c>=r;c--)n=this.copyBit(c,s,n);let i=ne.decodeVersionInformation(n);if(i!==null&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;n=0;for(let s=5;s>=0;s--)for(let c=e-9;c>=r;c--)n=this.copyBit(s,c,n);if(i=ne.decodeVersionInformation(n),i!==null&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new j}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=vt.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const i=t.buildFunctionPattern();let s=!0;const c=new Uint8Array(t.getTotalCodewords());let u=0,f=0,x=0;for(let w=r-1;w>0;w-=2){w===6&&w--;for(let E=0;E<r;E++){const I=s?r-1-E:E;for(let M=0;M<2;M++)i.get(w-M,I)||(x++,f<<=1,this.bitMatrix.get(w-M,I)&&(f|=1),x===8&&(c[u++]=f,x=0,f=0))}s=!s}if(u!==t.getTotalCodewords())throw new j;return c}remask(){if(this.parsedFormatInfo===null)return;const e=vt.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,i=e.getHeight();r<i;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class ti{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new N;const r=t.getECBlocksForLevel(n);let i=0;const s=r.getECBlocks();for(const M of s)i+=M.getCount();const c=new Array(i);let u=0;for(const M of s)for(let _=0;_<M.getCount();_++){const D=M.getDataCodewords(),P=r.getECCodewordsPerBlock()+D;c[u++]=new ti(D,new Uint8Array(P))}const f=c[0].codewords.length;let x=c.length-1;for(;x>=0&&c[x].codewords.length!==f;)x--;x++;const w=f-r.getECCodewordsPerBlock();let E=0;for(let M=0;M<w;M++)for(let _=0;_<u;_++)c[_].codewords[M]=e[E++];for(let M=x;M<u;M++)c[M].codewords[w]=e[E++];const I=c[0].codewords.length;for(let M=w;M<I;M++)for(let _=0;_<u;_++){const D=_<x?M:M+1;c[_].codewords[D]=e[E++]}return c}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Mt;(function(m){m[m.TERMINATOR=0]="TERMINATOR",m[m.NUMERIC=1]="NUMERIC",m[m.ALPHANUMERIC=2]="ALPHANUMERIC",m[m.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",m[m.BYTE=4]="BYTE",m[m.ECI=5]="ECI",m[m.KANJI=6]="KANJI",m[m.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",m[m.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",m[m.HANZI=9]="HANZI"})(Mt||(Mt={}));class re{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,re.FOR_BITS.set(r,this),re.FOR_VALUE.set(e,this)}static forBits(e){const t=re.FOR_BITS.get(e);if(t===void 0)throw new N;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof re))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}re.FOR_BITS=new Map,re.FOR_VALUE=new Map,re.TERMINATOR=new re(Mt.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),re.NUMERIC=new re(Mt.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),re.ALPHANUMERIC=new re(Mt.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),re.STRUCTURED_APPEND=new re(Mt.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),re.BYTE=new re(Mt.BYTE,"BYTE",Int32Array.from([8,16,16]),4),re.ECI=new re(Mt.ECI,"ECI",Int32Array.from([0,0,0]),7),re.KANJI=new re(Mt.KANJI,"KANJI",Int32Array.from([8,10,12]),8),re.FNC1_FIRST_POSITION=new re(Mt.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),re.FNC1_SECOND_POSITION=new re(Mt.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),re.HANZI=new re(Mt.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class je{static decode(e,t,n,r){const i=new ei(e);let s=new we;const c=new Array;let u=-1,f=-1;try{let x=null,w=!1,E;do{if(i.available()<4)E=re.TERMINATOR;else{const I=i.readBits(4);E=re.forBits(I)}switch(E){case re.TERMINATOR:break;case re.FNC1_FIRST_POSITION:case re.FNC1_SECOND_POSITION:w=!0;break;case re.STRUCTURED_APPEND:if(i.available()<16)throw new j;u=i.readBits(8),f=i.readBits(8);break;case re.ECI:const I=je.parseECIValue(i);if(x=z.getCharacterSetECIByValue(I),x===null)throw new j;break;case re.HANZI:const M=i.readBits(4),_=i.readBits(E.getCharacterCountBits(t));M===je.GB2312_SUBSET&&je.decodeHanziSegment(i,s,_);break;default:const D=i.readBits(E.getCharacterCountBits(t));switch(E){case re.NUMERIC:je.decodeNumericSegment(i,s,D);break;case re.ALPHANUMERIC:je.decodeAlphanumericSegment(i,s,D,w);break;case re.BYTE:je.decodeByteSegment(i,s,D,x,c,r);break;case re.KANJI:je.decodeKanjiSegment(i,s,D);break;default:throw new j}break}}while(E!==re.TERMINATOR)}catch{throw new j}return new dt(e,s.toString(),c.length===0?null:c,n===null?null:n.toString(),u,f)}static decodeHanziSegment(e,t,n){if(n*13>e.available())throw new j;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const s=e.readBits(13);let c=s/96<<8&4294967295|s%96;c<959?c+=41377:c+=42657,r[i]=c>>8&255,r[i+1]=c&255,i+=2,n--}try{t.append(Xe.decode(r,ie.GB2312))}catch(s){throw new j(s)}}static decodeKanjiSegment(e,t,n){if(n*13>e.available())throw new j;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const s=e.readBits(13);let c=s/192<<8&4294967295|s%192;c<7936?c+=33088:c+=49472,r[i]=c>>8,r[i+1]=c,i+=2,n--}try{t.append(Xe.decode(r,ie.SHIFT_JIS))}catch(s){throw new j(s)}}static decodeByteSegment(e,t,n,r,i,s){if(8*n>e.available())throw new j;const c=new Uint8Array(n);for(let f=0;f<n;f++)c[f]=e.readBits(8);let u;r===null?u=ie.guessEncoding(c,s):u=r.getName();try{t.append(Xe.decode(c,u))}catch(f){throw new j(f)}i.push(c)}static toAlphaNumericChar(e){if(e>=je.ALPHANUMERIC_CHARS.length)throw new j;return je.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){const i=t.length();for(;n>1;){if(e.available()<11)throw new j;const s=e.readBits(11);t.append(je.toAlphaNumericChar(Math.floor(s/45))),t.append(je.toAlphaNumericChar(s%45)),n-=2}if(n===1){if(e.available()<6)throw new j;t.append(je.toAlphaNumericChar(e.readBits(6)))}if(r)for(let s=i;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,""))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new j;const r=e.readBits(10);if(r>=1e3)throw new j;t.append(je.toAlphaNumericChar(Math.floor(r/100))),t.append(je.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(je.toAlphaNumericChar(r%10)),n-=3}if(n===2){if(e.available()<7)throw new j;const r=e.readBits(7);if(r>=100)throw new j;t.append(je.toAlphaNumericChar(Math.floor(r/10))),t.append(je.toAlphaNumericChar(r%10))}else if(n===1){if(e.available()<4)throw new j;const r=e.readBits(4);if(r>=10)throw new j;t.append(je.toAlphaNumericChar(r))}}static parseECIValue(e){const t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){const n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){const n=e.readBits(16);return(t&31)<<16&4294967295|n}throw new j}}je.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",je.GB2312_SUBSET=1;class us{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Mc{constructor(){this.rsDecoder=new Un(Ee.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(Fe.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new vc(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const i=this.decodeBitMatrixParser(n,t);return i.setOther(new us(!0)),i}catch(i){throw r!==null?r:i}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),s=ti.getDataBlocks(i,n,r);let c=0;for(const x of s)c+=x.getNumDataCodewords();const u=new Uint8Array(c);let f=0;for(const x of s){const w=x.getCodewords(),E=x.getNumDataCodewords();this.correctErrors(w,E);for(let I=0;I<E;I++)u[f++]=w[I]}return je.decode(u,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new k}for(let r=0;r<t;r++)e[r]=n[r]}}class ni extends ee{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,i=(this.getY()+e)/2,s=(this.estimatedModuleSize+n)/2;return new ni(r,i,s)}}class wr{constructor(e,t,n,r,i,s,c){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=s,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=this.width,r=e+n,i=this.startY+t/2,s=new Int32Array(3),c=this.image;for(let u=0;u<t;u++){const f=i+((u&1)===0?Math.floor((u+1)/2):-Math.floor((u+1)/2));s[0]=0,s[1]=0,s[2]=0;let x=e;for(;x<r&&!c.get(x,f);)x++;let w=0;for(;x<r;){if(c.get(x,f))if(w===1)s[1]++;else if(w===2){if(this.foundPatternCross(s)){const E=this.handlePossibleCenter(s,f,x);if(E!==null)return E}s[0]=s[2],s[1]=1,s[2]=0,w=1}else s[++w]++;else w===1&&w++,s[w]++;x++}if(this.foundPatternCross(s)){const E=this.handlePossibleCenter(s,f,r);if(E!==null)return E}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new B}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const i=this.image,s=i.getHeight(),c=this.crossCheckStateCount;c[0]=0,c[1]=0,c[2]=0;let u=e;for(;u>=0&&i.get(t,u)&&c[1]<=n;)c[1]++,u--;if(u<0||c[1]>n)return NaN;for(;u>=0&&!i.get(t,u)&&c[0]<=n;)c[0]++,u--;if(c[0]>n)return NaN;for(u=e+1;u<s&&i.get(t,u)&&c[1]<=n;)c[1]++,u++;if(u===s||c[1]>n)return NaN;for(;u<s&&!i.get(t,u)&&c[2]<=n;)c[2]++,u++;if(c[2]>n)return NaN;const f=c[0]+c[1]+c[2];return 5*Math.abs(f-r)>=2*r?NaN:this.foundPatternCross(c)?wr.centerFromEnd(c,u):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],i=wr.centerFromEnd(e,n),s=this.crossCheckVertical(t,i,2*e[1],r);if(!isNaN(s)){const c=(e[0]+e[1]+e[2])/3;for(const f of this.possibleCenters)if(f.aboutEquals(c,s,i))return f.combineEstimate(s,i,c);const u=new ni(i,s,c);this.possibleCenters.push(u),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(u)}return null}}class ri extends ee{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,r===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,i=(this.count*this.getX()+t)/r,s=(this.count*this.getY()+e)/r,c=(this.count*this.estimatedModuleSize+n)/r;return new ri(i,s,c,r)}}class _c{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class rt{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=e!=null&&e.get(ge.TRY_HARDER)!==void 0,n=e!=null&&e.get(ge.PURE_BARCODE)!==void 0,r=this.image,i=r.getHeight(),s=r.getWidth();let c=Math.floor(3*i/(4*rt.MAX_MODULES));(c<rt.MIN_SKIP||t)&&(c=rt.MIN_SKIP);let u=!1;const f=new Int32Array(5);for(let w=c-1;w<i&&!u;w+=c){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;let E=0;for(let I=0;I<s;I++)if(r.get(I,w))(E&1)===1&&E++,f[E]++;else if((E&1)===0)if(E===4)if(rt.foundPatternCross(f)){if(this.handlePossibleCenter(f,w,I,n)===!0)if(c=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{const _=this.findRowSkip();_>f[2]&&(w+=_-f[2]-c,I=s-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,E=3;continue}E=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,E=3;else f[++E]++;else f[E]++;rt.foundPatternCross(f)&&this.handlePossibleCenter(f,w,s,n)===!0&&(c=f[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}const x=this.selectBestPatterns();return ee.orderBestPatterns(x),new _c(x)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let i=0;i<5;i++){const s=e[i];if(s===0)return!1;t+=s}if(t<7)return!1;const n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){const i=this.getCrossCheckStateCount();let s=0;const c=this.image;for(;e>=s&&t>=s&&c.get(t-s,e-s);)i[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!c.get(t-s,e-s)&&i[1]<=n;)i[1]++,s++;if(e<s||t<s||i[1]>n)return!1;for(;e>=s&&t>=s&&c.get(t-s,e-s)&&i[0]<=n;)i[0]++,s++;if(i[0]>n)return!1;const u=c.getHeight(),f=c.getWidth();for(s=1;e+s<u&&t+s<f&&c.get(t+s,e+s);)i[2]++,s++;if(e+s>=u||t+s>=f)return!1;for(;e+s<u&&t+s<f&&!c.get(t+s,e+s)&&i[3]<n;)i[3]++,s++;if(e+s>=u||t+s>=f||i[3]>=n)return!1;for(;e+s<u&&t+s<f&&c.get(t+s,e+s)&&i[4]<n;)i[4]++,s++;if(i[4]>=n)return!1;const x=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(x-r)<2*r&&rt.foundPatternCross(i)}crossCheckVertical(e,t,n,r){const i=this.image,s=i.getHeight(),c=this.getCrossCheckStateCount();let u=e;for(;u>=0&&i.get(t,u);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(t,u)&&c[1]<=n;)c[1]++,u--;if(u<0||c[1]>n)return NaN;for(;u>=0&&i.get(t,u)&&c[0]<=n;)c[0]++,u--;if(c[0]>n)return NaN;for(u=e+1;u<s&&i.get(t,u);)c[2]++,u++;if(u===s)return NaN;for(;u<s&&!i.get(t,u)&&c[3]<n;)c[3]++,u++;if(u===s||c[3]>=n)return NaN;for(;u<s&&i.get(t,u)&&c[4]<n;)c[4]++,u++;if(c[4]>=n)return NaN;const f=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(f-r)>=2*r?NaN:rt.foundPatternCross(c)?rt.centerFromEnd(c,u):NaN}crossCheckHorizontal(e,t,n,r){const i=this.image,s=i.getWidth(),c=this.getCrossCheckStateCount();let u=e;for(;u>=0&&i.get(u,t);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(u,t)&&c[1]<=n;)c[1]++,u--;if(u<0||c[1]>n)return NaN;for(;u>=0&&i.get(u,t)&&c[0]<=n;)c[0]++,u--;if(c[0]>n)return NaN;for(u=e+1;u<s&&i.get(u,t);)c[2]++,u++;if(u===s)return NaN;for(;u<s&&!i.get(u,t)&&c[3]<n;)c[3]++,u++;if(u===s||c[3]>=n)return NaN;for(;u<s&&i.get(u,t)&&c[4]<n;)c[4]++,u++;if(c[4]>=n)return NaN;const f=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(f-r)>=r?NaN:rt.foundPatternCross(c)?rt.centerFromEnd(c,u):NaN}handlePossibleCenter(e,t,n,r){const i=e[0]+e[1]+e[2]+e[3]+e[4];let s=rt.centerFromEnd(e,n),c=this.crossCheckVertical(t,Math.floor(s),e[2],i);if(!isNaN(c)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(c),e[2],i),!isNaN(s)&&(!r||this.crossCheckDiagonal(Math.floor(c),Math.floor(s),e[2],i)))){const u=i/7;let f=!1;const x=this.possibleCenters;for(let w=0,E=x.length;w<E;w++){const I=x[w];if(I.aboutEquals(u,c,s)){x[w]=I.combineEstimate(c,s,u),f=!0;break}}if(!f){const w=new ri(s,c,u);x.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let t=null;for(const n of this.possibleCenters)if(n.getCount()>=rt.CENTER_QUORUM)if(t==null)t=n;else return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-n.getX())-Math.abs(t.getY()-n.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const s of this.possibleCenters)s.getCount()>=rt.CENTER_QUORUM&&(e++,t+=s.getEstimatedModuleSize());if(e<3)return!1;const r=t/n;let i=0;for(const s of this.possibleCenters)i+=Math.abs(s.getEstimatedModuleSize()-r);return i<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new B;const t=this.possibleCenters;let n;if(e>3){let r=0,i=0;for(const u of this.possibleCenters){const f=u.getEstimatedModuleSize();r+=f,i+=f*f}n=r/e;let s=Math.sqrt(i/e-n*n);t.sort((u,f)=>{const x=Math.abs(f.getEstimatedModuleSize()-n),w=Math.abs(u.getEstimatedModuleSize()-n);return x<w?-1:x>w?1:0});const c=Math.max(.2*n,s);for(let u=0;u<t.length&&t.length>3;u++){const f=t[u];Math.abs(f.getEstimatedModuleSize()-n)>c&&(t.splice(u,1),u--)}}if(t.length>3){let r=0;for(const i of t)r+=i.getEstimatedModuleSize();n=r/t.length,t.sort((i,s)=>{if(s.getCount()===i.getCount()){const c=Math.abs(s.getEstimatedModuleSize()-n),u=Math.abs(i.getEstimatedModuleSize()-n);return c<u?1:c>u?-1:0}else return s.getCount()-i.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}rt.CENTER_QUORUM=2,rt.MIN_SKIP=3,rt.MAX_MODULES=57;class zn{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(ge.NEED_RESULT_POINT_CALLBACK);const n=new rt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(n)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),i=this.calculateModuleSize(t,n,r);if(i<1)throw new B("No pattern found in proccess finder.");const s=zn.computeDimension(t,n,r,i),c=ne.getProvisionalVersionForDimension(s),u=c.getDimensionForVersion()-7;let f=null;if(c.getAlignmentPatternCenters().length>0){const I=n.getX()-t.getX()+r.getX(),M=n.getY()-t.getY()+r.getY(),_=1-3/u,D=Math.floor(t.getX()+_*(I-t.getX())),P=Math.floor(t.getY()+_*(M-t.getY()));for(let V=4;V<=16;V<<=1)try{f=this.findAlignmentInRegion(i,D,P,V);break}catch(G){if(!(G instanceof B))throw G}}const x=zn.createTransform(t,n,r,f,s),w=zn.sampleGrid(this.image,x,s);let E;return f===null?E=[r,t,n]:E=[r,t,n,f],new hr(w,E)}static createTransform(e,t,n,r,i){const s=i-3.5;let c,u,f,x;return r!==null?(c=r.getX(),u=r.getY(),f=s-3,x=f):(c=t.getX()-e.getX()+n.getX(),u=t.getY()-e.getY()+n.getY(),f=s,x=s),Lt.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,f,x,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),c,u,n.getX(),n.getY())}static sampleGrid(e,t,n){return $t.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const i=Ce.round(ee.distance(e,t)/r),s=Ce.round(ee.distance(e,n)/r);let c=Math.floor((i+s)/2)+7;switch(c&3){case 0:c++;break;case 2:c--;break;case 3:throw new B("Dimensions could be not found.")}return c}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),s=1,c=e-(n-e);c<0?(s=e/(e-c),c=0):c>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(c-e),c=this.image.getWidth()-1);let u=Math.floor(t-(r-t)*s);return s=1,u<0?(s=t/(t-u),u=0):u>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(u-t),u=this.image.getHeight()-1),c=Math.floor(e+(c-e)*s),i+=this.sizeOfBlackWhiteBlackRun(e,t,c,u),i-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const i=Math.abs(r-t)>Math.abs(n-e);if(i){let I=e;e=t,t=I,I=n,n=r,r=I}const s=Math.abs(n-e),c=Math.abs(r-t);let u=-s/2;const f=e<n?1:-1,x=t<r?1:-1;let w=0;const E=n+f;for(let I=e,M=t;I!==E;I+=f){const _=i?M:I,D=i?I:M;if(w===1===this.image.get(_,D)){if(w===2)return Ce.distance(I,M,e,t);w++}if(u+=c,u>0){if(M===r)break;M+=x,u-=s}}return w===2?Ce.distance(n+f,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const i=Math.floor(r*e),s=Math.max(0,t-i),c=Math.min(this.image.getWidth()-1,t+i);if(c-s<e*3)throw new B("Alignment top exceeds estimated module size.");const u=Math.max(0,n-i),f=Math.min(this.image.getHeight()-1,n+i);if(f-u<e*3)throw new B("Alignment bottom exceeds estimated module size.");return new wr(this.image,s,u,c-s,f-u,e,this.resultPointCallback).find()}}class rn{constructor(){this.decoder=new Mc}getDecoder(){return this.decoder}decode(e,t){let n,r;if(t!=null&&t.get(ge.PURE_BARCODE)!==void 0){const u=rn.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(u,t),r=rn.NO_POINTS}else{const u=new zn(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(u.getBits(),t),r=u.getPoints()}n.getOther()instanceof us&&n.getOther().applyMirroredCorrection(r);const i=new Qe(n.getText(),n.getRawBytes(),void 0,r,te.QR_CODE,void 0),s=n.getByteSegments();s!==null&&i.putMetadata(We.BYTE_SEGMENTS,s);const c=n.getECLevel();return c!==null&&i.putMetadata(We.ERROR_CORRECTION_LEVEL,c),n.hasStructuredAppend()&&(i.putMetadata(We.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(We.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new B;const r=this.moduleSize(t,e);let i=t[1],s=n[1],c=t[0],u=n[0];if(c>=u||i>=s)throw new B;if(s-i!==u-c&&(u=c+(s-i),u>=e.getWidth()))throw new B;const f=Math.round((u-c+1)/r),x=Math.round((s-i+1)/r);if(f<=0||x<=0)throw new B;if(x!==f)throw new B;const w=Math.floor(r/2);i+=w,c+=w;const E=c+Math.floor((f-1)*r)-u;if(E>0){if(E>w)throw new B;c-=E}const I=i+Math.floor((x-1)*r)-s;if(I>0){if(I>w)throw new B;i-=I}const M=new Fe(f,x);for(let _=0;_<x;_++){const D=i+Math.floor(_*r);for(let P=0;P<f;P++)e.get(c+Math.floor(P*r),D)&&M.set(P,_)}return M}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let i=e[0],s=e[1],c=!0,u=0;for(;i<r&&s<n;){if(c!==t.get(i,s)){if(++u===5)break;c=!c}i++,s++}if(i===r||s===n)throw new B;return(i-e[0])/7}}rn.NO_POINTS=new Array;class le{PDF417Common(){}static getBitCountSum(e){return Ce.sum(e)}static toIntArray(e){if(e==null||!e.length)return le.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=Z.binarySearch(le.SYMBOL_TABLE,e&262143);return t<0?-1:(le.CODEWORD_TABLE[t]-1)%le.NUMBER_OF_CODEWORDS}}le.NUMBER_OF_CODEWORDS=929,le.MAX_CODEWORDS_IN_BARCODE=le.NUMBER_OF_CODEWORDS-1,le.MIN_ROWS_IN_BARCODE=3,le.MAX_ROWS_IN_BARCODE=90,le.MODULES_IN_CODEWORD=17,le.MODULES_IN_STOP_PATTERN=18,le.BARS_IN_MODULE=8,le.EMPTY_INT_ARRAY=new Int32Array([]),le.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),le.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Dc{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class he{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),i=he.detect(n,r);return i.length||(r=r.clone(),r.rotate180(),i=he.detect(n,r)),new Dc(r,i)}static detect(e,t){const n=new Array;let r=0,i=0,s=!1;for(;r<t.getHeight();){const c=he.findVertices(t,r,i);if(c[0]==null&&c[3]==null){if(!s)break;s=!1,i=0;for(const u of n)u[1]!=null&&(r=Math.trunc(Math.max(r,u[1].getY()))),u[3]!=null&&(r=Math.max(r,Math.trunc(u[3].getY())));r+=he.ROW_STEP;continue}if(s=!0,n.push(c),!e)break;c[2]!=null?(i=Math.trunc(c[2].getX()),r=Math.trunc(c[2].getY())):(i=Math.trunc(c[4].getX()),r=Math.trunc(c[4].getY()))}return n}static findVertices(e,t,n){const r=e.getHeight(),i=e.getWidth(),s=new Array(8);return he.copyToResult(s,he.findRowsWithPattern(e,r,i,t,n,he.START_PATTERN),he.INDEXES_START_PATTERN),s[4]!=null&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),he.copyToResult(s,he.findRowsWithPattern(e,r,i,t,n,he.STOP_PATTERN),he.INDEXES_STOP_PATTERN),s}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,i,s){const c=new Array(4);let u=!1;const f=new Int32Array(s.length);for(;r<t;r+=he.ROW_STEP){let w=he.findGuardPattern(e,i,r,n,!1,s,f);if(w!=null){for(;r>0;){const E=he.findGuardPattern(e,i,--r,n,!1,s,f);if(E!=null)w=E;else{r++;break}}c[0]=new ee(w[0],r),c[1]=new ee(w[1],r),u=!0;break}}let x=r+1;if(u){let w=0,E=Int32Array.from([Math.trunc(c[0].getX()),Math.trunc(c[1].getX())]);for(;x<t;x++){const I=he.findGuardPattern(e,E[0],x,n,!1,s,f);if(I!=null&&Math.abs(E[0]-I[0])<he.MAX_PATTERN_DRIFT&&Math.abs(E[1]-I[1])<he.MAX_PATTERN_DRIFT)E=I,w=0;else{if(w>he.SKIPPED_ROW_COUNT_MAX)break;w++}}x-=w+1,c[2]=new ee(E[0],x),c[3]=new ee(E[1],x)}return x-r<he.BARCODE_MIN_HEIGHT&&Z.fill(c,null),c}static findGuardPattern(e,t,n,r,i,s,c){Z.fillWithin(c,0,c.length,0);let u=t,f=0;for(;e.get(u,n)&&u>0&&f++<he.MAX_PIXEL_DRIFT;)u--;let x=u,w=0,E=s.length;for(let I=i;x<r;x++)if(e.get(x,n)!==I)c[w]++;else{if(w===E-1){if(he.patternMatchVariance(c,s,he.MAX_INDIVIDUAL_VARIANCE)<he.MAX_AVG_VARIANCE)return new Int32Array([u,x]);u+=c[0]+c[1],F.arraycopy(c,2,c,0,w-1),c[w-1]=0,c[w]=0,w--}else w++;c[w]=1,I=!I}return w===E-1&&he.patternMatchVariance(c,s,he.MAX_INDIVIDUAL_VARIANCE)<he.MAX_AVG_VARIANCE?new Int32Array([u,x-1]):null}static patternMatchVariance(e,t,n){let r=e.length,i=0,s=0;for(let f=0;f<r;f++)i+=e[f],s+=t[f];if(i<s)return 1/0;let c=i/s;n*=c;let u=0;for(let f=0;f<r;f++){let x=e[f],w=t[f]*c,E=x>w?x-w:w-x;if(E>n)return 1/0;u+=E}return u/i}}he.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),he.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),he.MAX_AVG_VARIANCE=.42,he.MAX_INDIVIDUAL_VARIANCE=.8,he.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),he.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),he.MAX_PIXEL_DRIFT=3,he.MAX_PATTERN_DRIFT=5,he.SKIPPED_ROW_COUNT_MAX=25,he.ROW_STEP=5,he.BARCODE_MIN_HEIGHT=10;class st{constructor(e,t){if(t.length===0)throw new N;this.field=e;let n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-r),F.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let r=0;for(let i of this.coefficients)r=this.field.add(r,i);return r}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let s=t;t=n,n=s}let r=new Int32Array(n.length),i=n.length-t.length;F.arraycopy(n,0,r,0,i);for(let s=i;s<n.length;s++)r[s]=this.field.add(t[s-i],n[s]);return new st(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof st?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new st(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1);for(let c=0;c<n;c++){let u=t[c];for(let f=0;f<i;f++)s[c+f]=this.field.add(s[c+f],this.field.multiply(u,r[f]))}return new st(this.field,s)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new st(this.field,t)}multiplyScalar(e){if(e===0)return new st(this.field,new Int32Array([0]));if(e===1)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new st(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new N;if(t===0)return new st(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new st(this.field,r)}toString(){let e=new we;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Rc{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new N;return this.logTable[e]}inverse(e){if(e===0)throw new dr;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class ii extends Rc{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new st(this,new Int32Array([0])),this.one=new st(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new N;if(t===0)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new st(this,n)}}ii.PDF417_GF=new ii(le.NUMBER_OF_CODEWORDS,3);class ds{constructor(){this.field=ii.PDF417_GF}decode(e,t,n){let r=new st(this.field,e),i=new Int32Array(t),s=!1;for(let M=t;M>0;M--){let _=r.evaluateAt(this.field.exp(M));i[t-M]=_,_!==0&&(s=!0)}if(!s)return 0;let c=this.field.getOne();if(n!=null)for(const M of n){let _=this.field.exp(e.length-1-M),D=new st(this.field,new Int32Array([this.field.subtract(0,_),1]));c=c.multiply(D)}let u=new st(this.field,i),f=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),u,t),x=f[0],w=f[1],E=this.findErrorLocations(x),I=this.findErrorMagnitudes(w,x,E);for(let M=0;M<E.length;M++){let _=e.length-1-this.field.log(E[M]);if(_<0)throw k.getChecksumInstance();e[_]=this.field.subtract(e[_],I[M])}return E.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let E=e;e=t,t=E}let r=e,i=t,s=this.field.getZero(),c=this.field.getOne();for(;i.getDegree()>=Math.round(n/2);){let E=r,I=s;if(r=i,s=c,r.isZero())throw k.getChecksumInstance();i=E;let M=this.field.getZero(),_=r.getCoefficient(r.getDegree()),D=this.field.inverse(_);for(;i.getDegree()>=r.getDegree()&&!i.isZero();){let P=i.getDegree()-r.getDegree(),V=this.field.multiply(i.getCoefficient(i.getDegree()),D);M=M.add(this.field.buildMonomial(P,V)),i=i.subtract(r.multiplyByMonomial(P,V))}c=M.multiply(s).subtract(I).negative()}let u=c.getCoefficient(0);if(u===0)throw k.getChecksumInstance();let f=this.field.inverse(u),x=c.multiply(f),w=i.multiply(f);return[x,w]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let i=1;i<this.field.getSize()&&r<t;i++)e.evaluateAt(i)===0&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw k.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),i=new Int32Array(r);for(let f=1;f<=r;f++)i[r-f]=this.field.multiply(f,t.getCoefficient(f));let s=new st(this.field,i),c=n.length,u=new Int32Array(c);for(let f=0;f<c;f++){let x=this.field.inverse(n[f]),w=this.field.subtract(0,e.evaluateAt(x)),E=this.field.inverse(s.evaluateAt(x));u[f]=this.field.multiply(w,E)}return u}}class mn{constructor(e,t,n,r,i){e instanceof mn?this.constructor_2(e):this.constructor_1(e,t,n,r,i)}constructor_1(e,t,n,r,i){const s=t==null||n==null,c=r==null||i==null;if(s&&c)throw new B;s?(t=new ee(0,r.getY()),n=new ee(0,i.getY())):c&&(r=new ee(e.getWidth()-1,t.getY()),i=new ee(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return e==null?t:t==null?e:new mn(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,i=this.bottomLeft,s=this.topRight,c=this.bottomRight;if(e>0){let u=n?this.topLeft:this.topRight,f=Math.trunc(u.getY()-e);f<0&&(f=0);let x=new ee(u.getX(),f);n?r=x:s=x}if(t>0){let u=n?this.bottomLeft:this.bottomRight,f=Math.trunc(u.getY()+t);f>=this.image.getHeight()&&(f=this.image.getHeight()-1);let x=new ee(u.getX(),f);n?i=x:c=x}return new mn(this.image,r,i,s,c)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Oc{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Vn{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(s,c,u,f,x,w){if(s==="%%")return"%";if(t[++n]===void 0)return;s=f?parseInt(f.substr(1)):void 0;let E=x?parseInt(x.substr(1)):void 0,I;switch(w){case"s":I=t[n];break;case"c":I=t[n][0];break;case"f":I=parseFloat(t[n]).toFixed(s);break;case"p":I=parseFloat(t[n]).toPrecision(s);break;case"e":I=parseFloat(t[n]).toExponential(s);break;case"x":I=parseInt(t[n]).toString(E||16);break;case"d":I=parseFloat(parseInt(t[n],E||10).toPrecision(s)).toFixed(0);break}I=typeof I=="object"?JSON.stringify(I):(+I).toString(E);let M=parseInt(u),_=u&&u[0]+""=="0"?"0":" ";for(;I.length<M;)I=c!==void 0?I+_:_+I;return I}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}format(e,...t){this.buffer+=Vn.form(e,t)}toString(){return this.buffer}}class Gn{constructor(e){this.boundingBox=new mn(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(t!=null)return t;for(let n=1;n<Gn.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&(t=this.codewords[r],t!=null)||(r=this.imageRowToCodewordIndex(e)+n,r<this.codewords.length&&(t=this.codewords[r],t!=null)))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Vn;let t=0;for(const n of this.codewords){if(n==null){e.format("%3d:    |   %n",t++);continue}e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue())}return e.toString()}}Gn.MAX_NEARBY_DISTANCE=5;class Wn{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const i={getKey:()=>n,getValue:()=>r};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return le.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class fs extends Gn{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),c=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=-1,f=1,x=0;for(let w=s;w<c;w++){if(t[w]==null)continue;let E=t[w],I=E.getRowNumber()-u;if(I===0)x++;else if(I===1)f=Math.max(f,x),x=1,u=E.getRowNumber();else if(I<0||E.getRowNumber()>=e.getRowCount()||I>w)t[w]=null;else{let M;f>2?M=(f-2)*I:M=I;let _=M>=w;for(let D=1;D<=M&&!_;D++)_=t[w-D]!=null;_?t[w]=null:(u=E.getRowNumber(),x=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(n!=null){let r=n.getRowNumber();if(r>=t.length)continue;t[r]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),c=this.getCodewords(),u=-1;for(let f=i;f<s;f++){if(c[f]==null)continue;let x=c[f];x.setRowNumberAsRowIndicatorColumn();let w=x.getRowNumber()-u;w===0||(w===1?u=x.getRowNumber():x.getRowNumber()>=e.getRowCount()?c[f]=null:u=x.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Wn,n=new Wn,r=new Wn,i=new Wn;for(let c of e){if(c==null)continue;c.setRowNumberAsRowIndicatorColumn();let u=c.getValue()%30,f=c.getRowNumber();switch(this._isLeft||(f+=2),f%3){case 0:n.setValue(u*3+1);break;case 1:i.setValue(u/3),r.setValue(u%3);break;case 2:t.setValue(u+1);break}}if(t.getValue().length===0||n.getValue().length===0||r.getValue().length===0||i.getValue().length===0||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<le.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>le.MAX_ROWS_IN_BARCODE)return null;let s=new Oc(t.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,s),s}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(e[n]==null)continue;let i=r.getValue()%30,s=r.getRowNumber();if(s>t.getRowCount()){e[n]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:i*3+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:(Math.trunc(i/3)!==t.getErrorCorrectionLevel()||i%3!==t.getRowCountLowerPart())&&(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Yn{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=le.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let n=this.detectionResultColumns[t].getCodewords();for(let r=0;r<n.length;r++)n[r]!=null&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(let r=1;r<=this.barcodeColumnCount;r++){let i=this.detectionResultColumns[r].getCodewords()[n];i!=null&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),i=0;for(let s=this.barcodeColumnCount+1;s>0&&i<this.ADJUST_ROW_NUMBER_SKIP;s--){let c=this.detectionResultColumns[s].getCodewords()[n];c!=null&&(i=Yn.adjustRowNumberIfValid(r,i,c),c.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),i=0;for(let s=1;s<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;s++){let c=this.detectionResultColumns[s].getCodewords()[n];c!=null&&(i=Yn.adjustRowNumberIfValid(r,i,c),c.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],i=this.detectionResultColumns[e-1].getCodewords(),s=i;this.detectionResultColumns[e+1]!=null&&(s=this.detectionResultColumns[e+1].getCodewords());let c=new Array(14);c[2]=i[t],c[3]=s[t],t>0&&(c[0]=n[t-1],c[4]=i[t-1],c[5]=s[t-1]),t>1&&(c[8]=n[t-2],c[10]=i[t-2],c[11]=s[t-2]),t<n.length-1&&(c[1]=n[t+1],c[6]=i[t+1],c[7]=s[t+1]),t<n.length-2&&(c[9]=n[t+2],c[12]=i[t+2],c[13]=s[t+2]);for(let u of c)if(Yn.adjustRowNumber(r,u))return}static adjustRowNumber(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new Vn;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let r=0;r<this.barcodeColumnCount+2;r++){if(this.detectionResultColumns[r]==null){t.format("    |   ");continue}let i=this.detectionResultColumns[r].getCodewords()[n];if(i==null){t.format("    |   ");continue}t.format(" %3d|%3d",i.getRowNumber(),i.getValue())}t.format("%n")}return t.toString()}}class Xn{constructor(e,t,n,r){this.rowNumber=Xn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Xn.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Xn.BARCODE_ROW_UNKNOWN=-1;class wt{static initialize(){for(let e=0;e<le.SYMBOL_TABLE.length;e++){let t=le.SYMBOL_TABLE[e],n=t&1;for(let r=0;r<le.BARS_IN_MODULE;r++){let i=0;for(;(t&1)===n;)i+=1,t>>=1;n=t&1,wt.RATIOS_TABLE[e]||(wt.RATIOS_TABLE[e]=new Array(le.BARS_IN_MODULE)),wt.RATIOS_TABLE[e][le.BARS_IN_MODULE-r-1]=Math.fround(i/le.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=wt.getDecodedCodewordValue(wt.sampleBitCounts(e));return t!==-1?t:wt.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=Ce.sum(e),n=new Int32Array(le.BARS_IN_MODULE),r=0,i=0;for(let s=0;s<le.MODULES_IN_CODEWORD;s++){let c=t/(2*le.MODULES_IN_CODEWORD)+s*t/le.MODULES_IN_CODEWORD;i+e[r]<=c&&(i+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=wt.getBitValue(e);return le.getCodeword(t)===-1?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=Ce.sum(e),n=new Array(le.BARS_IN_MODULE);if(t>1)for(let s=0;s<n.length;s++)n[s]=Math.fround(e[s]/t);let r=fr.MAX_VALUE,i=-1;this.bSymbolTableReady||wt.initialize();for(let s=0;s<wt.RATIOS_TABLE.length;s++){let c=0,u=wt.RATIOS_TABLE[s];for(let f=0;f<le.BARS_IN_MODULE;f++){let x=Math.fround(u[f]-n[f]);if(c+=Math.fround(x*x),c>=r)break}c<r&&(r=c,i=le.SYMBOL_TABLE[s])}return i}}wt.bSymbolTableReady=!1,wt.RATIOS_TABLE=new Array(le.SYMBOL_TABLE.length).map(m=>new Array(le.BARS_IN_MODULE));class hs{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class gs{static parseLong(e,t=void 0){return parseInt(e,t)}}class xs extends p{}xs.kind="NullPointerException";class Lc{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(e==null)throw new xs;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new X;if(n===0)return;for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class Pc extends p{}class Bc extends Lc{constructor(e=32){if(super(),this.count=0,e<0)throw new N("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let n=this.buf.length<<1;if(n-e<0&&(n=e),n<0){if(e<0)throw new Pc;n=W.MAX_VALUE}this.buf=Z.copyOfUint8Array(this.buf,n)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new X;this.ensureCapacity(this.count+n),F.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Z.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Ne;(function(m){m[m.ALPHA=0]="ALPHA",m[m.LOWER=1]="LOWER",m[m.MIXED=2]="MIXED",m[m.PUNCT=3]="PUNCT",m[m.ALPHA_SHIFT=4]="ALPHA_SHIFT",m[m.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ne||(Ne={}));function ps(){if(typeof window<"u")return window.BigInt||null;if(typeof Ir<"u")return Ir.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Cr;function sn(m){if(typeof Cr>"u"&&(Cr=ps()),Cr===null)throw new Error("BigInt is not supported!");return Cr(m)}function kc(){let m=[];m[0]=sn(1);let e=sn(900);m[1]=e;for(let t=2;t<16;t++)m[t]=m[t-1]*e;return m}class L{static decode(e,t){let n=new we(""),r=z.ISO8859_1;n.enableDecoding(r);let i=1,s=e[i++],c=new hs;for(;i<e[0];){switch(s){case L.TEXT_COMPACTION_MODE_LATCH:i=L.textCompaction(e,i,n);break;case L.BYTE_COMPACTION_MODE_LATCH:case L.BYTE_COMPACTION_MODE_LATCH_6:i=L.byteCompaction(s,e,r,i,n);break;case L.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case L.NUMERIC_COMPACTION_MODE_LATCH:i=L.numericCompaction(e,i,n);break;case L.ECI_CHARSET:z.getCharacterSetECIByValue(e[i++]);break;case L.ECI_GENERAL_PURPOSE:i+=2;break;case L.ECI_USER_DEFINED:i++;break;case L.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=L.decodeMacroBlock(e,i,c);break;case L.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case L.MACRO_PDF417_TERMINATOR:throw new j;default:i--,i=L.textCompaction(e,i,n);break}if(i<e.length)s=e[i++];else throw j.getFormatInstance()}if(n.length()===0)throw j.getFormatInstance();let u=new dt(null,n.toString(),null,t);return u.setOther(c),u}static decodeMacroBlock(e,t,n){if(t+L.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw j.getFormatInstance();let r=new Int32Array(L.NUMBER_OF_SEQUENCE_CODEWORDS);for(let c=0;c<L.NUMBER_OF_SEQUENCE_CODEWORDS;c++,t++)r[c]=e[t];n.setSegmentIndex(W.parseInt(L.decodeBase900toBase10(r,L.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new we;t=L.textCompaction(e,t,i),n.setFileId(i.toString());let s=-1;for(e[t]===L.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case L.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case L.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let c=new we;t=L.textCompaction(e,t+1,c),n.setFileName(c.toString());break;case L.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let u=new we;t=L.textCompaction(e,t+1,u),n.setSender(u.toString());break;case L.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let f=new we;t=L.textCompaction(e,t+1,f),n.setAddressee(f.toString());break;case L.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let x=new we;t=L.numericCompaction(e,t+1,x),n.setSegmentCount(W.parseInt(x.toString()));break;case L.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let w=new we;t=L.numericCompaction(e,t+1,w),n.setTimestamp(gs.parseLong(w.toString()));break;case L.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let E=new we;t=L.numericCompaction(e,t+1,E),n.setChecksum(W.parseInt(E.toString()));break;case L.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let I=new we;t=L.numericCompaction(e,t+1,I),n.setFileSize(gs.parseLong(I.toString()));break;default:throw j.getFormatInstance()}break;case L.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw j.getFormatInstance()}if(s!==-1){let c=t-s;n.isLastSegment()&&c--,n.setOptionalData(Z.copyOfRange(e,s,s+c))}return t}static textCompaction(e,t,n){let r=new Int32Array((e[0]-t)*2),i=new Int32Array((e[0]-t)*2),s=0,c=!1;for(;t<e[0]&&!c;){let u=e[t++];if(u<L.TEXT_COMPACTION_MODE_LATCH)r[s]=u/30,r[s+1]=u%30,s+=2;else switch(u){case L.TEXT_COMPACTION_MODE_LATCH:r[s++]=L.TEXT_COMPACTION_MODE_LATCH;break;case L.BYTE_COMPACTION_MODE_LATCH:case L.BYTE_COMPACTION_MODE_LATCH_6:case L.NUMERIC_COMPACTION_MODE_LATCH:case L.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case L.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case L.MACRO_PDF417_TERMINATOR:t--,c=!0;break;case L.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[s]=L.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[t++],i[s]=u,s++;break}}return L.decodeTextCompaction(r,i,s,n),t}static decodeTextCompaction(e,t,n,r){let i=Ne.ALPHA,s=Ne.ALPHA,c=0;for(;c<n;){let u=e[c],f="";switch(i){case Ne.ALPHA:if(u<26)f=String.fromCharCode(65+u);else switch(u){case 26:f=" ";break;case L.LL:i=Ne.LOWER;break;case L.ML:i=Ne.MIXED;break;case L.PS:s=i,i=Ne.PUNCT_SHIFT;break;case L.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[c]);break;case L.TEXT_COMPACTION_MODE_LATCH:i=Ne.ALPHA;break}break;case Ne.LOWER:if(u<26)f=String.fromCharCode(97+u);else switch(u){case 26:f=" ";break;case L.AS:s=i,i=Ne.ALPHA_SHIFT;break;case L.ML:i=Ne.MIXED;break;case L.PS:s=i,i=Ne.PUNCT_SHIFT;break;case L.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[c]);break;case L.TEXT_COMPACTION_MODE_LATCH:i=Ne.ALPHA;break}break;case Ne.MIXED:if(u<L.PL)f=L.MIXED_CHARS[u];else switch(u){case L.PL:i=Ne.PUNCT;break;case 26:f=" ";break;case L.LL:i=Ne.LOWER;break;case L.AL:i=Ne.ALPHA;break;case L.PS:s=i,i=Ne.PUNCT_SHIFT;break;case L.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[c]);break;case L.TEXT_COMPACTION_MODE_LATCH:i=Ne.ALPHA;break}break;case Ne.PUNCT:if(u<L.PAL)f=L.PUNCT_CHARS[u];else switch(u){case L.PAL:i=Ne.ALPHA;break;case L.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[c]);break;case L.TEXT_COMPACTION_MODE_LATCH:i=Ne.ALPHA;break}break;case Ne.ALPHA_SHIFT:if(i=s,u<26)f=String.fromCharCode(65+u);else switch(u){case 26:f=" ";break;case L.TEXT_COMPACTION_MODE_LATCH:i=Ne.ALPHA;break}break;case Ne.PUNCT_SHIFT:if(i=s,u<L.PAL)f=L.PUNCT_CHARS[u];else switch(u){case L.PAL:i=Ne.ALPHA;break;case L.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[c]);break;case L.TEXT_COMPACTION_MODE_LATCH:i=Ne.ALPHA;break}break}f!==""&&r.append(f),c++}}static byteCompaction(e,t,n,r,i){let s=new Bc,c=0,u=0,f=!1;switch(e){case L.BYTE_COMPACTION_MODE_LATCH:let x=new Int32Array(6),w=t[r++];for(;r<t[0]&&!f;)switch(x[c++]=w,u=900*u+w,w=t[r++],w){case L.TEXT_COMPACTION_MODE_LATCH:case L.BYTE_COMPACTION_MODE_LATCH:case L.NUMERIC_COMPACTION_MODE_LATCH:case L.BYTE_COMPACTION_MODE_LATCH_6:case L.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case L.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case L.MACRO_PDF417_TERMINATOR:r--,f=!0;break;default:if(c%5===0&&c>0){for(let E=0;E<6;++E)s.write(Number(sn(u)>>sn(8*(5-E))));u=0,c=0}break}r===t[0]&&w<L.TEXT_COMPACTION_MODE_LATCH&&(x[c++]=w);for(let E=0;E<c;E++)s.write(x[E]);break;case L.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!f;){let E=t[r++];if(E<L.TEXT_COMPACTION_MODE_LATCH)c++,u=900*u+E;else switch(E){case L.TEXT_COMPACTION_MODE_LATCH:case L.BYTE_COMPACTION_MODE_LATCH:case L.NUMERIC_COMPACTION_MODE_LATCH:case L.BYTE_COMPACTION_MODE_LATCH_6:case L.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case L.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case L.MACRO_PDF417_TERMINATOR:r--,f=!0;break}if(c%5===0&&c>0){for(let I=0;I<6;++I)s.write(Number(sn(u)>>sn(8*(5-I))));u=0,c=0}}break}return i.append(Xe.decode(s.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,i=!1,s=new Int32Array(L.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let c=e[t++];if(t===e[0]&&(i=!0),c<L.TEXT_COMPACTION_MODE_LATCH)s[r]=c,r++;else switch(c){case L.TEXT_COMPACTION_MODE_LATCH:case L.BYTE_COMPACTION_MODE_LATCH:case L.BYTE_COMPACTION_MODE_LATCH_6:case L.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case L.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case L.MACRO_PDF417_TERMINATOR:t--,i=!0;break}(r%L.MAX_NUMERIC_CODEWORDS===0||c===L.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(L.decodeBase900toBase10(s,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=sn(0);for(let i=0;i<t;i++)n+=L.EXP900[t-i-1]*sn(e[i]);let r=n.toString();if(r.charAt(0)!=="1")throw new j;return r.substring(1)}}L.TEXT_COMPACTION_MODE_LATCH=900,L.BYTE_COMPACTION_MODE_LATCH=901,L.NUMERIC_COMPACTION_MODE_LATCH=902,L.BYTE_COMPACTION_MODE_LATCH_6=924,L.ECI_USER_DEFINED=925,L.ECI_GENERAL_PURPOSE=926,L.ECI_CHARSET=927,L.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,L.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,L.MACRO_PDF417_TERMINATOR=922,L.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,L.MAX_NUMERIC_CODEWORDS=15,L.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,L.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,L.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,L.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,L.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,L.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,L.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,L.PL=25,L.LL=27,L.AS=27,L.ML=28,L.AL=28,L.PS=29,L.PAL=29,L.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,L.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",L.EXP900=ps()?kc():[],L.NUMBER_OF_SEQUENCE_CODEWORDS=2;class xe{constructor(){}static decode(e,t,n,r,i,s,c){let u=new mn(e,t,n,r,i),f=null,x=null,w;for(let M=!0;;M=!1){if(t!=null&&(f=xe.getRowIndicatorColumn(e,u,t,!0,s,c)),r!=null&&(x=xe.getRowIndicatorColumn(e,u,r,!1,s,c)),w=xe.merge(f,x),w==null)throw B.getNotFoundInstance();let _=w.getBoundingBox();if(M&&_!=null&&(_.getMinY()<u.getMinY()||_.getMaxY()>u.getMaxY()))u=_;else break}w.setBoundingBox(u);let E=w.getBarcodeColumnCount()+1;w.setDetectionResultColumn(0,f),w.setDetectionResultColumn(E,x);let I=f!=null;for(let M=1;M<=E;M++){let _=I?M:E-M;if(w.getDetectionResultColumn(_)!==void 0)continue;let D;_===0||_===E?D=new fs(u,_===0):D=new Gn(u),w.setDetectionResultColumn(_,D);let P=-1,V=P;for(let G=u.getMinY();G<=u.getMaxY();G++){if(P=xe.getStartColumn(w,_,G,I),P<0||P>u.getMaxX()){if(V===-1)continue;P=V}let H=xe.detectCodeword(e,u.getMinX(),u.getMaxX(),I,P,G,s,c);H!=null&&(D.setCodeword(G,H),V=P,s=Math.min(s,H.getWidth()),c=Math.max(c,H.getWidth()))}}return xe.createDecoderResult(w)}static merge(e,t){if(e==null&&t==null)return null;let n=xe.getBarcodeMetadata(e,t);if(n==null)return null;let r=mn.merge(xe.adjustBoundingBox(e),xe.adjustBoundingBox(t));return new Yn(n,r)}static adjustBoundingBox(e){if(e==null)return null;let t=e.getRowHeights();if(t==null)return null;let n=xe.getMax(t),r=0;for(let c of t)if(r+=n-c,c>0)break;let i=e.getCodewords();for(let c=0;r>0&&i[c]==null;c++)r--;let s=0;for(let c=t.length-1;c>=0&&(s+=n-t[c],!(t[c]>0));c--);for(let c=i.length-1;s>0&&i[c]==null;c--)s--;return e.getBoundingBox().addMissingRows(r,s,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();let r;return t==null||(r=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,i,s){let c=new fs(t,r);for(let u=0;u<2;u++){let f=u===0?1:-1,x=Math.trunc(Math.trunc(n.getX()));for(let w=Math.trunc(Math.trunc(n.getY()));w<=t.getMaxY()&&w>=t.getMinY();w+=f){let E=xe.detectCodeword(e,0,e.getWidth(),r,x,w,i,s);E!=null&&(c.setCodeword(w,E),r?x=E.getStartX():x=E.getEndX())}}return c}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-xe.getNumberOfECCodeWords(e.getBarcodeECLevel());if(r.length===0){if(i<1||i>le.MAX_CODEWORDS_IN_BARCODE)throw B.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(e){let t=xe.createBarcodeMatrix(e);xe.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],s=new Array;for(let u=0;u<e.getBarcodeRowCount();u++)for(let f=0;f<e.getBarcodeColumnCount();f++){let x=t[u][f+1].getValue(),w=u*e.getBarcodeColumnCount()+f;x.length===0?n.push(w):x.length===1?r[w]=x[0]:(s.push(w),i.push(x))}let c=new Array(i.length);for(let u=0;u<c.length;u++)c[u]=i[u];return xe.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,le.toIntArray(n),le.toIntArray(s),c)}static createDecoderResultFromAmbiguousValues(e,t,n,r,i){let s=new Int32Array(r.length),c=100;for(;c-- >0;){for(let u=0;u<s.length;u++)t[r[u]]=i[u][s[u]];try{return xe.decodeCodewords(t,e,n)}catch(u){if(!(u instanceof k))throw u}if(s.length===0)throw k.getChecksumInstance();for(let u=0;u<s.length;u++)if(s[u]<i[u].length-1){s[u]++;break}else if(s[u]=0,u===s.length-1)throw k.getChecksumInstance()}throw k.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let i=0;i<t[r].length;i++)t[r][i]=new Wn;let n=0;for(let r of e.getDetectionResultColumns()){if(r!=null){for(let i of r.getCodewords())if(i!=null){let s=i.getRowNumber();if(s>=0){if(s>=t.length)continue;t[s][n].setValue(i.getValue())}}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let i=r?1:-1,s=null;if(xe.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodeword(n)),s!=null)return r?s.getEndX():s.getStartX();if(s=e.getDetectionResultColumn(t).getCodewordNearby(n),s!=null)return r?s.getStartX():s.getEndX();if(xe.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodewordNearby(n)),s!=null)return r?s.getEndX():s.getStartX();let c=0;for(;xe.isValidBarcodeColumn(e,t-i);){t-=i;for(let u of e.getDetectionResultColumn(t).getCodewords())if(u!=null)return(r?u.getEndX():u.getStartX())+i*c*(u.getEndX()-u.getStartX());c++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,i,s,c,u){i=xe.adjustCodewordStartColumn(e,t,n,r,i,s);let f=xe.getModuleBitCount(e,t,n,r,i,s);if(f==null)return null;let x,w=Ce.sum(f);if(r)x=i+w;else{for(let M=0;M<f.length/2;M++){let _=f[M];f[M]=f[f.length-1-M],f[f.length-1-M]=_}x=i,i=x-w}if(!xe.checkCodewordSkew(w,c,u))return null;let E=wt.getDecodedValue(f),I=le.getCodeword(E);return I===-1?null:new Xn(i,x,xe.getCodewordBucketNumber(E),I)}static getModuleBitCount(e,t,n,r,i,s){let c=i,u=new Int32Array(8),f=0,x=r?1:-1,w=r;for(;(r?c<n:c>=t)&&f<u.length;)e.get(c,s)===w?(u[f]++,c+=x):(f++,w=!w);return f===u.length||c===(r?n:t)&&f===u.length-1?u:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,i,s){let c=i,u=r?-1:1;for(let f=0;f<2;f++){for(;(r?c>=t:c<n)&&r===e.get(c,s);){if(Math.abs(i-c)>xe.CODEWORD_SKEW_SIZE)return i;c+=u}u=-u,r=!r}return c}static checkCodewordSkew(e,t,n){return t-xe.CODEWORD_SKEW_SIZE<=e&&e<=n+xe.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(e.length===0)throw j.getFormatInstance();let r=1<<t+1,i=xe.correctErrors(e,n,r);xe.verifyCodewordCount(e,r);let s=L.decode(e,""+t);return s.setErrorsCorrected(i),s.setErasures(n.length),s}static correctErrors(e,t,n){if(t!=null&&t.length>n/2+xe.MAX_ERRORS||n<0||n>xe.MAX_EC_CODEWORDS)throw k.getChecksumInstance();return xe.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw j.getFormatInstance();let n=e[0];if(n>e.length)throw j.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw j.getFormatInstance()}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((e&1)!==n&&(n=e&1,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return xe.getCodewordBucketNumber(xe.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new Vn;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let i=e[n][r];i.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}xe.CODEWORD_SKEW_SIZE=2,xe.MAX_ERRORS=3,xe.MAX_EC_CODEWORDS=512,xe.errorCorrection=new ds;class ot{decode(e,t=null){let n=ot.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw B.getNotFoundInstance();return n[0]}decodeMultiple(e,t=null){try{return ot.decode(e,t,!0)}catch(n){throw n instanceof j||n instanceof k?B.getNotFoundInstance():n}}static decode(e,t,n){const r=new Array,i=he.detectMultiple(e,t,n);for(const s of i.getPoints()){const c=xe.decode(i.getBits(),s[4],s[5],s[6],s[7],ot.getMinCodewordWidth(s),ot.getMaxCodewordWidth(s)),u=new Qe(c.getText(),c.getRawBytes(),void 0,s,te.PDF_417);u.putMetadata(We.ERROR_CORRECTION_LEVEL,c.getECLevel());const f=c.getOther();f!=null&&u.putMetadata(We.PDF417_EXTRA_METADATA,f),r.push(u)}return r.map(s=>s)}static getMaxWidth(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return e==null||t==null?W.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(ot.getMaxWidth(e[0],e[4]),ot.getMaxWidth(e[6],e[2])*le.MODULES_IN_CODEWORD/le.MODULES_IN_STOP_PATTERN),Math.max(ot.getMaxWidth(e[1],e[5]),ot.getMaxWidth(e[7],e[3])*le.MODULES_IN_CODEWORD/le.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(ot.getMinWidth(e[0],e[4]),ot.getMinWidth(e[6],e[2])*le.MODULES_IN_CODEWORD/le.MODULES_IN_STOP_PATTERN),Math.min(ot.getMinWidth(e[1],e[5]),ot.getMinWidth(e[7],e[3])*le.MODULES_IN_CODEWORD/le.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ar extends p{}Ar.kind="ReaderException";class ms{constructor(e,t){this.verbose=e===!0,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const t=!d(e)&&e.get(ge.TRY_HARDER)===!0,n=d(e)?null:e.get(ge.POSSIBLE_FORMATS),r=new Array;if(!d(n)){const i=n.some(s=>s===te.UPC_A||s===te.UPC_E||s===te.EAN_13||s===te.EAN_8||s===te.CODABAR||s===te.CODE_39||s===te.CODE_93||s===te.CODE_128||s===te.ITF||s===te.RSS_14||s===te.RSS_EXPANDED);i&&!t&&r.push(new vn(e,this.verbose)),n.includes(te.QR_CODE)&&r.push(new rn),n.includes(te.DATA_MATRIX)&&r.push(new nn),n.includes(te.AZTEC)&&r.push(new gr),n.includes(te.PDF_417)&&r.push(new ot),i&&t&&r.push(new vn(e,this.verbose))}r.length===0&&(t||r.push(new vn(e,this.verbose)),r.push(new rn),r.push(new nn),r.push(new gr),r.push(new ot),t&&r.push(new vn(e,this.verbose))),this.readers=r}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Ar("No readers where selected, nothing can be read.");for(const t of this.readers)try{return t.decode(e,this.hints)}catch(n){if(n instanceof Ar)continue}throw new B("No MultiFormat Readers were able to detect the code.")}}class Fc extends Ot{constructor(e=null,t=500){const n=new ms;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class jc extends Ot{constructor(e=500){super(new ot,e)}}class Uc extends Ot{constructor(e=500){super(new rn,e)}}var si;(function(m){m[m.ERROR_CORRECTION=0]="ERROR_CORRECTION",m[m.CHARACTER_SET=1]="CHARACTER_SET",m[m.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",m[m.MIN_SIZE=3]="MIN_SIZE",m[m.MAX_SIZE=4]="MAX_SIZE",m[m.MARGIN=5]="MARGIN",m[m.PDF417_COMPACT=6]="PDF417_COMPACT",m[m.PDF417_COMPACTION=7]="PDF417_COMPACTION",m[m.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",m[m.AZTEC_LAYERS=9]="AZTEC_LAYERS",m[m.QR_VERSION=10]="QR_VERSION"})(si||(si={}));var $e=si;class oi{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new xt(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let i=t.length;i<=e;i++){const s=n.multiply(new xt(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(s),n=s}}return t[e]}encode(e,t){if(t===0)throw new N("No error correction bytes");const n=e.length-t;if(n<=0)throw new N("No data bytes provided");const r=this.buildGenerator(t),i=new Int32Array(n);F.arraycopy(e,0,i,0,n);let s=new xt(this.field,i);s=s.multiplyByMonomial(t,1);const u=s.divide(r)[1].getCoefficients(),f=t-u.length;for(let x=0;x<f;x++)e[n+x]=0;F.arraycopy(u,0,e,n+f,u.length)}}class ze{constructor(){}static applyMaskPenaltyRule1(e){return ze.applyMaskPenaltyRule1Internal(e,!0)+ze.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let s=0;s<i-1;s++){const c=n[s];for(let u=0;u<r-1;u++){const f=c[u];f===c[u+1]&&f===n[s+1][u]&&f===n[s+1][u+1]&&t++}}return ze.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let s=0;s<i;s++)for(let c=0;c<r;c++){const u=n[s];c+6<r&&u[c]===1&&u[c+1]===0&&u[c+2]===1&&u[c+3]===1&&u[c+4]===1&&u[c+5]===0&&u[c+6]===1&&(ze.isWhiteHorizontal(u,c-4,c)||ze.isWhiteHorizontal(u,c+7,c+11))&&t++,s+6<i&&n[s][c]===1&&n[s+1][c]===0&&n[s+2][c]===1&&n[s+3][c]===1&&n[s+4][c]===1&&n[s+5][c]===0&&n[s+6][c]===1&&(ze.isWhiteVertical(n,c,s-4,s)||ze.isWhiteVertical(n,c,s+7,s+11))&&t++}return t*ze.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(e[r]===1)return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let i=n;i<r;i++)if(e[i][t]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let u=0;u<i;u++){const f=n[u];for(let x=0;x<r;x++)f[x]===1&&t++}const s=e.getHeight()*e.getWidth();return Math.floor(Math.abs(t*2-s)*10/s)*ze.N4}static getDataMaskBit(e,t,n){let r,i;switch(e){case 0:r=n+t&1;break;case 1:r=n&1;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:i=n*t,r=(i&1)+i%3;break;case 6:i=n*t,r=(i&1)+i%3&1;break;case 7:i=n*t,r=i%3+(n+t&1)&1;break;default:throw new N("Invalid mask pattern: "+e)}return r===0}static applyMaskPenaltyRule1Internal(e,t){let n=0;const r=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),s=e.getArray();for(let c=0;c<r;c++){let u=0,f=-1;for(let x=0;x<i;x++){const w=t?s[c][x]:s[x][c];w===f?u++:(u>=5&&(n+=ze.N1+(u-5)),u=1,f=w)}u>=5&&(n+=ze.N1+(u-5))}return n}}ze.N1=3,ze.N2=3,ze.N3=40,ze.N4=10;class Er{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)Z.fill(t,e)}equals(e){if(!(e instanceof Er))return!1;const t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const i=this.bytes[n],s=t.bytes[n];for(let c=0,u=this.width;c<u;++c)if(i[c]!==s[c])return!1}return!0}toString(){const e=new we;for(let t=0,n=this.height;t<n;++t){const r=this.bytes[t];for(let i=0,s=this.width;i<s;++i)switch(r[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class wn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new we;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<wn.NUM_MASK_PATTERNS}}wn.NUM_MASK_PATTERNS=8;class Me extends p{}Me.kind="WriterException";class se{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,i){se.clearMatrix(i),se.embedBasicPatterns(n,i),se.embedTypeInfo(t,r,i),se.maybeEmbedVersionInfo(n,i),se.embedDataBits(e,r,i)}static embedBasicPatterns(e,t){se.embedPositionDetectionPatternsAndSeparators(t),se.embedDarkDotAtLeftBottomCorner(t),se.maybeEmbedPositionAdjustmentPatterns(e,t),se.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new $;se.makeTypeInfoBits(e,t,r);for(let i=0,s=r.getSize();i<s;++i){const c=r.get(r.getSize()-1-i),u=se.TYPE_INFO_COORDINATES[i],f=u[0],x=u[1];if(n.setBoolean(f,x,c),i<8){const w=n.getWidth()-i-1;n.setBoolean(w,8,c)}else{const E=n.getHeight()-7+(i-8);n.setBoolean(8,E,c)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new $;se.makeVersionInfoBits(e,n);let r=6*3-1;for(let i=0;i<6;++i)for(let s=0;s<3;++s){const c=n.get(r);r--,t.setBoolean(i,t.getHeight()-11+s,c),t.setBoolean(t.getHeight()-11+s,i,c)}}static embedDataBits(e,t,n){let r=0,i=-1,s=n.getWidth()-1,c=n.getHeight()-1;for(;s>0;){for(s===6&&(s-=1);c>=0&&c<n.getHeight();){for(let u=0;u<2;++u){const f=s-u;if(!se.isEmpty(n.get(f,c)))continue;let x;r<e.getSize()?(x=e.get(r),++r):x=!1,t!==255&&ze.getDataMaskBit(t,f,c)&&(x=!x),n.setBoolean(f,c,x)}c+=i}i=-i,c+=i,s-=2}if(r!==e.getSize())throw new Me("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-W.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(t===0)throw new N("0 polynomial");const n=se.findMSBSet(t);for(e<<=n-1;se.findMSBSet(e)>=n;)e^=t<<se.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!wn.isValidMaskPattern(t))throw new Me("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const i=se.calculateBCHCode(r,se.TYPE_INFO_POLY);n.appendBits(i,10);const s=new $;if(s.appendBits(se.TYPE_INFO_MASK_PATTERN,15),n.xor(s),n.getSize()!==15)throw new Me("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=se.calculateBCHCode(e.getVersionNumber(),se.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new Me("should not happen but we got: "+t.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;se.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),se.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Me;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!se.isEmpty(n.get(e+r,t)))throw new Me;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!se.isEmpty(n.get(e,t+r)))throw new Me;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const i=se.POSITION_ADJUSTMENT_PATTERN[r];for(let s=0;s<5;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const i=se.POSITION_DETECTION_PATTERN[r];for(let s=0;s<7;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPatternsAndSeparators(e){const t=se.POSITION_DETECTION_PATTERN[0].length;se.embedPositionDetectionPattern(0,0,e),se.embedPositionDetectionPattern(e.getWidth()-t,0,e),se.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;se.embedHorizontalSeparationPattern(0,n-1,e),se.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),se.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const r=7;se.embedVerticalSeparationPattern(r,0,e),se.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),se.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=se.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let i=0,s=r.length;i!==s;i++){const c=r[i];if(c>=0)for(let u=0;u!==s;u++){const f=r[u];f>=0&&se.isEmpty(t.get(f,c))&&se.embedPositionAdjustmentPattern(f-2,c-2,t)}}}}se.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),se.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),se.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),se.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),se.VERSION_INFO_POLY=7973,se.TYPE_INFO_POLY=1335,se.TYPE_INFO_MASK_PATTERN=21522;class Hc{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Le{constructor(){}static calculateMaskPenalty(e){return ze.applyMaskPenaltyRule1(e)+ze.applyMaskPenaltyRule2(e)+ze.applyMaskPenaltyRule3(e)+ze.applyMaskPenaltyRule4(e)}static encode(e,t,n=null){let r=Le.DEFAULT_BYTE_MODE_ENCODING;const i=n!==null&&n.get($e.CHARACTER_SET)!==void 0;i&&(r=n.get($e.CHARACTER_SET).toString());const s=this.chooseMode(e,r),c=new $;if(s===re.BYTE&&(i||Le.DEFAULT_BYTE_MODE_ENCODING!==r)){const G=z.getCharacterSetECIByName(r);G!==void 0&&this.appendECI(G,c)}this.appendModeInfo(s,c);const u=new $;this.appendBytes(e,s,u,r);let f;if(n!==null&&n.get($e.QR_VERSION)!==void 0){const G=Number.parseInt(n.get($e.QR_VERSION).toString(),10);f=ne.getVersionForNumber(G);const H=this.calculateBitsNeeded(s,c,u,f);if(!this.willFit(H,f,t))throw new Me("Data too big for requested version")}else f=this.recommendVersion(t,s,c,u);const x=new $;x.appendBitArray(c);const w=s===re.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(w,f,s,x),x.appendBitArray(u);const E=f.getECBlocksForLevel(t),I=f.getTotalCodewords()-E.getTotalECCodewords();this.terminateBits(I,x);const M=this.interleaveWithECBytes(x,f.getTotalCodewords(),I,E.getNumBlocks()),_=new wn;_.setECLevel(t),_.setMode(s),_.setVersion(f);const D=f.getDimensionForVersion(),P=new Er(D,D),V=this.chooseMaskPattern(M,t,f,P);return _.setMaskPattern(V),se.buildMatrix(M,t,f,V,P),_.setMatrix(P),_}static recommendVersion(e,t,n,r){const i=this.calculateBitsNeeded(t,n,r,ne.getVersionForNumber(1)),s=this.chooseVersion(i,e),c=this.calculateBitsNeeded(t,n,r,s);return this.chooseVersion(c,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<Le.ALPHANUMERIC_TABLE.length?Le.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(z.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return re.KANJI;let n=!1,r=!1;for(let i=0,s=e.length;i<s;++i){const c=e.charAt(i);if(Le.isDigit(c))n=!0;else if(this.getAlphanumericCode(c.charCodeAt(0))!==-1)r=!0;else return re.BYTE}return r?re.ALPHANUMERIC:n?re.NUMERIC:re.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=Xe.encode(e,z.SJIS)}catch{return!1}const n=t.length;if(n%2!==0)return!1;for(let r=0;r<n;r+=2){const i=t[r]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let i=Number.MAX_SAFE_INTEGER,s=-1;for(let c=0;c<wn.NUM_MASK_PATTERNS;c++){se.buildMatrix(e,t,n,c,r);let u=this.calculateMaskPenalty(r);u<i&&(i=u,s=c)}return s}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=ne.getVersionForNumber(n);if(Le.willFit(e,r,t))return r}throw new Me("Data too big")}static willFit(e,t,n){const r=t.getTotalCodewords(),s=t.getECBlocksForLevel(n).getTotalECCodewords(),c=r-s,u=(e+7)/8;return c>=u}static terminateBits(e,t){const n=e*8;if(t.getSize()>n)throw new Me("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let s=0;s<4&&t.getSize()<n;++s)t.appendBit(!1);const r=t.getSize()&7;if(r>0)for(let s=r;s<8;s++)t.appendBit(!1);const i=e-t.getSizeInBytes();for(let s=0;s<i;++s)t.appendBits((s&1)===0?236:17,8);if(t.getSize()!==n)throw new Me("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,i,s){if(r>=n)throw new Me("Block ID too large");const c=e%n,u=n-c,f=Math.floor(e/n),x=f+1,w=Math.floor(t/n),E=w+1,I=f-w,M=x-E;if(I!==M)throw new Me("EC bytes mismatch");if(n!==u+c)throw new Me("RS blocks mismatch");if(e!==(w+I)*u+(E+M)*c)throw new Me("Total bytes mismatch");r<u?(i[0]=w,s[0]=I):(i[0]=E,s[0]=M)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new Me("Number of bits and data bytes does not match");let i=0,s=0,c=0;const u=new Array;for(let x=0;x<r;++x){const w=new Int32Array(1),E=new Int32Array(1);Le.getNumDataBytesAndNumECBytesForBlockID(t,n,r,x,w,E);const I=w[0],M=new Uint8Array(I);e.toBytes(8*i,M,0,I);const _=Le.generateECBytes(M,E[0]);u.push(new Hc(M,_)),s=Math.max(s,I),c=Math.max(c,_.length),i+=w[0]}if(n!==i)throw new Me("Data bytes does not match offset");const f=new $;for(let x=0;x<s;++x)for(const w of u){const E=w.getDataBytes();x<E.length&&f.appendBits(E[x],8)}for(let x=0;x<c;++x)for(const w of u){const E=w.getErrorCorrectionBytes();x<E.length&&f.appendBits(E[x],8)}if(t!==f.getSizeInBytes())throw new Me("Interleaving error: "+t+" and "+f.getSizeInBytes()+" differ.");return f}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let s=0;s<n;s++)r[s]=e[s]&255;new oi(Ee.QR_CODE_FIELD_256).encode(r,t);const i=new Uint8Array(t);for(let s=0;s<t;s++)i[s]=r[n+s];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const i=n.getCharacterCountBits(t);if(e>=1<<i)throw new Me(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)}static appendBytes(e,t,n,r){switch(t){case re.NUMERIC:Le.appendNumericBytes(e,n);break;case re.ALPHANUMERIC:Le.appendAlphanumericBytes(e,n);break;case re.BYTE:Le.append8BitBytes(e,n,r);break;case re.KANJI:Le.appendKanjiBytes(e,n);break;default:throw new Me("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=Le.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=Le.getDigit(e.charAt(r));if(r+2<n){const s=Le.getDigit(e.charAt(r+1)),c=Le.getDigit(e.charAt(r+2));t.appendBits(i*100+s*10+c,10),r+=3}else if(r+1<n){const s=Le.getDigit(e.charAt(r+1));t.appendBits(i*10+s,7),r+=2}else t.appendBits(i,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=Le.getAlphanumericCode(e.charCodeAt(r));if(i===-1)throw new Me;if(r+1<n){const s=Le.getAlphanumericCode(e.charCodeAt(r+1));if(s===-1)throw new Me;t.appendBits(i*45+s,11),r+=2}else t.appendBits(i,6),r++}}static append8BitBytes(e,t,n){let r;try{r=Xe.encode(e,n)}catch(i){throw new Me(i)}for(let i=0,s=r.length;i!==s;i++){const c=r[i];t.appendBits(c,8)}}static appendKanjiBytes(e,t){let n;try{n=Xe.encode(e,z.SJIS)}catch(i){throw new Me(i)}const r=n.length;for(let i=0;i<r;i+=2){const s=n[i]&255,c=n[i+1]&255,u=s<<8&4294967295|c;let f=-1;if(u>=33088&&u<=40956?f=u-33088:u>=57408&&u<=60351&&(f=u-49472),f===-1)throw new Me("Invalid byte sequence");const x=(f>>8)*192+(f&255);t.appendBits(x,13)}}static appendECI(e,t){t.appendBits(re.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}Le.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Le.DEFAULT_BYTE_MODE_ENCODING=z.UTF8.getName();class Cn{write(e,t,n,r=null){if(e.length===0)throw new N("Found empty contents");if(t<0||n<0)throw new N("Requested dimensions are too small: "+t+"x"+n);let i=Re.L,s=Cn.QUIET_ZONE_SIZE;r!==null&&(r.get($e.ERROR_CORRECTION)!==void 0&&(i=Re.fromString(r.get($e.ERROR_CORRECTION).toString())),r.get($e.MARGIN)!==void 0&&(s=Number.parseInt(r.get($e.MARGIN).toString(),10)));const c=Le.encode(e,i,r);return this.renderResult(c,t,n,s)}writeToDom(e,t,n,r,i=null){typeof e=="string"&&(e=document.querySelector(e));const s=this.write(t,n,r,i);e&&e.appendChild(s)}renderResult(e,t,n,r){const i=e.getMatrix();if(i===null)throw new Ut;const s=i.getWidth(),c=i.getHeight(),u=s+r*2,f=c+r*2,x=Math.max(t,u),w=Math.max(n,f),E=Math.min(Math.floor(x/u),Math.floor(w/f)),I=Math.floor((x-s*E)/2),M=Math.floor((w-c*E)/2),_=this.createSVGElement(x,w);for(let D=0,P=M;D<c;D++,P+=E)for(let V=0,G=I;V<s;V++,G+=E)if(i.get(V,D)===1){const H=this.createSvgRectElement(G,P,E,E);_.appendChild(H)}return _}createSVGElement(e,t){const n=document.createElementNS(Cn.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){const i=document.createElementNS(Cn.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",r.toString()),i.setAttributeNS(null,"fill","#000000"),i}}Cn.QUIET_ZONE_SIZE=4,Cn.SVG_NS="http://www.w3.org/2000/svg";class _n{encode(e,t,n,r,i){if(e.length===0)throw new N("Found empty contents");if(t!==te.QR_CODE)throw new N("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new N(`Requested dimensions are too small: ${n}x${r}`);let s=Re.L,c=_n.QUIET_ZONE_SIZE;i!==null&&(i.get($e.ERROR_CORRECTION)!==void 0&&(s=Re.fromString(i.get($e.ERROR_CORRECTION).toString())),i.get($e.MARGIN)!==void 0&&(c=Number.parseInt(i.get($e.MARGIN).toString(),10)));const u=Le.encode(e,s,i);return _n.renderResult(u,n,r,c)}static renderResult(e,t,n,r){const i=e.getMatrix();if(i===null)throw new Ut;const s=i.getWidth(),c=i.getHeight(),u=s+r*2,f=c+r*2,x=Math.max(t,u),w=Math.max(n,f),E=Math.min(Math.floor(x/u),Math.floor(w/f)),I=Math.floor((x-s*E)/2),M=Math.floor((w-c*E)/2),_=new Fe(x,w);for(let D=0,P=M;D<c;D++,P+=E)for(let V=0,G=I;V<s;V++,G+=E)i.get(V,D)===1&&_.setRegion(G,P,E,E);return _}}_n.QUIET_ZONE_SIZE=4;class zc{encode(e,t,n,r,i){let s;switch(t){case te.QR_CODE:s=new _n;break;default:throw new N("No encoder available for format "+t)}return s.encode(e,t,n,r,i)}}class Gt extends Tt{constructor(e,t,n,r,i,s,c,u){if(super(s,c),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=i,r+s>t||i+c>n)throw new N("Crop rectangle does not fit within image data.");u&&this.reverseHorizontal(s,c)}getRow(e,t){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return F.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return F.arraycopy(this.yuvData,i,r,0,n),r;for(let s=0;s<t;s++){const c=s*e;F.arraycopy(this.yuvData,i,r,c,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Gt(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){const e=this.getWidth()/Gt.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/Gt.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let s=0;s<t;s++){const c=s*e;for(let u=0;u<e;u++){const f=r[i+u*Gt.THUMBNAIL_SCALE_FACTOR]&255;n[c+u]=4278190080|f*65793}i+=this.dataWidth*Gt.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/Gt.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Gt.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let r=0,i=this.top*this.dataWidth+this.left;r<t;r++,i+=this.dataWidth){const s=i+e/2;for(let c=i,u=i+e-1;c<s;c++,u--){const f=n[c];n[c]=n[u],n[u]=f}}}invert(){return new ce(this)}}Gt.THUMBNAIL_SCALE_FACTOR=2;class ai extends Tt{constructor(e,t,n,r,i,s,c){if(super(t,n),this.dataWidth=r,this.dataHeight=i,this.left=s,this.top=c,e.BYTES_PER_ELEMENT===4){const u=t*n,f=new Uint8ClampedArray(u);for(let x=0;x<u;x++){const w=e[x],E=w>>16&255,I=w>>7&510,M=w&255;f[x]=(E+I+M)/4&255}this.luminances=f}else this.luminances=e;if(r===void 0&&(this.dataWidth=t),i===void 0&&(this.dataHeight=n),s===void 0&&(this.left=0),c===void 0&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return F.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return F.arraycopy(this.luminances,i,r,0,n),r;for(let s=0;s<t;s++){const c=s*e;F.arraycopy(this.luminances,i,r,c,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new ai(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new ce(this)}}class ws extends z{static forName(e){return this.getCharacterSetECIByName(e)}}class ci{}ci.ISO_8859_1=z.ISO8859_1;class Cs{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class As{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Vc{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Dn extends Vc{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new Dn(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Dn(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+W.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class li extends Dn{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(n===0||n===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):n===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new li(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Gc(m,e,t){return new li(m,e,t)}function Zn(m,e,t){return new Dn(m,e,t)}const Wc=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],on=0,br=1,_t=2,Es=3,Wt=4,Yc=new Dn(null,0,0),ui=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Xc(m){for(let e of m)Z.fill(e,-1);return m[on][Wt]=0,m[br][Wt]=0,m[br][on]=28,m[Es][Wt]=0,m[_t][Wt]=0,m[_t][on]=15,m}const bs=Xc(Z.createInt32Array(6,6));class Yt{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let s=ui[this.mode][e];r=Zn(r,s&65535,s>>16),n+=s>>16}let i=e===_t?4:5;return r=Zn(r,t,i),new Yt(r,e,0,n+i)}shiftAndAppend(e,t){let n=this.token,r=this.mode===_t?4:5;return n=Zn(n,bs[this.mode][e],r),n=Zn(n,t,5),new Yt(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===Wt||this.mode===_t){let c=ui[n][on];t=Zn(t,c&65535,c>>16),r+=c>>16,n=on}let i=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new Yt(t,n,this.binaryShiftByteCount+1,r+i);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let t=this.token;return t=Gc(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new Yt(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(ui[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=Yt.calculateBinaryShiftCost(e)-Yt.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;r!==null;r=r.getPrevious())t.unshift(r);let n=new $;for(const r of t)r.appendTo(n,e);return n}toString(){return ie.format("%s bits=%d bytes=%d",Wc[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}Yt.INITIAL_STATE=new Yt(Yc,on,0,0);function Zc(m){const e=ie.getCharCode(" "),t=ie.getCharCode("."),n=ie.getCharCode(",");m[on][e]=1;const r=ie.getCharCode("Z"),i=ie.getCharCode("A");for(let E=i;E<=r;E++)m[on][E]=E-i+2;m[br][e]=1;const s=ie.getCharCode("z"),c=ie.getCharCode("a");for(let E=c;E<=s;E++)m[br][E]=E-c+2;m[_t][e]=1;const u=ie.getCharCode("9"),f=ie.getCharCode("0");for(let E=f;E<=u;E++)m[_t][E]=E-f+2;m[_t][n]=12,m[_t][t]=13;const x=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let E=0;E<x.length;E++)m[Es][ie.getCharCode(x[E])]=E;const w=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let E=0;E<w.length;E++)ie.getCharCode(w[E])>0&&(m[Wt][ie.getCharCode(w[E])]=E);return m}const di=Zc(Z.createInt32Array(5,256));class Kn{constructor(e){this.text=e}encode(){const e=ie.getCharCode(" "),t=ie.getCharCode(`
`);let n=As.singletonList(Yt.INITIAL_STATE);for(let i=0;i<this.text.length;i++){let s,c=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ie.getCharCode("\r"):s=c===t?2:0;break;case ie.getCharCode("."):s=c===e?3:0;break;case ie.getCharCode(","):s=c===e?4:0;break;case ie.getCharCode(":"):s=c===e?5:0;break;default:s=0}s>0?(n=Kn.updateStateListForPair(n,i,s),i++):n=this.updateStateListForChar(n,i)}return As.min(n,(i,s)=>i.getBitCount()-s.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return Kn.simplifyStates(n)}updateStateForChar(e,t,n){let r=this.text[t]&255,i=di[e.getMode()][r]>0,s=null;for(let c=0;c<=Wt;c++){let u=di[c][r];if(u>0){if(s==null&&(s=e.endBinaryShift(t)),!i||c===e.getMode()||c===_t){const f=s.latchAndAppend(c,u);n.push(f)}if(!i&&bs[e.getMode()][c]>=0){const f=s.shiftAndAppend(c,u);n.push(f)}}}if(e.getBinaryShiftByteCount()>0||di[e.getMode()][r]===0){let c=e.addBinaryShiftChar(t);n.push(c)}}static updateStateListForPair(e,t,n){const r=[];for(let i of e)this.updateStateForPair(i,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let i=e.endBinaryShift(t);if(r.push(i.latchAndAppend(Wt,n)),e.getMode()!==Wt&&r.push(i.shiftAndAppend(Wt,n)),n===3||n===4){let s=i.latchAndAppend(_t,16-n).latchAndAppend(_t,1);r.push(s)}if(e.getBinaryShiftByteCount()>0){let s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(s)}}static simplifyStates(e){let t=[];for(const n of e){let r=!0;for(const i of t){if(i.isBetterThanOrEqualTo(n)){r=!1;break}n.isBetterThanOrEqualTo(i)&&(t=t.filter(s=>s!==i))}r&&t.push(n)}return t}}class Ae{constructor(){}static encodeBytes(e){return Ae.encode(e,Ae.DEFAULT_EC_PERCENT,Ae.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r=new Kn(e).encode(),i=W.truncDivision(r.getSize()*t,100)+11,s=r.getSize()+i,c,u,f,x,w;if(n!==Ae.DEFAULT_AZTEC_LAYERS){if(c=n<0,u=Math.abs(n),u>(c?Ae.MAX_NB_BITS_COMPACT:Ae.MAX_NB_BITS))throw new N(ie.format("Illegal value %s for layers",n));f=Ae.totalBitsInLayer(u,c),x=Ae.WORD_SIZE[u];let H=f-f%x;if(w=Ae.stuffBits(r,x),w.getSize()+i>H)throw new N("Data to large for user specified layer");if(c&&w.getSize()>x*64)throw new N("Data to large for user specified layer")}else{x=0,w=null;for(let H=0;;H++){if(H>Ae.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(c=H<=3,u=c?H+1:H,f=Ae.totalBitsInLayer(u,c),s>f)continue;(w==null||x!==Ae.WORD_SIZE[u])&&(x=Ae.WORD_SIZE[u],w=Ae.stuffBits(r,x));let pe=f-f%x;if(!(c&&w.getSize()>x*64)&&w.getSize()+i<=pe)break}}let E=Ae.generateCheckWords(w,f,x),I=w.getSize()/x,M=Ae.generateModeMessage(c,u,I),_=(c?11:14)+u*4,D=new Int32Array(_),P;if(c){P=_;for(let H=0;H<D.length;H++)D[H]=H}else{P=_+1+2*W.truncDivision(W.truncDivision(_,2)-1,15);let H=W.truncDivision(_,2),pe=W.truncDivision(P,2);for(let fe=0;fe<H;fe++){let Ct=fe+W.truncDivision(fe,15);D[H-fe-1]=pe-Ct-1,D[H+fe]=pe+Ct+1}}let V=new Fe(P);for(let H=0,pe=0;H<u;H++){let fe=(u-H)*4+(c?9:12);for(let Ct=0;Ct<fe;Ct++){let Bt=Ct*2;for(let At=0;At<2;At++)E.get(pe+Bt+At)&&V.set(D[H*2+At],D[H*2+Ct]),E.get(pe+fe*2+Bt+At)&&V.set(D[H*2+Ct],D[_-1-H*2-At]),E.get(pe+fe*4+Bt+At)&&V.set(D[_-1-H*2-At],D[_-1-H*2-Ct]),E.get(pe+fe*6+Bt+At)&&V.set(D[_-1-H*2-Ct],D[H*2+At])}pe+=fe*8}if(Ae.drawModeMessage(V,c,P,M),c)Ae.drawBullsEye(V,W.truncDivision(P,2),5);else{Ae.drawBullsEye(V,W.truncDivision(P,2),7);for(let H=0,pe=0;H<W.truncDivision(_,2)-1;H+=15,pe+=16)for(let fe=W.truncDivision(P,2)&1;fe<P;fe+=2)V.set(W.truncDivision(P,2)-pe,fe),V.set(W.truncDivision(P,2)+pe,fe),V.set(fe,W.truncDivision(P,2)-pe),V.set(fe,W.truncDivision(P,2)+pe)}let G=new Cs;return G.setCompact(c),G.setSize(P),G.setLayers(u),G.setCodeWords(I),G.setMatrix(V),G}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let i=t-r;i<=t+r;i++)e.set(i,t-r),e.set(i,t+r),e.set(t-r,i),e.set(t+r,i);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new $;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=Ae.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=Ae.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let i=W.truncDivision(n,2);if(t)for(let s=0;s<7;s++){let c=i-3+s;r.get(s)&&e.set(c,i-5),r.get(s+7)&&e.set(i+5,c),r.get(20-s)&&e.set(c,i+5),r.get(27-s)&&e.set(i-5,c)}else for(let s=0;s<10;s++){let c=i-5+s+W.truncDivision(s,5);r.get(s)&&e.set(c,i-7),r.get(s+10)&&e.set(i+7,c),r.get(29-s)&&e.set(c,i+7),r.get(39-s)&&e.set(i-7,c)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,i=new oi(Ae.getGF(n)),s=W.truncDivision(t,n),c=Ae.bitsToWords(e,n,s);i.encode(c,s-r);let u=t%n,f=new $;f.appendBits(0,u);for(const x of Array.from(c))f.appendBits(x,n);return f}static bitsToWords(e,t,n){let r=new Int32Array(n),i,s;for(i=0,s=e.getSize()/t;i<s;i++){let c=0;for(let u=0;u<t;u++)c|=e.get(i*t+u)?1<<t-u-1:0;r[i]=c}return r}static getGF(e){switch(e){case 4:return Ee.AZTEC_PARAM;case 6:return Ee.AZTEC_DATA_6;case 8:return Ee.AZTEC_DATA_8;case 10:return Ee.AZTEC_DATA_10;case 12:return Ee.AZTEC_DATA_12;default:throw new N("Unsupported word size "+e)}}static stuffBits(e,t){let n=new $,r=e.getSize(),i=(1<<t)-2;for(let s=0;s<r;s+=t){let c=0;for(let u=0;u<t;u++)(s+u>=r||e.get(s+u))&&(c|=1<<t-1-u);(c&i)===i?(n.appendBits(c&i,t),s--):(c&i)===0?(n.appendBits(c|1,t),s--):n.appendBits(c,t)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}Ae.DEFAULT_EC_PERCENT=33,Ae.DEFAULT_AZTEC_LAYERS=0,Ae.MAX_NB_BITS=32,Ae.MAX_NB_BITS_COMPACT=4,Ae.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class yr{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,i){let s=ci.ISO_8859_1,c=Ae.DEFAULT_EC_PERCENT,u=Ae.DEFAULT_AZTEC_LAYERS;return i!=null&&(i.has($e.CHARACTER_SET)&&(s=ws.forName(i.get($e.CHARACTER_SET).toString())),i.has($e.ERROR_CORRECTION)&&(c=W.parseInt(i.get($e.ERROR_CORRECTION).toString())),i.has($e.AZTEC_LAYERS)&&(u=W.parseInt(i.get($e.AZTEC_LAYERS).toString()))),yr.encodeLayers(e,t,n,r,s,c,u)}static encodeLayers(e,t,n,r,i,s,c){if(t!==te.AZTEC)throw new N("Can only encode AZTEC, but got "+t);let u=Ae.encode(ie.getBytes(e,i),s,c);return yr.renderResult(u,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(r==null)throw new Ut;let i=r.getWidth(),s=r.getHeight(),c=Math.max(t,i),u=Math.max(n,s),f=Math.min(c/i,u/s),x=(c-i*f)/2,w=(u-s*f)/2,E=new Fe(c,u);for(let I=0,M=w;I<s;I++,M+=f)for(let _=0,D=x;_<i;_++,D+=f)r.get(_,I)&&E.setRegion(D,M,f,f);return E}}a.AbstractExpandedDecoder=Qr,a.ArgumentException=S,a.ArithmeticException=dr,a.AztecCode=Cs,a.AztecCodeReader=gr,a.AztecCodeWriter=yr,a.AztecDecoder=De,a.AztecDetector=ss,a.AztecDetectorResult=rs,a.AztecEncoder=Ae,a.AztecHighLevelEncoder=Kn,a.AztecPoint=ft,a.BarcodeFormat=te,a.Binarizer=Y,a.BinaryBitmap=O,a.BitArray=$,a.BitMatrix=Fe,a.BitSource=ei,a.BrowserAztecCodeReader=Ac,a.BrowserBarcodeReader=Sc,a.BrowserCodeReader=Ot,a.BrowserDatamatrixCodeReader=Nc,a.BrowserMultiFormatReader=Fc,a.BrowserPDF417Reader=jc,a.BrowserQRCodeReader=Uc,a.BrowserQRCodeSvgWriter=Cn,a.CharacterSetECI=z,a.ChecksumException=k,a.Code128Reader=K,a.Code39Reader=qe,a.DataMatrixDecodedBitStreamParser=tn,a.DataMatrixReader=nn,a.DecodeHintType=ge,a.DecoderResult=dt,a.DefaultGridSampler=is,a.DetectorResult=hr,a.EAN13Reader=gn,a.EncodeHintType=$e,a.Exception=p,a.FormatException=j,a.GenericGF=Ee,a.GenericGFPoly=xt,a.GlobalHistogramBinarizer=Te,a.GridSampler=Yr,a.GridSamplerInstance=$t,a.HTMLCanvasElementLuminanceSource=Ge,a.HybridBinarizer=de,a.ITFReader=ve,a.IllegalArgumentException=N,a.IllegalStateException=Ut,a.InvertedLuminanceSource=ce,a.LuminanceSource=Tt,a.MathUtils=Ce,a.MultiFormatOneDReader=vn,a.MultiFormatReader=ms,a.MultiFormatWriter=zc,a.NotFoundException=B,a.OneDReader=Ze,a.PDF417DecodedBitStreamParser=L,a.PDF417DecoderErrorCorrection=ds,a.PDF417Reader=ot,a.PDF417ResultMetadata=hs,a.PerspectiveTransform=Lt,a.PlanarYUVLuminanceSource=Gt,a.QRCodeByteMatrix=Er,a.QRCodeDataMask=vt,a.QRCodeDecodedBitStreamParser=je,a.QRCodeDecoderErrorCorrectionLevel=Re,a.QRCodeDecoderFormatInformation=ut,a.QRCodeEncoder=Le,a.QRCodeEncoderQRCode=wn,a.QRCodeMaskUtil=ze,a.QRCodeMatrixUtil=se,a.QRCodeMode=re,a.QRCodeReader=rn,a.QRCodeVersion=ne,a.QRCodeWriter=_n,a.RGBLuminanceSource=ai,a.RSS14Reader=He,a.RSSExpandedReader=U,a.ReaderException=Ar,a.ReedSolomonDecoder=Un,a.ReedSolomonEncoder=oi,a.ReedSolomonException=In,a.Result=Qe,a.ResultMetadataType=We,a.ResultPoint=ee,a.StringUtils=ie,a.UnsupportedOperationException=tt,a.VideoInputDevice=Et,a.WhiteRectangleDetector=Zt,a.WriterException=Me,a.ZXingArrays=Z,a.ZXingCharset=ws,a.ZXingInteger=W,a.ZXingStandardCharsets=ci,a.ZXingStringBuilder=we,a.ZXingStringEncoding=Xe,a.ZXingSystem=F,a.createAbstractExpandedDecoder=ls,Object.defineProperty(a,"__esModule",{value:!0})})}($n,$n.exports)),$n.exports}var Pe=ph();const mh=tl(Pe),wh=ul({__proto__:null,default:mh},[Pe]);var Ys=function(){function o(l,a,d){if(this.formatMap=new Map([[J.QR_CODE,Pe.BarcodeFormat.QR_CODE],[J.AZTEC,Pe.BarcodeFormat.AZTEC],[J.CODABAR,Pe.BarcodeFormat.CODABAR],[J.CODE_39,Pe.BarcodeFormat.CODE_39],[J.CODE_93,Pe.BarcodeFormat.CODE_93],[J.CODE_128,Pe.BarcodeFormat.CODE_128],[J.DATA_MATRIX,Pe.BarcodeFormat.DATA_MATRIX],[J.MAXICODE,Pe.BarcodeFormat.MAXICODE],[J.ITF,Pe.BarcodeFormat.ITF],[J.EAN_13,Pe.BarcodeFormat.EAN_13],[J.EAN_8,Pe.BarcodeFormat.EAN_8],[J.PDF_417,Pe.BarcodeFormat.PDF_417],[J.RSS_14,Pe.BarcodeFormat.RSS_14],[J.RSS_EXPANDED,Pe.BarcodeFormat.RSS_EXPANDED],[J.UPC_A,Pe.BarcodeFormat.UPC_A],[J.UPC_E,Pe.BarcodeFormat.UPC_E],[J.UPC_EAN_EXTENSION,Pe.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!wh)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=a,this.logger=d;var h=this.createZXingFormats(l),g=new Map;g.set(Pe.DecodeHintType.POSSIBLE_FORMATS,h),g.set(Pe.DecodeHintType.TRY_HARDER,!1),this.hints=g}return o.prototype.decodeAsync=function(l){var a=this;return new Promise(function(d,h){try{d(a.decode(l))}catch(g){h(g)}})},o.prototype.decode=function(l){var a=new Pe.MultiFormatReader(this.verbose,this.hints),d=new Pe.HTMLCanvasElementLuminanceSource(l),h=new Pe.BinaryBitmap(new Pe.HybridBinarizer(d)),g=a.decode(h);return{text:g.text,format:hc.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}},o.prototype.createReverseFormatMap=function(){var l=new Map;return this.formatMap.forEach(function(a,d,h){l.set(a,d)}),l},o.prototype.toHtml5QrcodeSupportedFormats=function(l){if(!this.reverseFormatMap.has(l))throw"reverseFormatMap doesn't have ".concat(l);return this.reverseFormatMap.get(l)},o.prototype.createZXingFormats=function(l){for(var a=[],d=0,h=l;d<h.length;d++){var g=h[d];this.formatMap.has(g)?a.push(this.formatMap.get(g)):this.logger.logError("".concat(g," is not supported by")+"ZXingHtml5QrcodeShim")}return a},o.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},o}(),Ch=function(o,l,a,d){function h(g){return g instanceof a?g:new a(function(A){A(g)})}return new(a||(a=Promise))(function(g,A){function b(S){try{p(d.next(S))}catch(N){A(N)}}function T(S){try{p(d.throw(S))}catch(N){A(N)}}function p(S){S.done?g(S.value):h(S.value).then(b,T)}p((d=d.apply(o,l||[])).next())})},Ah=function(o,l){var a={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,h,g,A;return A={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function b(p){return function(S){return T([p,S])}}function T(p){if(d)throw new TypeError("Generator is already executing.");for(;A&&(A=0,p[0]&&(a=0)),a;)try{if(d=1,h&&(g=p[0]&2?h.return:p[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,p[1])).done)return g;switch(h=0,g&&(p=[p[0]&2,g.value]),p[0]){case 0:case 1:g=p;break;case 4:return a.label++,{value:p[1],done:!1};case 5:a.label++,h=p[1],p=[0];continue;case 7:p=a.ops.pop(),a.trys.pop();continue;default:if(g=a.trys,!(g=g.length>0&&g[g.length-1])&&(p[0]===6||p[0]===2)){a=0;continue}if(p[0]===3&&(!g||p[1]>g[0]&&p[1]<g[3])){a.label=p[1];break}if(p[0]===6&&a.label<g[1]){a.label=g[1],g=p;break}if(g&&a.label<g[2]){a.label=g[2],a.ops.push(p);break}g[2]&&a.ops.pop(),a.trys.pop();continue}p=l.call(o,a)}catch(S){p=[6,S],h=0}finally{d=g=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Xs=function(){function o(l,a,d){if(this.formatMap=new Map([[J.QR_CODE,"qr_code"],[J.AZTEC,"aztec"],[J.CODABAR,"codabar"],[J.CODE_39,"code_39"],[J.CODE_93,"code_93"],[J.CODE_128,"code_128"],[J.DATA_MATRIX,"data_matrix"],[J.ITF,"itf"],[J.EAN_13,"ean_13"],[J.EAN_8,"ean_8"],[J.PDF_417,"pdf417"],[J.UPC_A,"upc_a"],[J.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!o.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=a,this.logger=d;var h=this.createBarcodeDetectorFormats(l);if(this.detector=new BarcodeDetector(h),!this.detector)throw"BarcodeDetector detector not supported"}return o.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var l=new BarcodeDetector({formats:["qr_code"]});return typeof l<"u"},o.prototype.decodeAsync=function(l){return Ch(this,void 0,void 0,function(){var a,d;return Ah(this,function(h){switch(h.label){case 0:return[4,this.detector.detect(l)];case 1:if(a=h.sent(),!a||a.length===0)throw"No barcode or QR code detected.";return d=this.selectLargestBarcode(a),[2,{text:d.rawValue,format:hc.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}]}})})},o.prototype.selectLargestBarcode=function(l){for(var a=null,d=0,h=0,g=l;h<g.length;h++){var A=g[h],b=A.boundingBox.width*A.boundingBox.height;b>d&&(d=b,a=A)}if(!a)throw"No largest barcode found";return a},o.prototype.createBarcodeDetectorFormats=function(l){for(var a=[],d=0,h=l;d<h.length;d++){var g=h[d];this.formatMap.has(g)?a.push(this.formatMap.get(g)):this.logger.warn("".concat(g," is not supported by")+"BarcodeDetectorDelegate")}return{formats:a}},o.prototype.toHtml5QrcodeSupportedFormats=function(l){if(!this.reverseFormatMap.has(l))throw"reverseFormatMap doesn't have ".concat(l);return this.reverseFormatMap.get(l)},o.prototype.createReverseFormatMap=function(){var l=new Map;return this.formatMap.forEach(function(a,d,h){l.set(a,d)}),l},o.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},o}(),Zs=function(o,l,a,d){function h(g){return g instanceof a?g:new a(function(A){A(g)})}return new(a||(a=Promise))(function(g,A){function b(S){try{p(d.next(S))}catch(N){A(N)}}function T(S){try{p(d.throw(S))}catch(N){A(N)}}function p(S){S.done?g(S.value):h(S.value).then(b,T)}p((d=d.apply(o,l||[])).next())})},Ks=function(o,l){var a={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,h,g,A;return A={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function b(p){return function(S){return T([p,S])}}function T(p){if(d)throw new TypeError("Generator is already executing.");for(;A&&(A=0,p[0]&&(a=0)),a;)try{if(d=1,h&&(g=p[0]&2?h.return:p[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,p[1])).done)return g;switch(h=0,g&&(p=[p[0]&2,g.value]),p[0]){case 0:case 1:g=p;break;case 4:return a.label++,{value:p[1],done:!1};case 5:a.label++,h=p[1],p=[0];continue;case 7:p=a.ops.pop(),a.trys.pop();continue;default:if(g=a.trys,!(g=g.length>0&&g[g.length-1])&&(p[0]===6||p[0]===2)){a=0;continue}if(p[0]===3&&(!g||p[1]>g[0]&&p[1]<g[3])){a.label=p[1];break}if(p[0]===6&&a.label<g[1]){a.label=g[1],g=p;break}if(g&&a.label<g[2]){a.label=g[2],a.ops.push(p);break}g[2]&&a.ops.pop(),a.trys.pop();continue}p=l.call(o,a)}catch(S){p=[6,S],h=0}finally{d=g=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Eh=function(){function o(l,a,d,h){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=d,a&&Xs.isSupported()?(this.primaryDecoder=new Xs(l,d,h),this.secondaryDecoder=new Ys(l,d,h)):this.primaryDecoder=new Ys(l,d,h)}return o.prototype.decodeAsync=function(l){return Zs(this,void 0,void 0,function(){var a;return Ks(this,function(d){switch(d.label){case 0:a=performance.now(),d.label=1;case 1:return d.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(l)];case 2:return[2,d.sent()];case 3:return this.possiblyLogPerformance(a),[7];case 4:return[2]}})})},o.prototype.decodeRobustlyAsync=function(l){return Zs(this,void 0,void 0,function(){var a,d;return Ks(this,function(h){switch(h.label){case 0:a=performance.now(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(l)];case 2:return[2,h.sent()];case 3:if(d=h.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(l)];throw d;case 4:return this.possiblyLogPerformance(a),[7];case 5:return[2]}})})},o.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},o.prototype.possiblyLogPerformance=function(l){if(this.verbose){var a=performance.now()-l;this.executionResults.push(a),this.executions++,this.possiblyFlushPerformanceReport()}},o.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var l=0,a=0,d=this.executionResults;a<d.length;a++){var h=d[a];l+=h}var g=l/this.executionResults.length;console.log("".concat(g," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},o}(),ts=function(){var o=function(l,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(d[g]=h[g])},o(l,a)};return function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");o(l,a);function d(){this.constructor=l}l.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}}(),Dr=function(o,l,a,d){function h(g){return g instanceof a?g:new a(function(A){A(g)})}return new(a||(a=Promise))(function(g,A){function b(S){try{p(d.next(S))}catch(N){A(N)}}function T(S){try{p(d.throw(S))}catch(N){A(N)}}function p(S){S.done?g(S.value):h(S.value).then(b,T)}p((d=d.apply(o,l||[])).next())})},Rr=function(o,l){var a={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,h,g,A;return A={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function b(p){return function(S){return T([p,S])}}function T(p){if(d)throw new TypeError("Generator is already executing.");for(;A&&(A=0,p[0]&&(a=0)),a;)try{if(d=1,h&&(g=p[0]&2?h.return:p[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,p[1])).done)return g;switch(h=0,g&&(p=[p[0]&2,g.value]),p[0]){case 0:case 1:g=p;break;case 4:return a.label++,{value:p[1],done:!1};case 5:a.label++,h=p[1],p=[0];continue;case 7:p=a.ops.pop(),a.trys.pop();continue;default:if(g=a.trys,!(g=g.length>0&&g[g.length-1])&&(p[0]===6||p[0]===2)){a=0;continue}if(p[0]===3&&(!g||p[1]>g[0]&&p[1]<g[3])){a.label=p[1];break}if(p[0]===6&&a.label<g[1]){a.label=g[1],g=p;break}if(g&&a.label<g[2]){a.label=g[2],a.ops.push(p);break}g[2]&&a.ops.pop(),a.trys.pop();continue}p=l.call(o,a)}catch(S){p=[6,S],h=0}finally{d=g=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},mc=function(){function o(l,a){this.name=l,this.track=a}return o.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},o.prototype.apply=function(l){var a={};a[this.name]=l;var d={advanced:[a]};return this.track.applyConstraints(d)},o.prototype.value=function(){var l=this.track.getSettings();if(this.name in l){var a=l[this.name];return a}return null},o}(),bh=function(o){ts(l,o);function l(a,d){return o.call(this,a,d)||this}return l.prototype.min=function(){return this.getCapabilities().min},l.prototype.max=function(){return this.getCapabilities().max},l.prototype.step=function(){return this.getCapabilities().step},l.prototype.apply=function(a){var d={};d[this.name]=a;var h={advanced:[d]};return this.track.applyConstraints(h)},l.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),d=a[this.name];return{min:d.min,max:d.max,step:d.step}},l.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},l}(mc),yh=function(o){ts(l,o);function l(a){return o.call(this,"zoom",a)||this}return l}(bh),Ih=function(o){ts(l,o);function l(a){return o.call(this,"torch",a)||this}return l}(mc),Sh=function(){function o(l){this.track=l}return o.prototype.zoomFeature=function(){return new yh(this.track)},o.prototype.torchFeature=function(){return new Ih(this.track)},o}(),Th=function(){function o(l,a,d){this.isClosed=!1,this.parentElement=l,this.mediaStream=a,this.callbacks=d,this.surface=this.createVideoElement(this.parentElement.clientWidth),l.append(this.surface)}return o.prototype.createVideoElement=function(l){var a=document.createElement("video");return a.style.width="".concat(l,"px"),a.style.display="block",a.muted=!0,a.setAttribute("muted","true"),a.playsInline=!0,a},o.prototype.setupSurface=function(){var l=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var a=function(){var d=l.surface.clientWidth,h=l.surface.clientHeight;l.callbacks.onRenderSurfaceReady(d,h),l.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.srcObject=this.mediaStream,this.surface.play()},o.create=function(l,a,d,h){return Dr(this,void 0,void 0,function(){var g,A;return Rr(this,function(b){switch(b.label){case 0:return g=new o(l,a,h),d.aspectRatio?(A={aspectRatio:d.aspectRatio},[4,g.getFirstTrackOrFail().applyConstraints(A)]):[3,2];case 1:b.sent(),b.label=2;case 2:return g.setupSurface(),[2,g]}})})},o.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},o.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},o.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},o.prototype.resume=function(l){this.failIfClosed();var a=this,d=function(){setTimeout(l,200),a.surface.removeEventListener("playing",d)};this.surface.addEventListener("playing",d),this.surface.play()},o.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},o.prototype.getSurface=function(){return this.failIfClosed(),this.surface},o.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},o.prototype.applyVideoConstraints=function(l){return Dr(this,void 0,void 0,function(){return Rr(this,function(a){if("aspectRatio"in l)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(l)]})})},o.prototype.close=function(){if(this.isClosed)return Promise.resolve();var l=this;return new Promise(function(a,d){var h=l.mediaStream.getVideoTracks(),g=h.length,A=0;l.mediaStream.getVideoTracks().forEach(function(b){l.mediaStream.removeTrack(b),b.stop(),++A,A>=g&&(l.isClosed=!0,l.parentElement.removeChild(l.surface),a())})})},o.prototype.getCapabilities=function(){return new Sh(this.getFirstTrackOrFail())},o}(),Nh=function(){function o(l){this.mediaStream=l}return o.prototype.render=function(l,a,d){return Dr(this,void 0,void 0,function(){return Rr(this,function(h){return[2,Th.create(l,this.mediaStream,a,d)]})})},o.create=function(l){return Dr(this,void 0,void 0,function(){var a,d;return Rr(this,function(h){switch(h.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return a={audio:!1,video:l},[4,navigator.mediaDevices.getUserMedia(a)];case 1:return d=h.sent(),[2,new o(d)]}})})},o}(),Qs=function(o,l,a,d){function h(g){return g instanceof a?g:new a(function(A){A(g)})}return new(a||(a=Promise))(function(g,A){function b(S){try{p(d.next(S))}catch(N){A(N)}}function T(S){try{p(d.throw(S))}catch(N){A(N)}}function p(S){S.done?g(S.value):h(S.value).then(b,T)}p((d=d.apply(o,l||[])).next())})},qs=function(o,l){var a={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,h,g,A;return A={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function b(p){return function(S){return T([p,S])}}function T(p){if(d)throw new TypeError("Generator is already executing.");for(;A&&(A=0,p[0]&&(a=0)),a;)try{if(d=1,h&&(g=p[0]&2?h.return:p[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,p[1])).done)return g;switch(h=0,g&&(p=[p[0]&2,g.value]),p[0]){case 0:case 1:g=p;break;case 4:return a.label++,{value:p[1],done:!1};case 5:a.label++,h=p[1],p=[0];continue;case 7:p=a.ops.pop(),a.trys.pop();continue;default:if(g=a.trys,!(g=g.length>0&&g[g.length-1])&&(p[0]===6||p[0]===2)){a=0;continue}if(p[0]===3&&(!g||p[1]>g[0]&&p[1]<g[3])){a.label=p[1];break}if(p[0]===6&&a.label<g[1]){a.label=g[1],g=p;break}if(g&&a.label<g[2]){a.label=g[2],a.ops.push(p);break}g[2]&&a.ops.pop(),a.trys.pop();continue}p=l.call(o,a)}catch(S){p=[6,S],h=0}finally{d=g=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},vh=function(){function o(){}return o.failIfNotSupported=function(){return Qs(this,void 0,void 0,function(){return qs(this,function(l){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new o]})})},o.prototype.create=function(l){return Qs(this,void 0,void 0,function(){return qs(this,function(a){return[2,Nh.create(l)]})})},o}(),Mh=function(o,l,a,d){function h(g){return g instanceof a?g:new a(function(A){A(g)})}return new(a||(a=Promise))(function(g,A){function b(S){try{p(d.next(S))}catch(N){A(N)}}function T(S){try{p(d.throw(S))}catch(N){A(N)}}function p(S){S.done?g(S.value):h(S.value).then(b,T)}p((d=d.apply(o,l||[])).next())})},_h=function(o,l){var a={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,h,g,A;return A={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function b(p){return function(S){return T([p,S])}}function T(p){if(d)throw new TypeError("Generator is already executing.");for(;A&&(A=0,p[0]&&(a=0)),a;)try{if(d=1,h&&(g=p[0]&2?h.return:p[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,p[1])).done)return g;switch(h=0,g&&(p=[p[0]&2,g.value]),p[0]){case 0:case 1:g=p;break;case 4:return a.label++,{value:p[1],done:!1};case 5:a.label++,h=p[1],p=[0];continue;case 7:p=a.ops.pop(),a.trys.pop();continue;default:if(g=a.trys,!(g=g.length>0&&g[g.length-1])&&(p[0]===6||p[0]===2)){a=0;continue}if(p[0]===3&&(!g||p[1]>g[0]&&p[1]<g[3])){a.label=p[1];break}if(p[0]===6&&a.label<g[1]){a.label=g[1],g=p;break}if(g&&a.label<g[2]){a.label=g[2],a.ops.push(p);break}g[2]&&a.ops.pop(),a.trys.pop();continue}p=l.call(o,a)}catch(S){p=[6,S],h=0}finally{d=g=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Dh=function(){function o(){}return o.retrieve=function(){if(navigator.mediaDevices)return o.getCamerasFromMediaDevices();var l=MediaStreamTrack;return MediaStreamTrack&&l.getSources?o.getCamerasFromMediaStreamTrack():o.rejectWithError()},o.rejectWithError=function(){var l=Ln.unableToQuerySupportedDevices();return o.isHttpsOrLocalhost()||(l=Ln.insecureContextCameraQueryError()),Promise.reject(l)},o.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var l=location.host.split(":")[0];return l==="127.0.0.1"||l==="localhost"},o.getCamerasFromMediaDevices=function(){return Mh(this,void 0,void 0,function(){var l,a,d,h,g,A,b;return _h(this,function(T){switch(T.label){case 0:return l=function(p){for(var S=p.getVideoTracks(),N=0,O=S;N<O.length;N++){var k=O[N];k.enabled=!1,k.stop(),p.removeTrack(k)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return a=T.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(d=T.sent(),h=[],g=0,A=d;g<A.length;g++)b=A[g],b.kind==="videoinput"&&h.push({id:b.deviceId,label:b.label});return l(a),[2,h]}})})},o.getCamerasFromMediaStreamTrack=function(){return new Promise(function(l,a){var d=function(g){for(var A=[],b=0,T=g;b<T.length;b++){var p=T[b];p.kind==="video"&&A.push({id:p.id,label:p.label})}l(A)},h=MediaStreamTrack;h.getSources(d)})},o}(),Ve;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.NOT_STARTED=1]="NOT_STARTED",o[o.SCANNING=2]="SCANNING",o[o.PAUSED=3]="PAUSED"})(Ve||(Ve={}));var Rh=function(){function o(){this.state=Ve.NOT_STARTED,this.onGoingTransactionNewState=Ve.UNKNOWN}return o.prototype.directTransition=function(l){this.failIfTransitionOngoing(),this.validateTransition(l),this.state=l},o.prototype.startTransition=function(l){return this.failIfTransitionOngoing(),this.validateTransition(l),this.onGoingTransactionNewState=l,this},o.prototype.execute=function(){if(this.onGoingTransactionNewState===Ve.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var l=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ve.UNKNOWN,this.directTransition(l)},o.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ve.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ve.UNKNOWN},o.prototype.getState=function(){return this.state},o.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ve.UNKNOWN)throw"Cannot transition to a new state, already under transition"},o.prototype.validateTransition=function(l){switch(this.state){case Ve.UNKNOWN:throw"Transition from unknown is not allowed";case Ve.NOT_STARTED:this.failIfNewStateIs(l,[Ve.PAUSED]);break;case Ve.SCANNING:break;case Ve.PAUSED:break}},o.prototype.failIfNewStateIs=function(l,a){for(var d=0,h=a;d<h.length;d++){var g=h[d];if(l===g)throw"Cannot transition from ".concat(this.state," to ").concat(l)}},o}(),Oh=function(){function o(l){this.stateManager=l}return o.prototype.startTransition=function(l){return this.stateManager.startTransition(l)},o.prototype.directTransition=function(l){this.stateManager.directTransition(l)},o.prototype.getState=function(){return this.stateManager.getState()},o.prototype.canScanFile=function(){return this.stateManager.getState()===Ve.NOT_STARTED},o.prototype.isScanning=function(){return this.stateManager.getState()!==Ve.NOT_STARTED},o.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ve.SCANNING},o.prototype.isPaused=function(){return this.stateManager.getState()===Ve.PAUSED},o}(),Lh=function(){function o(){}return o.create=function(){return new Oh(new Rh)},o}(),Ph=function(){var o=function(l,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(d[g]=h[g])},o(l,a)};return function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");o(l,a);function d(){this.constructor=l}l.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}}(),yt=function(o){Ph(l,o);function l(){return o!==null&&o.apply(this,arguments)||this}return l.DEFAULT_WIDTH=300,l.DEFAULT_WIDTH_OFFSET=2,l.FILE_SCAN_MIN_HEIGHT=300,l.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,l.MIN_QR_BOX_SIZE=50,l.SHADED_LEFT=1,l.SHADED_RIGHT=2,l.SHADED_TOP=3,l.SHADED_BOTTOM=4,l.SHADED_REGION_ELEMENT_ID="qr-shaded-region",l.VERBOSE=!1,l.BORDER_SHADER_DEFAULT_COLOR="#ffffff",l.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",l}(kt),Bh=function(){function o(l,a){this.logger=a,this.fps=yt.SCAN_DEFAULT_FPS,l?(l.fps&&(this.fps=l.fps),this.disableFlip=l.disableFlip===!0,this.qrbox=l.qrbox,this.aspectRatio=l.aspectRatio,this.videoConstraints=l.videoConstraints):this.disableFlip=yt.DEFAULT_DISABLE_FLIP}return o.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?pc.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},o.prototype.isShadedBoxEnabled=function(){return!Xt(this.qrbox)},o.create=function(l,a){return new o(l,a)},o}(),Js=function(){function o(l,a){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(l))throw"HTML Element with id=".concat(l," not found");this.elementId=l,this.verbose=!1;var d;typeof a=="boolean"?this.verbose=a===!0:a&&(d=a,this.verbose=d.verbose===!0,d.experimentalFeatures),this.logger=new xc(this.verbose),this.qrcode=new Eh(this.getSupportedFormats(a),this.getUseBarCodeDetectorIfSupported(d),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Lh.create()}return o.prototype.start=function(l,a,d,h){var g=this;if(!l)throw"cameraIdOrConfig is required";if(!d||typeof d!="function")throw"qrCodeSuccessCallback is required and should be a function.";var A;h?A=h:A=this.verbose?this.logger.log:function(){};var b=Bh.create(a,this.logger);this.clearElement();var T=!1;b.videoConstraints&&(b.isMediaStreamConstraintsValid()?T=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=T,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:yt.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var N=this,O=this.stateManagerProxy.startTransition(Ve.SCANNING);return new Promise(function(k,Y){var F=p?b.videoConstraints:N.createVideoConstraints(l);if(!F){O.cancel(),Y("videoConstraints should be defined");return}var X={};(!p||b.aspectRatio)&&(X.aspectRatio=b.aspectRatio);var Q={onRenderSurfaceReady:function(Z,W){N.setupUi(Z,W,b),N.isScanning=!0,N.foreverScan(b,d,A)}};vh.failIfNotSupported().then(function(Z){Z.create(F).then(function(W){return W.render(g.element,X,Q).then(function($){N.renderedCamera=$,O.execute(),k(null)}).catch(function($){O.cancel(),Y($)})}).catch(function(W){O.cancel(),Y(Ln.errorGettingUserMedia(W))})}).catch(function(Z){O.cancel(),Y(Ln.cameraStreamingNotSupported())})})},o.prototype.pause=function(l){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ve.PAUSED),this.showPausedState(),(Xt(l)||l!==!0)&&(l=!1),l&&this.renderedCamera&&this.renderedCamera.pause()},o.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var l=this,a=function(){l.stateManagerProxy.directTransition(Ve.SCANNING),l.hidePausedState()};if(!this.renderedCamera.isPaused()){a();return}this.renderedCamera.resume(function(){a()})},o.prototype.getState=function(){return this.stateManagerProxy.getState()},o.prototype.stop=function(){var l=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var a=this.stateManagerProxy.startTransition(Ve.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var d=function(){if(l.element){var g=document.getElementById(yt.SHADED_REGION_ELEMENT_ID);g&&l.element.removeChild(g)}},h=this;return this.renderedCamera.close().then(function(){return h.renderedCamera=null,h.element&&(h.element.removeChild(h.canvasElement),h.canvasElement=null),d(),h.qrRegion&&(h.qrRegion=null),h.context&&(h.context=null),a.execute(),h.hidePausedState(),h.isScanning=!1,Promise.resolve()})},o.prototype.scanFile=function(l,a){return this.scanFileV2(l,a).then(function(d){return d.decodedText})},o.prototype.scanFileV2=function(l,a){var d=this;if(!l||!(l instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Xt(a)&&(a=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(h,g){d.possiblyCloseLastScanImageFile(),d.clearElement(),d.lastScanImageFile=URL.createObjectURL(l);var A=new Image;A.onload=function(){var b=A.width,T=A.height,p=document.getElementById(d.elementId),S=p.clientWidth?p.clientWidth:yt.DEFAULT_WIDTH,N=Math.max(p.clientHeight?p.clientHeight:T,yt.FILE_SCAN_MIN_HEIGHT),O=d.computeCanvasDrawConfig(b,T,S,N);if(a){var k=d.createCanvasElement(S,N,"qr-canvas-visible");k.style.display="inline-block",p.appendChild(k);var Y=k.getContext("2d");if(!Y)throw"Unable to get 2d context from canvas";Y.canvas.width=S,Y.canvas.height=N,Y.drawImage(A,0,0,b,T,O.x,O.y,O.width,O.height)}var F=yt.FILE_SCAN_HIDDEN_CANVAS_PADDING,X=Math.max(A.width,O.width),Q=Math.max(A.height,O.height),Z=X+2*F,W=Q+2*F,$=d.createCanvasElement(Z,W);p.appendChild($);var Oe=$.getContext("2d");if(!Oe)throw"Unable to get 2d context from canvas";Oe.canvas.width=Z,Oe.canvas.height=W,Oe.drawImage(A,0,0,b,T,F,F,X,Q);try{d.qrcode.decodeRobustlyAsync($).then(function(ge){h(Vs.createFromQrcodeResult(ge))}).catch(g)}catch(ge){g("QR code parse error, error = ".concat(ge))}},A.onerror=g,A.onabort=g,A.onstalled=g,A.onsuspend=g,A.src=URL.createObjectURL(l)})},o.prototype.clear=function(){this.clearElement()},o.getCameras=function(){return Dh.retrieve()},o.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},o.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},o.prototype.applyVideoConstraints=function(l){if(l){if(!pc.isMediaStreamConstraintsValid(l,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(l)},o.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},o.prototype.getSupportedFormats=function(l){var a=[J.QR_CODE,J.AZTEC,J.CODABAR,J.CODE_39,J.CODE_93,J.CODE_128,J.DATA_MATRIX,J.MAXICODE,J.ITF,J.EAN_13,J.EAN_8,J.PDF_417,J.RSS_14,J.RSS_EXPANDED,J.UPC_A,J.UPC_E,J.UPC_EAN_EXTENSION];if(!l||typeof l=="boolean"||!l.formatsToSupport)return a;if(!Array.isArray(l.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(l.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var d=[],h=0,g=l.formatsToSupport;h<g.length;h++){var A=g[h];hh(A)?d.push(A):this.logger.warn("Invalid format: ".concat(A," passed in config, ignoring."))}if(d.length===0)throw"None of formatsToSupport match supported values.";return d},o.prototype.getUseBarCodeDetectorIfSupported=function(l){if(Xt(l))return!0;if(!Xt(l.useBarCodeDetectorIfSupported))return l.useBarCodeDetectorIfSupported!==!1;if(Xt(l.experimentalFeatures))return!0;var a=l.experimentalFeatures;return Xt(a.useBarCodeDetectorIfSupported)?!0:a.useBarCodeDetectorIfSupported!==!1},o.prototype.validateQrboxSize=function(l,a,d){var h=this,g=d.qrbox;this.validateQrboxConfig(g);var A=this.toQrdimensions(l,a,g),b=function(p){if(p<yt.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(yt.MIN_QR_BOX_SIZE,"px.")},T=function(p){return p>l&&(h.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=l),p};b(A.width),b(A.height),A.width=T(A.width)},o.prototype.validateQrboxConfig=function(l){if(typeof l!="number"&&typeof l!="function"&&(l.width===void 0||l.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},o.prototype.toQrdimensions=function(l,a,d){if(typeof d=="number")return{width:d,height:d};if(typeof d=="function")try{return d(l,a)}catch(h){throw new Error("qrbox config was passed as a function but it failed with unknown error"+h)}return d},o.prototype.setupUi=function(l,a,d){d.isShadedBoxEnabled()&&this.validateQrboxSize(l,a,d);var h=Xt(d.qrbox)?{width:l,height:a}:d.qrbox;this.validateQrboxConfig(h);var g=this.toQrdimensions(l,a,h);g.height>a&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var A=d.isShadedBoxEnabled()&&g.height<=a,b={x:0,y:0,width:l,height:a},T=A?this.getShadedRegionBounds(l,a,g):b,p=this.createCanvasElement(T.width,T.height),S={willReadFrequently:!0},N=p.getContext("2d",S);N.canvas.width=T.width,N.canvas.height=T.height,this.element.append(p),A&&this.possiblyInsertShadingElement(this.element,l,a,g),this.createScannerPausedUiElement(this.element),this.qrRegion=T,this.context=N,this.canvasElement=p},o.prototype.createScannerPausedUiElement=function(l){var a=document.createElement("div");a.innerText=Ln.scannerPaused(),a.style.display="none",a.style.position="absolute",a.style.top="0px",a.style.zIndex="1",a.style.background="rgba(9, 9, 9, 0.46)",a.style.color="#FFECEC",a.style.textAlign="center",a.style.width="100%",l.appendChild(a),this.scannerPausedUiElement=a},o.prototype.scanContext=function(l,a){var d=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(h){return l(h.text,Vs.createFromQrcodeResult(h)),d.possiblyUpdateShaders(!0),!0}).catch(function(h){d.possiblyUpdateShaders(!1);var g=Ln.codeParseError(h);return a(g,gc.createFrom(g)),!1})},o.prototype.foreverScan=function(l,a,d){var h=this;if(this.shouldScan&&this.renderedCamera){var g=this.renderedCamera.getSurface(),A=g.videoWidth/g.clientWidth,b=g.videoHeight/g.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var T=this.qrRegion.width*A,p=this.qrRegion.height*b,S=this.qrRegion.x*A,N=this.qrRegion.y*b;this.context.drawImage(g,S,N,T,p,0,0,this.qrRegion.width,this.qrRegion.height);var O=function(){h.foreverScanTimeout=setTimeout(function(){h.foreverScan(l,a,d)},h.getTimeoutFps(l.fps))};this.scanContext(a,d).then(function(k){!k&&l.disableFlip!==!0?(h.context.translate(h.context.canvas.width,0),h.context.scale(-1,1),h.scanContext(a,d).finally(function(){O()})):O()}).catch(function(k){h.logger.logError("Error happend while scanning context",k),O()})}},o.prototype.createVideoConstraints=function(l){if(typeof l=="string")return{deviceId:{exact:l}};if(typeof l=="object"){var a="facingMode",d="deviceId",h={user:!0,environment:!0},g="exact",A=function(Y){if(Y in h)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(Y,"'")},b=Object.keys(l);if(b.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(b.length," keys");var T=Object.keys(l)[0];if(T!==a&&T!==d)throw"Only '".concat(a,"' and '").concat(d,"' ")+" are supported for 'cameraIdOrConfig'";if(T===a){var p=l.facingMode;if(typeof p=="string"){if(A(p))return{facingMode:p}}else if(typeof p=="object")if(g in p){if(A(p["".concat(g)]))return{facingMode:{exact:p["".concat(g)]}}}else throw"'facingMode' should be string or object with"+" ".concat(g," as key.");else{var S=typeof p;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var N=l.deviceId;if(typeof N=="string")return{deviceId:N};if(typeof N=="object"){if(g in N)return{deviceId:{exact:N["".concat(g)]}};throw"'deviceId' should be string or object with"+" ".concat(g," as key.")}else{var O=typeof N;throw"Invalid type of 'deviceId' = ".concat(O)}}}var k=typeof l;throw"Invalid type of 'cameraIdOrConfig' = ".concat(k)},o.prototype.computeCanvasDrawConfig=function(l,a,d,h){if(l<=d&&a<=h){var g=(d-l)/2,A=(h-a)/2;return{x:g,y:A,width:l,height:a}}else{var b=l,T=a;return l>d&&(a=d/l*a,l=d),a>h&&(l=h/a*l,a=h),this.logger.log("Image downsampled from "+"".concat(b,"X").concat(T)+" to ".concat(l,"X").concat(a,".")),this.computeCanvasDrawConfig(l,a,d,h)}},o.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var l=document.getElementById(this.elementId);l&&(l.innerHTML="")},o.prototype.possiblyUpdateShaders=function(l){this.qrMatch!==l&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(a){a.style.backgroundColor=l?yt.BORDER_SHADER_MATCH_COLOR:yt.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=l)},o.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},o.prototype.createCanvasElement=function(l,a,d){var h=l,g=a,A=document.createElement("canvas");return A.style.width="".concat(h,"px"),A.style.height="".concat(g,"px"),A.style.display="none",A.id=Xt(d)?"qr-canvas":d,A},o.prototype.getShadedRegionBounds=function(l,a,d){if(d.width>l||d.height>a)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(l-d.width)/2,y:(a-d.height)/2,width:d.width,height:d.height}},o.prototype.possiblyInsertShadingElement=function(l,a,d,h){if(!(a-h.width<1||d-h.height<1)){var g=document.createElement("div");g.style.position="absolute";var A=(a-h.width)/2,b=(d-h.height)/2;if(g.style.borderLeft="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderRight="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderTop="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderBottom="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),g.style.boxSizing="border-box",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.id="".concat(yt.SHADED_REGION_ELEMENT_ID),a-h.width<11||d-h.height<11)this.hasBorderShaders=!1;else{var T=5,p=40;this.insertShaderBorders(g,p,T,-T,null,0,!0),this.insertShaderBorders(g,p,T,-T,null,0,!1),this.insertShaderBorders(g,p,T,null,-T,0,!0),this.insertShaderBorders(g,p,T,null,-T,0,!1),this.insertShaderBorders(g,T,p+T,-T,null,-T,!0),this.insertShaderBorders(g,T,p+T,null,-T,-T,!0),this.insertShaderBorders(g,T,p+T,-T,null,-T,!1),this.insertShaderBorders(g,T,p+T,null,-T,-T,!1),this.hasBorderShaders=!0}l.append(g)}},o.prototype.insertShaderBorders=function(l,a,d,h,g,A,b){var T=document.createElement("div");T.style.position="absolute",T.style.backgroundColor=yt.BORDER_SHADER_DEFAULT_COLOR,T.style.width="".concat(a,"px"),T.style.height="".concat(d,"px"),h!==null&&(T.style.top="".concat(h,"px")),g!==null&&(T.style.bottom="".concat(g,"px")),b?T.style.left="".concat(A,"px"):T.style.right="".concat(A,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(T),l.appendChild(T)},o.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},o.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},o.prototype.getTimeoutFps=function(l){return 1e3/l},o}(),ns="data:image/svg+xml;base64,",kh=ns+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Fh=ns+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",$s=ns+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",jh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",eo=function(){function o(){}return o.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},o}(),Uh=function(){function o(){this.data=eo.createDefault();var l=localStorage.getItem(o.LOCAL_STORAGE_KEY);l?this.data=JSON.parse(l):this.reset()}return o.prototype.hasCameraPermissions=function(){return this.data.hasPermission},o.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},o.prototype.setHasPermission=function(l){this.data.hasPermission=l,this.flush()},o.prototype.setLastUsedCameraId=function(l){this.data.lastUsedCameraId=l,this.flush()},o.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},o.prototype.reset=function(){this.data=eo.createDefault(),this.flush()},o.prototype.flush=function(){localStorage.setItem(o.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},o.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",o}(),Hh=function(){function o(){this.infoDiv=document.createElement("div")}return o.prototype.renderInto=function(l){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Gs.poweredBy();var a=document.createElement("a");a.innerText="ScanApp",a.href="https://scanapp.org",a.target="new",a.style.color="white",this.infoDiv.appendChild(a);var d=document.createElement("br"),h=document.createElement("br");this.infoDiv.appendChild(d),this.infoDiv.appendChild(h);var g=document.createElement("a");g.innerText=Gs.reportIssues(),g.href="https://github.com/mebjas/html5-qrcode/issues",g.target="new",g.style.color="white",this.infoDiv.appendChild(g),l.appendChild(this.infoDiv)},o.prototype.show=function(){this.infoDiv.style.display="block"},o.prototype.hide=function(){this.infoDiv.style.display="none"},o}(),zh=function(){function o(l,a){this.isShowingInfoIcon=!0,this.onTapIn=l,this.onTapOut=a,this.infoIcon=document.createElement("img")}return o.prototype.renderInto=function(l){var a=this;this.infoIcon.alt="Info icon",this.infoIcon.src=$s,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(d){return a.onHoverIn()},this.infoIcon.onmouseout=function(d){return a.onHoverOut()},this.infoIcon.onclick=function(d){return a.onClick()},l.appendChild(this.infoIcon)},o.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},o.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},o.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=jh,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=$s,this.infoIcon.style.opacity="0.6")},o}(),Vh=function(){function o(){var l=this;this.infoDiv=new Hh,this.infoIcon=new zh(function(){l.infoDiv.show()},function(){l.infoDiv.hide()})}return o.prototype.renderInto=function(l){this.infoDiv.renderInto(l),this.infoIcon.renderInto(l)},o}(),Gh=function(o,l,a,d){function h(g){return g instanceof a?g:new a(function(A){A(g)})}return new(a||(a=Promise))(function(g,A){function b(S){try{p(d.next(S))}catch(N){A(N)}}function T(S){try{p(d.throw(S))}catch(N){A(N)}}function p(S){S.done?g(S.value):h(S.value).then(b,T)}p((d=d.apply(o,l||[])).next())})},Wh=function(o,l){var a={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,h,g,A;return A={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function b(p){return function(S){return T([p,S])}}function T(p){if(d)throw new TypeError("Generator is already executing.");for(;A&&(A=0,p[0]&&(a=0)),a;)try{if(d=1,h&&(g=p[0]&2?h.return:p[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,p[1])).done)return g;switch(h=0,g&&(p=[p[0]&2,g.value]),p[0]){case 0:case 1:g=p;break;case 4:return a.label++,{value:p[1],done:!1};case 5:a.label++,h=p[1],p=[0];continue;case 7:p=a.ops.pop(),a.trys.pop();continue;default:if(g=a.trys,!(g=g.length>0&&g[g.length-1])&&(p[0]===6||p[0]===2)){a=0;continue}if(p[0]===3&&(!g||p[1]>g[0]&&p[1]<g[3])){a.label=p[1];break}if(p[0]===6&&a.label<g[1]){a.label=g[1],g=p;break}if(g&&a.label<g[2]){a.label=g[2],a.ops.push(p);break}g[2]&&a.ops.pop(),a.trys.pop();continue}p=l.call(o,a)}catch(S){p=[6,S],h=0}finally{d=g=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},to=function(){function o(){}return o.hasPermissions=function(){return Gh(this,void 0,void 0,function(){var l,a,d,h;return Wh(this,function(g){switch(g.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(l=g.sent(),a=0,d=l;a<d.length;a++)if(h=d[a],h.kind==="videoinput"&&h.label)return[2,!0];return[2,!1]}})})},o}(),an=function(){function o(l){this.supportedScanTypes=this.validateAndReturnScanTypes(l)}return o.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},o.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},o.prototype.isCameraScanRequired=function(){for(var l=0,a=this.supportedScanTypes;l<a.length;l++){var d=a[l];if(o.isCameraScanType(d))return!0}return!1},o.isCameraScanType=function(l){return l===dn.SCAN_TYPE_CAMERA},o.isFileScanType=function(l){return l===dn.SCAN_TYPE_FILE},o.prototype.validateAndReturnScanTypes=function(l){if(!l||l.length===0)return kt.DEFAULT_SUPPORTED_SCAN_TYPE;var a=kt.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(l.length>a)throw"Max ".concat(a," values expected for ")+"supportedScanTypes";for(var d=0,h=l;d<h.length;d++){var g=h[d];if(!kt.DEFAULT_SUPPORTED_SCAN_TYPE.includes(g))throw"Unsupported scan type ".concat(g)}return l},o}(),St=function(){function o(){}return o.ALL_ELEMENT_CLASS="html5-qrcode-element",o.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",o.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",o.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",o.TORCH_BUTTON_ID="html5-qrcode-button-torch",o.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",o.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",o.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",o.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",o.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",o.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",o}(),Kt=function(){function o(){}return o.createElement=function(l,a){var d=document.createElement(l);return d.id=a,d.classList.add(St.ALL_ELEMENT_CLASS),l==="button"&&d.setAttribute("type","button"),d},o}(),wc=function(o,l,a,d){function h(g){return g instanceof a?g:new a(function(A){A(g)})}return new(a||(a=Promise))(function(g,A){function b(S){try{p(d.next(S))}catch(N){A(N)}}function T(S){try{p(d.throw(S))}catch(N){A(N)}}function p(S){S.done?g(S.value):h(S.value).then(b,T)}p((d=d.apply(o,l||[])).next())})},Cc=function(o,l){var a={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,h,g,A;return A={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function b(p){return function(S){return T([p,S])}}function T(p){if(d)throw new TypeError("Generator is already executing.");for(;A&&(A=0,p[0]&&(a=0)),a;)try{if(d=1,h&&(g=p[0]&2?h.return:p[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,p[1])).done)return g;switch(h=0,g&&(p=[p[0]&2,g.value]),p[0]){case 0:case 1:g=p;break;case 4:return a.label++,{value:p[1],done:!1};case 5:a.label++,h=p[1],p=[0];continue;case 7:p=a.ops.pop(),a.trys.pop();continue;default:if(g=a.trys,!(g=g.length>0&&g[g.length-1])&&(p[0]===6||p[0]===2)){a=0;continue}if(p[0]===3&&(!g||p[1]>g[0]&&p[1]<g[3])){a.label=p[1];break}if(p[0]===6&&a.label<g[1]){a.label=g[1],g=p;break}if(g&&a.label<g[2]){a.label=g[2],a.ops.push(p);break}g[2]&&a.ops.pop(),a.trys.pop();continue}p=l.call(o,a)}catch(S){p=[6,S],h=0}finally{d=g=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},no=function(){function o(l,a,d){this.isTorchOn=!1,this.torchCapability=l,this.buttonController=a,this.onTorchActionFailureCallback=d}return o.prototype.isTorchEnabled=function(){return this.isTorchOn},o.prototype.flipState=function(){return wc(this,void 0,void 0,function(){var l,a;return Cc(this,function(d){switch(d.label){case 0:this.buttonController.disable(),l=!this.isTorchOn,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this.torchCapability.apply(l)];case 2:return d.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),l),[3,4];case 3:return a=d.sent(),this.propagateFailure(l,a),this.buttonController.enable(),[3,4];case 4:return[2]}})})},o.prototype.updateUiBasedOnLatestSettings=function(l,a){l===a?(this.buttonController.setText(a?Se.torchOffButton():Se.torchOnButton()),this.isTorchOn=a):this.propagateFailure(a),this.buttonController.enable()},o.prototype.propagateFailure=function(l,a){var d=l?Se.torchOnFailedMessage():Se.torchOffFailedMessage();a&&(d+="; Error = "+a),this.onTorchActionFailureCallback(d)},o.prototype.reset=function(){this.isTorchOn=!1},o}(),Yh=function(){function o(l,a){this.onTorchActionFailureCallback=a,this.torchButton=Kt.createElement("button",St.TORCH_BUTTON_ID),this.torchController=new no(l,this,a)}return o.prototype.render=function(l,a){var d=this;this.torchButton.innerText=Se.torchOnButton(),this.torchButton.style.display=a.display,this.torchButton.style.marginLeft=a.marginLeft;var h=this;this.torchButton.addEventListener("click",function(g){return wc(d,void 0,void 0,function(){return Cc(this,function(A){switch(A.label){case 0:return[4,h.torchController.flipState()];case 1:return A.sent(),h.torchController.isTorchEnabled()?(h.torchButton.classList.remove(St.TORCH_BUTTON_CLASS_TORCH_OFF),h.torchButton.classList.add(St.TORCH_BUTTON_CLASS_TORCH_ON)):(h.torchButton.classList.remove(St.TORCH_BUTTON_CLASS_TORCH_ON),h.torchButton.classList.add(St.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),l.appendChild(this.torchButton)},o.prototype.updateTorchCapability=function(l){this.torchController=new no(l,this,this.onTorchActionFailureCallback)},o.prototype.getTorchButton=function(){return this.torchButton},o.prototype.hide=function(){this.torchButton.style.display="none"},o.prototype.show=function(){this.torchButton.style.display="inline-block"},o.prototype.disable=function(){this.torchButton.disabled=!0},o.prototype.enable=function(){this.torchButton.disabled=!1},o.prototype.setText=function(l){this.torchButton.innerText=l},o.prototype.reset=function(){this.torchButton.innerText=Se.torchOnButton(),this.torchController.reset()},o.create=function(l,a,d,h){var g=new o(a,h);return g.render(l,d),g},o}(),Xh=function(){function o(l,a,d){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=a?"block":"none",l.appendChild(this.fileBasedScanRegion);var h=document.createElement("label");h.setAttribute("for",this.getFileScanInputId()),h.style.display="inline-block",this.fileBasedScanRegion.appendChild(h),this.fileSelectionButton=Kt.createElement("button",St.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(b){h.click()}),h.append(this.fileSelectionButton),this.fileScanInput=Kt.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",h.appendChild(this.fileScanInput);var g=this;this.fileScanInput.addEventListener("change",function(b){if(!(b==null||b.target==null)){var T=b.target;if(!(T.files&&T.files.length===0)){var p=T.files,S=p[0],N=S.name;g.setImageNameToButton(N),d(S)}}});var A=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(A),this.fileBasedScanRegion.addEventListener("dragenter",function(b){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),b.stopPropagation(),b.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(b){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder(),b.stopPropagation(),b.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(b){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),b.stopPropagation(),b.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(b){b.stopPropagation(),b.preventDefault(),g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder();var T=b.dataTransfer;if(T){var p=T.files;if(!p||p.length===0)return;for(var S=!1,N=0;N<p.length;++N){var O=p.item(N);if(O){var k=/image.*/;if(O.type.match(k)){S=!0;var Y=O.name;g.setImageNameToButton(Y),d(O),A.innerText=Se.dragAndDropMessage();break}}}S||(A.innerText=Se.dragAndDropMessageOnlyImages())}})}return o.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},o.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},o.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},o.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},o.prototype.createFileBasedScanRegion=function(){var l=document.createElement("div");return l.style.textAlign="center",l.style.margin="auto",l.style.width="80%",l.style.maxWidth="600px",l.style.border=this.fileBasedScanRegionDefaultBorder(),l.style.padding="10px",l.style.marginBottom="10px",l},o.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},o.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},o.prototype.createDragAndDropMessage=function(){var l=document.createElement("div");return l.innerText=Se.dragAndDropMessage(),l.style.fontWeight="400",l},o.prototype.setImageNameToButton=function(l){var a=20;if(l.length>a){var d=l.substring(0,8),h=l.length,g=l.substring(h-8,h);l="".concat(d,"....").concat(g)}var A=Se.fileSelectionChooseAnother()+" - "+l;this.fileSelectionButton.innerText=A},o.prototype.setInitialValueToButton=function(){var l=Se.fileSelectionChooseImage()+" - "+Se.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=l},o.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},o.create=function(l,a,d){var h=new o(l,a,d);return h},o}(),Zh=function(){function o(l){this.selectElement=Kt.createElement("select",St.CAMERA_SELECTION_SELECT_ID),this.cameras=l,this.options=[]}return o.prototype.render=function(l){var a=document.createElement("span");a.style.marginRight="10px";var d=this.cameras.length;if(d===0)throw new Error("No cameras found");if(d===1)a.style.display="none";else{var h=Se.selectCamera();a.innerText="".concat(h," (").concat(this.cameras.length,")  ")}for(var g=1,A=0,b=this.cameras;A<b.length;A++){var T=b[A],p=T.id,S=T.label==null?p:T.label;(!S||S==="")&&(S=[Se.anonymousCameraPrefix(),g++].join(" "));var N=document.createElement("option");N.value=p,N.innerText=S,this.options.push(N),this.selectElement.appendChild(N)}a.appendChild(this.selectElement),l.appendChild(a)},o.prototype.disable=function(){this.selectElement.disabled=!0},o.prototype.isDisabled=function(){return this.selectElement.disabled===!0},o.prototype.enable=function(){this.selectElement.disabled=!1},o.prototype.getValue=function(){return this.selectElement.value},o.prototype.hasValue=function(l){for(var a=0,d=this.options;a<d.length;a++){var h=d[a];if(h.value===l)return!0}return!1},o.prototype.setValue=function(l){if(!this.hasValue(l))throw new Error("".concat(l," is not present in the camera list."));this.selectElement.value=l},o.prototype.hasSingleItem=function(){return this.cameras.length===1},o.prototype.numCameras=function(){return this.cameras.length},o.create=function(l,a){var d=new o(a);return d.render(l),d},o}(),Kh=function(){function o(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Kt.createElement("input",St.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return o.prototype.render=function(l,a){this.zoomElementContainer.style.display=a?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",l.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var d=Se.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(d),this.rangeText.style.marginRight="10px";var h=this;this.rangeInput.addEventListener("input",function(){return h.onValueChange()}),this.rangeInput.addEventListener("change",function(){return h.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},o.prototype.onValueChange=function(){var l=Se.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(l),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},o.prototype.setValues=function(l,a,d,h){this.rangeInput.min=l.toString(),this.rangeInput.max=a.toString(),this.rangeInput.step=h.toString(),this.rangeInput.value=d.toString(),this.onValueChange()},o.prototype.show=function(){this.zoomElementContainer.style.display="block"},o.prototype.hide=function(){this.zoomElementContainer.style.display="none"},o.prototype.setOnCameraZoomValueChangeCallback=function(l){this.onChangeCallback=l},o.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},o.create=function(l,a){var d=new o;return d.render(l,a),d},o}(),It;(function(o){o[o.STATUS_DEFAULT=0]="STATUS_DEFAULT",o[o.STATUS_SUCCESS=1]="STATUS_SUCCESS",o[o.STATUS_WARNING=2]="STATUS_WARNING",o[o.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(It||(It={}));function Qh(o){return{fps:o.fps,qrbox:o.qrbox,aspectRatio:o.aspectRatio,disableFlip:o.disableFlip,videoConstraints:o.videoConstraints}}function qh(o,l){return{formatsToSupport:o.formatsToSupport,useBarCodeDetectorIfSupported:o.useBarCodeDetectorIfSupported,experimentalFeatures:o.experimentalFeatures,verbose:l}}var Jh=function(){function o(l,a,d){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=l,this.config=this.createConfig(a),this.verbose=d===!0,!document.getElementById(l))throw"HTML Element with id=".concat(l," not found");this.scanTypeSelector=new an(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new xc(this.verbose),this.persistedDataManager=new Uh,a.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return o.prototype.render=function(l,a){var d=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(g,A){if(l)l(g,A);else{if(d.lastMatchFound===g)return;d.lastMatchFound=g,d.setHeaderMessage(Se.lastMatch(g),It.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(g,A){a&&a(g,A)};var h=document.getElementById(this.elementId);if(!h)throw"HTML Element with id=".concat(this.elementId," not found");h.innerHTML="",this.createBasicLayout(h),this.html5Qrcode=new Js(this.getScanRegionId(),qh(this.config,this.verbose))},o.prototype.pause=function(l){(Xt(l)||l!==!0)&&(l=!1),this.getHtml5QrcodeOrFail().pause(l)},o.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},o.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},o.prototype.clear=function(){var l=this,a=function(){var d=document.getElementById(l.elementId);d&&(d.innerHTML="",l.resetBasicLayout(d))};return this.html5Qrcode?new Promise(function(d,h){if(!l.html5Qrcode){d();return}l.html5Qrcode.isScanning?l.html5Qrcode.stop().then(function(g){if(!l.html5Qrcode){d();return}l.html5Qrcode.clear(),a(),d()}).catch(function(g){l.verbose&&l.logger.logError("Unable to stop qrcode scanner",g),h(g)}):(l.html5Qrcode.clear(),a(),d())}):Promise.resolve()},o.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},o.prototype.applyVideoConstraints=function(l){return this.getHtml5QrcodeOrFail().applyVideoConstraints(l)},o.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},o.prototype.createConfig=function(l){return l?(l.fps||(l.fps=kt.SCAN_DEFAULT_FPS),l.rememberLastUsedCamera!==!kt.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(l.rememberLastUsedCamera=kt.DEFAULT_REMEMBER_LAST_CAMERA_USED),l.supportedScanTypes||(l.supportedScanTypes=kt.DEFAULT_SUPPORTED_SCAN_TYPE),l):{fps:kt.SCAN_DEFAULT_FPS,rememberLastUsedCamera:kt.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:kt.DEFAULT_SUPPORTED_SCAN_TYPE}},o.prototype.createBasicLayout=function(l){l.style.position="relative",l.style.padding="0px",l.style.border="1px solid silver",this.createHeader(l);var a=document.createElement("div"),d=this.getScanRegionId();a.id=d,a.style.width="100%",a.style.minHeight="100px",a.style.textAlign="center",l.appendChild(a),an.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var h=document.createElement("div"),g=this.getDashboardId();h.id=g,h.style.width="100%",l.appendChild(h),this.setupInitialDashboard(h)},o.prototype.resetBasicLayout=function(l){l.style.border="none"},o.prototype.setupInitialDashboard=function(l){this.createSection(l),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},o.prototype.createHeader=function(l){var a=document.createElement("div");a.style.textAlign="left",a.style.margin="0px",l.appendChild(a);var d=new Vh;d.renderInto(a);var h=document.createElement("div");h.id=this.getHeaderMessageContainerId(),h.style.display="none",h.style.textAlign="center",h.style.fontSize="14px",h.style.padding="2px 10px",h.style.margin="4px",h.style.borderTop="1px solid #f6f6f6",a.appendChild(h)},o.prototype.createSection=function(l){var a=document.createElement("div");a.id=this.getDashboardSectionId(),a.style.width="100%",a.style.padding="10px 0px 10px 0px",a.style.textAlign="left",l.appendChild(a)},o.prototype.createCameraListUi=function(l,a,d){var h=this;h.showHideScanTypeSwapLink(!1),h.setHeaderMessage(Se.cameraPermissionRequesting());var g=function(){d||h.createPermissionButton(l,a)};Js.getCameras().then(function(A){h.persistedDataManager.setHasPermission(!0),h.showHideScanTypeSwapLink(!0),h.resetHeaderMessage(),A&&A.length>0?(l.removeChild(a),h.renderCameraSelection(A)):(h.setHeaderMessage(Se.noCameraFound(),It.STATUS_WARNING),g())}).catch(function(A){h.persistedDataManager.setHasPermission(!1),d?d.disabled=!1:g(),h.setHeaderMessage(A,It.STATUS_WARNING),h.showHideScanTypeSwapLink(!0)})},o.prototype.createPermissionButton=function(l,a){var d=this,h=Kt.createElement("button",this.getCameraPermissionButtonId());h.innerText=Se.cameraPermissionTitle(),h.addEventListener("click",function(){h.disabled=!0,d.createCameraListUi(l,a,h)}),a.appendChild(h)},o.prototype.createPermissionsUi=function(l,a){var d=this;if(an.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){to.hasPermissions().then(function(h){h?d.createCameraListUi(l,a):(d.persistedDataManager.setHasPermission(!1),d.createPermissionButton(l,a))}).catch(function(h){d.persistedDataManager.setHasPermission(!1),d.createPermissionButton(l,a)});return}this.createPermissionButton(l,a)},o.prototype.createSectionControlPanel=function(){var l=document.getElementById(this.getDashboardSectionId()),a=document.createElement("div");l.appendChild(a);var d=document.createElement("div");d.id=this.getDashboardSectionCameraScanRegionId(),d.style.display=an.isCameraScanType(this.currentScanType)?"block":"none",a.appendChild(d);var h=document.createElement("div");h.style.textAlign="center",d.appendChild(h),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(d,h),this.renderFileScanUi(a)},o.prototype.renderFileScanUi=function(l){var a=an.isFileScanType(this.currentScanType),d=this,h=function(g){if(!d.html5Qrcode)throw"html5Qrcode not defined";an.isFileScanType(d.currentScanType)&&(d.setHeaderMessage(Se.loadingImage()),d.html5Qrcode.scanFileV2(g,!0).then(function(A){d.resetHeaderMessage(),d.qrCodeSuccessCallback(A.decodedText,A)}).catch(function(A){d.setHeaderMessage(A,It.STATUS_WARNING),d.qrCodeErrorCallback(A,gc.createFrom(A))}))};this.fileSelectionUi=Xh.create(l,a,h)},o.prototype.renderCameraSelection=function(l){var a=this,d=this,h=document.getElementById(this.getDashboardSectionCameraScanRegionId());h.style.textAlign="center";var g=Kh.create(h,!1),A=function(F){var X=F.zoomFeature();if(X.isSupported()){g.setOnCameraZoomValueChangeCallback(function(Z){X.apply(Z)});var Q=1;a.config.defaultZoomValueIfSupported&&(Q=a.config.defaultZoomValueIfSupported),Q=gh(Q,X.min(),X.max()),g.setValues(X.min(),X.max(),Q,X.step()),g.show()}},b=Zh.create(h,l),T=document.createElement("span"),p=Kt.createElement("button",St.CAMERA_START_BUTTON_ID);p.innerText=Se.scanButtonStartScanningText(),T.appendChild(p);var S=Kt.createElement("button",St.CAMERA_STOP_BUTTON_ID);S.innerText=Se.scanButtonStopScanningText(),S.style.display="none",S.disabled=!0,T.appendChild(S);var N,O=function(F){if(!F.torchFeature().isSupported()){N&&N.hide();return}N?N.updateTorchCapability(F.torchFeature()):N=Yh.create(T,F.torchFeature(),{display:"none",marginLeft:"5px"},function(X){d.setHeaderMessage(X,It.STATUS_WARNING)}),N.show()};h.appendChild(T);var k=function(F){F||(p.style.display="none"),p.innerText=Se.scanButtonStartScanningText(),p.style.opacity="1",p.disabled=!1,F&&(p.style.display="inline-block")};if(p.addEventListener("click",function(F){p.innerText=Se.scanButtonScanningStarting(),b.disable(),p.disabled=!0,p.style.opacity="0.5",a.scanTypeSelector.hasMoreThanOneScanType()&&d.showHideScanTypeSwapLink(!1),d.resetHeaderMessage();var X=b.getValue();d.persistedDataManager.setLastUsedCameraId(X),d.html5Qrcode.start(X,Qh(d.config),d.qrCodeSuccessCallback,d.qrCodeErrorCallback).then(function(Q){S.disabled=!1,S.style.display="inline-block",k(!1);var Z=d.html5Qrcode.getRunningTrackCameraCapabilities();a.config.showTorchButtonIfSupported===!0&&O(Z),a.config.showZoomSliderIfSupported===!0&&A(Z)}).catch(function(Q){d.showHideScanTypeSwapLink(!0),b.enable(),k(!0),d.setHeaderMessage(Q,It.STATUS_WARNING)})}),b.hasSingleItem()&&p.click(),S.addEventListener("click",function(F){if(!d.html5Qrcode)throw"html5Qrcode not defined";S.disabled=!0,d.html5Qrcode.stop().then(function(X){a.scanTypeSelector.hasMoreThanOneScanType()&&d.showHideScanTypeSwapLink(!0),b.enable(),p.disabled=!1,S.style.display="none",p.style.display="inline-block",N&&(N.reset(),N.hide()),g.removeOnCameraZoomValueChangeCallback(),g.hide(),d.insertCameraScanImageToScanRegion()}).catch(function(X){S.disabled=!1,d.setHeaderMessage(X,It.STATUS_WARNING)})}),d.persistedDataManager.getLastUsedCameraId()){var Y=d.persistedDataManager.getLastUsedCameraId();b.hasValue(Y)?(b.setValue(Y),p.click()):d.persistedDataManager.resetLastUsedCameraId()}},o.prototype.createSectionSwap=function(){var l=this,a=Se.textIfCameraScanSelected(),d=Se.textIfFileScanSelected(),h=document.getElementById(this.getDashboardSectionId()),g=document.createElement("div");g.style.textAlign="center";var A=Kt.createElement("span",this.getDashboardSectionSwapLinkId());A.style.textDecoration="underline",A.style.cursor="pointer",A.innerText=an.isCameraScanType(this.currentScanType)?a:d,A.addEventListener("click",function(){if(!l.sectionSwapAllowed){l.verbose&&l.logger.logError("Section swap called when not allowed");return}l.resetHeaderMessage(),l.fileSelectionUi.resetValue(),l.sectionSwapAllowed=!1,an.isCameraScanType(l.currentScanType)?(l.clearScanRegion(),l.getCameraScanRegion().style.display="none",l.fileSelectionUi.show(),A.innerText=d,l.currentScanType=dn.SCAN_TYPE_FILE,l.insertFileScanImageToScanRegion()):(l.clearScanRegion(),l.getCameraScanRegion().style.display="block",l.fileSelectionUi.hide(),A.innerText=a,l.currentScanType=dn.SCAN_TYPE_CAMERA,l.insertCameraScanImageToScanRegion(),l.startCameraScanIfPermissionExistsOnSwap()),l.sectionSwapAllowed=!0}),g.appendChild(A),h.appendChild(g)},o.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var l=this,a=this;if(this.persistedDataManager.hasCameraPermissions()){to.hasPermissions().then(function(d){if(d){var h=document.getElementById(a.getCameraPermissionButtonId());if(!h)throw l.logger.logError("Permission button not found, fail;"),"Permission button not found";h.click()}else a.persistedDataManager.setHasPermission(!1)}).catch(function(d){a.persistedDataManager.setHasPermission(!1)});return}},o.prototype.resetHeaderMessage=function(){var l=document.getElementById(this.getHeaderMessageContainerId());l.style.display="none"},o.prototype.setHeaderMessage=function(l,a){a||(a=It.STATUS_DEFAULT);var d=this.getHeaderMessageDiv();switch(d.innerText=l,d.style.display="block",a){case It.STATUS_SUCCESS:d.style.background="rgba(106, 175, 80, 0.26)",d.style.color="#477735";break;case It.STATUS_WARNING:d.style.background="rgba(203, 36, 49, 0.14)",d.style.color="#cb2431";break;case It.STATUS_DEFAULT:default:d.style.background="rgba(0, 0, 0, 0)",d.style.color="rgb(17, 17, 17)";break}},o.prototype.showHideScanTypeSwapLink=function(l){this.scanTypeSelector.hasMoreThanOneScanType()&&(l!==!0&&(l=!1),this.sectionSwapAllowed=l,this.getDashboardSectionSwapLink().style.display=l?"inline-block":"none")},o.prototype.insertCameraScanImageToScanRegion=function(){var l=this,a=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){a.innerHTML="<br>",a.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(d){a.innerHTML="<br>",a.appendChild(l.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=kh,this.cameraScanImage.alt=Se.cameraScanAltText()},o.prototype.insertFileScanImageToScanRegion=function(){var l=this,a=document.getElementById(this.getScanRegionId());if(this.fileScanImage){a.innerHTML="<br>",a.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(d){a.innerHTML="<br>",a.appendChild(l.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Fh,this.fileScanImage.alt=Se.fileScanAltText()},o.prototype.clearScanRegion=function(){var l=document.getElementById(this.getScanRegionId());l.innerHTML=""},o.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},o.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},o.prototype.getDashboardSectionSwapLinkId=function(){return St.SCAN_TYPE_CHANGE_ANCHOR_ID},o.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},o.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},o.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},o.prototype.getCameraPermissionButtonId=function(){return St.CAMERA_PERMISSION_BUTTON_ID},o.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},o.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},o.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},o}();const ro="html5qr-code-full-region",$h=o=>{let l={};return o.fps&&(l.fps=o.fps),o.qrbox&&(l.qrbox=o.qrbox),o.aspectRatio&&(l.aspectRatio=o.aspectRatio),o.disableFlip!==void 0&&(l.disableFlip=o.disableFlip),l},eg=o=>(v.useEffect(()=>{const l=$h(o),a=o.verbose===!0;if(!o.qrCodeSuccessCallback)throw"qrCodeSuccessCallback is required callback.";const d=new Jh(ro,l,a);return d.render(o.qrCodeSuccessCallback,o.qrCodeErrorCallback),()=>{d.clear().catch(h=>{console.error("Failed to clear html5QrcodeScanner. ",h)})}},[]),C.jsx("div",{id:ro}));function tg(){const[o,l]=Nr.useState(!1),[a,d]=Nr.useState(!1),h=async(A,b)=>{console.log({title:"Scanning QR Code",description:"Scanning QR Code",decodedText:A,decodedResult:b}),d(!0),er.post(route("vehicles.scan-qr"),{encrypted:A},{onSuccess:()=>{l(!1)},onError:T=>{console.log({title:"Scan Failed",description:"Failed to scan QR code. Please try again.",error:T}),l(!1)}})},g=A=>{const b=Date.now();b-lastErrorTime<3e3||(A==null?void 0:A.name)!=="NotFoundException"&&(console.warn("Scan failed:",A),lastErrorTime=b)};return C.jsxs(qa,{open:o,onOpenChange:l,children:[C.jsx(Ja,{asChild:!0,children:C.jsxs("button",{className:"group flex gap-3",children:[C.jsx("span",{className:"flex size-8 items-center justify-center rounded-4xl bg-white p-1.5 group-hover:bg-[#006600]",children:C.jsx(Pl,{className:"text-[#006600] group-hover:text-white"})}),C.jsxs("div",{className:"hidden w-40 flex-col text-left text-xs group-hover:text-[#006600] lg:flex",children:[C.jsx("span",{className:"font-bold",children:"Scan QR Code"}),C.jsx("p",{children:"Scan the QR Code to retrieve the vehicle information."})]})]})}),C.jsxs($a,{className:"sm:max-w-[425px]",children:[C.jsxs(ec,{children:[C.jsx(nc,{children:"Scan QR Code"}),C.jsx(Od,{children:"Scan the QR Code to retrieve the vehicle information."})]}),C.jsx("div",{className:"flex justify-center gap-4 py-4",children:a?C.jsx("div",{className:"flex items-center justify-center p-4",children:C.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-[#006600]"})}):C.jsx(eg,{fps:10,qrbox:250,disableFlip:!1,qrCodeSuccessCallback:h,qrCodeErrorCallback:g})}),C.jsx(tc,{className:"flex justify-center",children:C.jsx(Pn,{onClick:()=>l(!1),children:"Close"})})]})]})}function ng(){const o=()=>{er.reload({preserveScroll:!0,preserveState:!0})};return C.jsx(C.Fragment,{children:C.jsxs("div",{className:"flex gap-2 p-4",children:[C.jsx(tg,{}),C.jsxs("button",{onClick:o,className:"group flex gap-3",children:[C.jsx("span",{className:"flex size-8 items-center justify-center rounded-4xl bg-white p-1.5 group-hover:bg-[#006600]",children:C.jsx(kl,{className:"text-[#006600] group-hover:text-white"})}),C.jsxs("div",{className:"hidden w-40 flex-col text-left text-xs group-hover:text-[#006600] lg:flex",children:[C.jsx("span",{className:"font-bold",children:"Refresh"}),C.jsx("p",{children:"Reload to get the latest data and updates from the system."})]})]})]})})}function rg({pageDetails:o,showQuickActions:l=!0}){return C.jsxs("div",{className:"flex items-center justify-between px-6",children:[C.jsx(fh,{details:o}),l&&C.jsx(ng,{})]})}function ig({children:o,breadcrumbs:l=[],pageDetails:a,showQuickActions:d}){const[h,g]=v.useState(!1);return v.useEffect(()=>{er.on("start",()=>g(!0)),er.on("finish",()=>g(!1)),er.on("error",()=>g(!1))},[]),C.jsxs(Cu,{variant:"sidebar",children:[C.jsx(Ud,{}),C.jsxs(wu,{variant:"sidebar",children:[C.jsx(dh,{breadcrumbs:l}),C.jsx(rg,{pageDetails:a,showQuickActions:d}),o]})]})}const Mg=({children:o,breadcrumbs:l,pageDetails:a,showQuickActions:d=!0,...h})=>C.jsx(ig,{breadcrumbs:l,pageDetails:a,showQuickActions:d,...h,children:o});export{Sf as $,Mg as A,Uo as B,lo as C,dd as D,ki as E,Ag as F,Al as G,Qo as H,Q1 as I,q1 as J,J1 as K,ra as L,Nl as M,ju as N,ko as O,Bo as P,Uu as Q,Po as R,fo as S,C1 as T,Pl as U,lh as V,xg as W,uo as X,jl as Y,vg as Z,Ef as _,fd as a,Wl as a0,Ls as a1,If as a2,hd as b,xd as c,Os as d,qa as e,Ja as f,$a as g,ec as h,nc as i,Od as j,bg as k,Cf as l,$i as m,es as n,Us as o,Sg as p,Ig as q,ah as r,Ng as s,un as t,Tg as u,Af as v,tc as w,gg as x,Fo as y,jo as z};
