import{q as h,j as e,m as a,t as p,$ as x}from"./app-CLKafMi8.js";import{D as f}from"./data-table-C7dLI7r4.js";import{B as u}from"./badge-C6hRO3uT.js";import{B as d}from"./button-BjJxCl2U.js";import{G as j,H as g,I as v,J as b,K as y,A as C}from"./app-layout-DVg1ib_u.js";import{P as q}from"./pencil-DTvOLnSC.js";import{T as I}from"./trash-CJg2OzLV.js";import{C as N}from"./index-DDbGhVyI.js";import{c as w,A as S}from"./index-DJgH2Ra1.js";import{P as T}from"./placeholder-pattern-B2KenmxV.js";import"./index-BCvKXVy8.js";import"./table-BlADWfi2.js";import"./app-logo-icon-Duf-p-hV.js";import"./data-table-toolbar-B2mgQWHI.js";import"./input-BZPmkLvt.js";import"./select-Dh-P3SFY.js";import"./index-CbVnBepr.js";import"./index-DOfCkWky.js";import"./index-d59M3VVJ.js";import"./createLucideIcon-BqkyE-xM.js";import"./plus-DTrtCI9I.js";import"./index-YJI3hRqt.js";import"./wrench-BvQdNsdS.js";function k({row:i,rowKey:c="id",handleView:l,handleEdit:t,handleDelete:s,handleConfirm:r}){const n=i[c],o=h().props.auth.user;return e.jsxs("div",{className:"flex flex-row justify-center gap-2",children:[e.jsx(d,{variant:"outline",onClick:()=>l(n),children:e.jsx(j,{})}),o.role.name==="Mechanic"&&e.jsx("div",{className:"gap-2",children:!i.confirmed_by&&e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(d,{variant:"outline",onClick:()=>t(n),children:e.jsx(q,{})}),e.jsx(d,{variant:"destructive",onClick:()=>s(n),children:e.jsx(I,{})})]})}),(o.role.name==="Manager"||o.role.name==="Admin")&&e.jsx(e.Fragment,{children:!i.confirmed_by&&e.jsx(g,{children:e.jsxs(v,{children:[e.jsx(b,{asChild:!0,children:e.jsx(d,{onClick:()=>r(n),children:e.jsx(N,{})})}),e.jsx(y,{children:e.jsx("p",{children:"Confirm inpection"})})]})})})]})}const m=w(),D=(i,c,l)=>[{id:"select",enableSorting:!1,enableHiding:!1},m.accessor("request_description",{header:({column:t})=>e.jsxs(d,{variant:"ghost",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:["Request description",e.jsx(S,{className:"ml-2 h-4 w-4"})]}),cell:t=>{const s=t.getValue()||"",r=40,o=s.length>r?s.slice(0,r)+"...":s;return e.jsx("div",{className:"text-left",children:o})}}),m.accessor("started_at",{header:()=>e.jsx("div",{className:"text-left",children:"Started at"}),cell:t=>{const r=new Date(t.getValue()).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx("div",{className:"text-left",children:r})}}),m.accessor("completed_at",{header:()=>e.jsx("div",{className:"text-left",children:"Completed at"}),cell:t=>{const r=new Date(t.getValue()).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return e.jsx("div",{className:"text-left",children:r})}}),m.accessor("confirmed_by",{header:()=>e.jsx("div",{className:"text-left",children:"Confirmation"}),cell:t=>e.jsx("div",{className:"text-left",children:t.getValue()?e.jsx(u,{variant:"primary",children:"Confirmed"}):e.jsx(u,{variant:"secondary",children:"Unconfirmed"})})}),{id:"actions",header:()=>e.jsx("div",{className:"text-center",children:"Actions"}),cell:({row:t})=>{const s=t.original,r=n=>{a.patch(`/services/request-inspections/${n}/confirm`,{},{onSuccess:()=>{p.success("Inspection confirmed successfully",{description:"You can now approve or reject the request",action:{label:"Go",onClick:()=>a.get(`/services/requests/${s.request_id}`)},duration:6e3}),a.reload()},onError:o=>{p.error("Inspection confirmation failed",{description:o.message})}})};return e.jsx(k,{row:s,rowKey:"inspection_id",handleView:i,handleEdit:c,handleDelete:l,handleConfirm:r})}}],_=[{title:"Service Request Inspections",href:"/services/request-inspections"}],A={title:"Service Request Inspections",description:"Inspections done to confirm issue validity and determine the service requirements."};function se({serviceInspections:i}){const c=s=>{confirm("Are you sure?")&&a.delete(route("request-inspections.destroy",{id:s}))},l=s=>{a.get(route("request-inspections.show",{id:s}))},t=s=>{a.get(route("request-inspections.edit",{id:s}))};return e.jsxs(C,{breadcrumbs:_,pageDetails:A,children:[console.log(i),e.jsx(x,{title:"Service Request Inspections"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx(f,{columns:D,data:i,handleView:l,handleEdit:t,handleDelete:c,filterColumn:"request_description",placeholder:"Search service request description"}),e.jsx("div",{className:"border-sidebar-border/70 dark:border-sidebar-border relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border md:min-h-min",children:e.jsx(T,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})})]})]})}export{se as default};
