import{j as e,Y as _,R as d,$ as D,m as C}from"./app-CLKafMi8.js";import{P as O}from"./placeholder-pattern-B2KenmxV.js";import{D as S,a as k,b as L,c as E,d as p,A as I}from"./app-layout-DVg1ib_u.js";import{C as j,a as g,b as m,c,d as u}from"./card-DGsM5wb-.js";import{I as R}from"./input-BZPmkLvt.js";import{c as f}from"./createLucideIcon-BqkyE-xM.js";import{C as T}from"./car-Dw-8_TpW.js";import{E as A}from"./edit-odometer-dialog-DqYmXk5A.js";import{D as M}from"./display-table-BRRue0uF.js";import{B as n}from"./button-BjJxCl2U.js";import{c as $,A as h}from"./index-DJgH2Ra1.js";import{E as P}from"./ellipsis-Bi7QZukB.js";import{P as H}from"./pencil-DTvOLnSC.js";import{T as q}from"./trash-CJg2OzLV.js";import{O as z}from"./odometer-log-modal-DbiIyGvz.js";import"./app-logo-icon-Duf-p-hV.js";import"./index-DDbGhVyI.js";import"./index-CbVnBepr.js";import"./index-DOfCkWky.js";import"./index-YJI3hRqt.js";import"./wrench-BvQdNsdS.js";import"./odometer-log-form-DlFxGX-s.js";import"./input-error-D2Kuilvy.js";import"./label-CEnKmdYU.js";import"./select-Dh-P3SFY.js";import"./index-d59M3VVJ.js";import"./index-BCvKXVy8.js";import"./table-BlADWfi2.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],F=f("Download",B);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Y=f("Search",U);function G({vehicles:a,selectedVehicle:s,setSelectedVehicle:o}){return e.jsxs(j,{children:[e.jsxs(g,{children:[e.jsx(m,{className:"text-base",children:"Select Vehicle"}),e.jsx(c,{children:"Choose a vehicle to view its odometer logs"})]}),e.jsx(u,{className:"",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"text-muted-foreground absolute top-2.5 left-2 h-4 w-4"}),e.jsx(R,{placeholder:"Search vehicles...",className:"pl-8"})]}),e.jsx("div",{className:"space-y-2 overflow-y-auto md:max-h-[60vh]",children:a.map(r=>e.jsxs("div",{className:`hover:bg-muted flex cursor-pointer items-center rounded-md border p-2 ${(s==null?void 0:s.vehicle_id)===r.vehicle_id?"border-primary bg-primary/5":"hover:border-border border-transparent"}`,onClick:()=>o(r),children:[e.jsx(T,{className:`mr-2 h-4 w-4 ${(s==null?void 0:s.vehicle_id)===r.vehicle_id?"text-primary":"text-muted-foreground"}`}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${(s==null?void 0:s.vehicle_id)===r.vehicle_id?"text-primary":""}`,children:r.vehicle_name}),e.jsx("p",{className:"text-muted-foreground text-xs",children:r.plate_number})]})]},r.vehicle_id))})]})})]})}const l=$(),J=(a,s,o)=>[{id:"select",enableSorting:!1,enableHiding:!1},l.accessor("odometer_id",{header:({column:r})=>e.jsxs(n,{variant:"ghost",onClick:()=>r.toggleSorting(r.getIsSorted()==="asc"),children:["ID",e.jsx(h,{className:"ml-2 h-4 w-4"})]}),cell:r=>e.jsx("div",{className:"text-left",children:r.getValue()})}),l.accessor("logged_at",{header:({column:r})=>e.jsxs("div",{className:"text-left",children:["Logged at",e.jsx(n,{variant:"ghost",onClick:()=>r.toggleSorting(r.getIsSorted()==="asc"),children:e.jsx(h,{className:"ml-2 h-4 w-4"})})]}),cell:r=>{const t=new Date(r.getValue());return e.jsx("div",{className:"text-left",children:t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})}}),l.accessor("reading",{header:()=>e.jsx("div",{className:"text-left",children:"Odometer Reading"}),cell:r=>e.jsx("div",{className:"text-left",children:r.getValue()})}),l.accessor("recorded_by",{header:()=>e.jsx("div",{className:"text-left",children:"Recorded by"}),cell:r=>e.jsx("div",{className:"text-left",children:r.getValue()})}),{id:"actions",cell:({row:r})=>{const t=r.original;return e.jsxs(S,{children:[e.jsx(k,{asChild:!0,children:e.jsxs(n,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(P,{className:"h-4 w-4"})]})}),e.jsxs(L,{align:"end",children:[e.jsx(E,{children:"Actions"}),e.jsxs(p,{onClick:()=>s(t),children:[e.jsx(H,{})," Edit"]}),e.jsxs(p,{onClick:()=>o(t.odometer_id),children:[e.jsx(q,{}),"Delete"]})]})]})}}];function K({selectedVehicle:a,odometerLogs:s,handleDelete:o,handleEdit:r,vehicles:t}){return e.jsxs(j,{children:[e.jsx(g,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-col justify-between md:flex-row md:items-center",children:[e.jsx("div",{children:a?e.jsxs(e.Fragment,{children:[e.jsxs(m,{children:[a.vehicle_name," (",a.plate_number,")"]}),e.jsxs(c,{children:["Asset Tag: ",a.asset_tag]})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{children:"Select a Vehicle"}),e.jsx(c,{children:"Please select a vehicle from the list to view its odometer logs"})]})}),e.jsxs("div",{className:"mt-2 flex gap-2 md:mt-0",children:[e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Export"]}),e.jsx(z,{vehicle_id:a==null?void 0:a.vehicle_id,vehicles:t,formType:"create"}),a&&e.jsx(_,{href:`/vehicles/${a.vehicle_id}`,children:e.jsx(n,{variant:"outline",size:"sm",children:"View Vehicle Details"})})]})]})}),e.jsx(u,{children:e.jsx("div",{className:"rounded-md border",children:e.jsx(M,{columns:J,data:s,handleView:"",handleEdit:r,handleDelete:o})})})]})}const Q=[{title:"Odometer Logs",href:"/odometer"}],W={title:"Odometer Logs",description:"Track and manage vehicle odometer readings"};function De({odometerLogs:a,vehicles:s}){const[o,r]=d.useState(null),[t,x]=d.useState(!1),[v,N]=d.useState(null);d.useEffect(()=>{s.length>0&&!o&&r(s[0])},[s,o]);const b=i=>{confirm("Are you sure?")&&C.delete(route("odometer.destroy",{id:i}))},y=i=>{N(i),x(!0)},w=o?a.filter(i=>i.vehicle_id===o.vehicle_id):[];return e.jsxs(I,{breadcrumbs:Q,pageDetails:W,children:[e.jsx(D,{title:"Repairs"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 p-4 md:grid-cols-4",children:[e.jsx("div",{className:"space-y-6 overflow-y-auto md:col-span-1",children:e.jsx(G,{vehicles:s,selectedVehicle:o,setSelectedVehicle:r})}),e.jsx("div",{className:"space-y-6 md:col-span-3",children:e.jsx(K,{selectedVehicle:o,odometerLogs:w,handleDelete:b,handleEdit:y,vehicles:s})}),e.jsx(A,{isOpen:t,onOpenChange:x,editingLog:v,vehicles:s}),e.jsx("div",{className:"border-sidebar-border/70 dark:border-sidebar-border relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border md:min-h-min",children:e.jsx(O,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})})]})]})}export{De as default};
