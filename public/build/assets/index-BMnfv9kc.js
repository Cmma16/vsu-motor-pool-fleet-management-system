import{j as e,m as s,t as i,$ as x}from"./app-dmRk_xSF.js";import{D as f}from"./data-table-DX_UqsPX.js";import{C as p}from"./colorful-row-actions-D1fNNihr.js";import{B as m}from"./badge-DEZpwE8-.js";import{B as u}from"./button-DfRWLWLh.js";import{c as g,A as j}from"./index-DOZDu9o9.js";import{P as v}from"./placeholder-pattern-BH-eEy8j.js";import{A as b}from"./app-layout-CvTHScm8.js";import{W as N}from"./wrench-D44s-QhF.js";import{I as y}from"./printer-CktAk4ds.js";import"./index-CJBnmqfT.js";import"./table-CfditYzf.js";import"./app-logo-icon-DPhwaTiD.js";import"./data-table-toolbar-DAkKrzaM.js";import"./input-uEZiaGVz.js";import"./select-DTbPtvM0.js";import"./index-Cymawgta.js";import"./createLucideIcon-C6Zxls1X.js";import"./index-BzxzypMb.js";import"./index-DS_s7J1F.js";import"./index-Dnf0Jnlg.js";import"./plus-C3GojSzG.js";import"./destructive-dialog-B4j_tJwZ.js";import"./pencil-DoPNFMyU.js";import"./trash-CUlCQkqn.js";import"./index-C9jObI59.js";const r=g(),w=(c,l,o)=>[{id:"select",enableSorting:!1,enableHiding:!1},r.accessor("maintenance_plan",{header:()=>e.jsx("div",{className:"text-left",children:"Maintenance Plan"}),cell:t=>{const a=t.getValue()||"",n=30,d=a.length>n?a.slice(0,n)+"...":a;return e.jsx("div",{className:"text-left",children:d})}}),r.accessor("vehicle_name",{header:({column:t})=>e.jsxs(u,{variant:"ghost",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:["Vehicle",e.jsx(j,{className:"ml-2 h-4 w-4"})]}),cell:t=>{const a=t.getValue()||"",n=20,d=a.length>n?a.slice(0,n)+"...":a;return e.jsx("div",{className:"text-left",children:d})}}),r.accessor("date_in",{header:()=>e.jsx("div",{className:"text-left",children:"Date In"}),cell:t=>e.jsx("div",{className:"text-left",children:t.getValue()})}),r.accessor("date_completed",{header:()=>e.jsx("div",{className:"text-left",children:"Date Completed"}),cell:t=>e.jsx("div",{className:"text-left",children:t.getValue()})}),r.accessor("odometer_reading",{header:()=>e.jsx("div",{className:"text-left",children:"Odometer Reading"}),cell:t=>e.jsxs("div",{className:"text-left",children:[t.getValue()," km"]})}),r.accessor("performed_by",{header:()=>e.jsx("div",{className:"text-left",children:"Performed By"}),cell:t=>e.jsx("div",{className:"text-left",children:t.getValue()})}),r.accessor("confirmed_by",{header:()=>e.jsx("div",{className:"text-left",children:"Confirmation"}),cell:t=>e.jsx("div",{className:"text-left",children:t.getValue()?e.jsx(m,{variant:"primary",children:"Confirmed"}):e.jsx(m,{variant:"secondary",children:"Unconfirmed"})})}),{id:"actions",header:()=>e.jsx("div",{className:"text-center",children:"Actions"}),cell:({row:t})=>{const a=t.original,n=()=>{s.patch(`/maintenance/${a.maintenance_id}/confirm`,{onSuccess:()=>{i.success("Record confirmed",{description:"The maintenance record has been confirmed successfully"})},onError:()=>{i.error("Confirmation failed",{description:"The maintenance record was not confirmed"})}})};return e.jsx(p,{row:a,rowKey:"maintenance_id",handleView:c,handleEdit:l,handleDelete:o,handleConfirm:n})}}],C=[{title:"Maintenance",href:"/maintenance"}],M={title:"Maintenance Records",description:"View and manage maintenance records here."};function Y({maintenanceRecords:c}){const l=a=>{s.delete(route("maintenance.destroy",{id:a}),{onSuccess:()=>{i.success("Maintenance record deleted successfully")},onError:()=>{i.error("Failed to delete maintenance record")}})},o=a=>{s.get(route("maintenance.show",{id:a}))},t=a=>{s.get(route("maintenance.edit",{id:a}))};return e.jsxs(b,{breadcrumbs:C,pageDetails:M,children:[e.jsx(x,{title:"Maintenance"}),e.jsxs("div",{className:"mx-4",children:[e.jsx("h2",{className:"mb-2 text-lg font-semibold",children:"Important Information"}),e.jsxs("div",{className:"mb-2 flex items-start gap-2 rounded-md bg-blue-50 p-4 text-blue-800",children:[e.jsx(N,{className:"mt-0.5 h-5 w-5 text-blue-400"}),e.jsx("span",{children:"Mechanics can only edit maintenance records they created themselves. Confirmed maintenance records can no longer be edited or deleted."})]}),e.jsxs("div",{className:"flex items-start gap-2 rounded-md bg-green-50 p-4 text-green-800",children:[e.jsx(y,{className:"mt-0.5 h-5 w-5 text-green-400"}),e.jsx("span",{children:"Only the Managers and Admin can confirm/verify maintenance records."})]})]}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx(f,{columns:w,data:c,handleView:o,handleEdit:t,handleDelete:l,filterColumn:"vehicle_name",placeholder:"Search vehicle name"}),e.jsx("div",{className:"border-sidebar-border/70 dark:border-sidebar-border relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border md:min-h-min",children:e.jsx(v,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})})]})]})}export{Y as default};
